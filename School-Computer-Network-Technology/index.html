
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>计算机网络原理 - PhoenixNest&#39;s Blog</title>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate"/>
    
        <meta name="keywords" content="PhoenixNest,PhoenixNest&#39;s Blog,">
    
    
        <meta name="description" content="PhoenixNest&#39;s Blog • 用实力让情怀落地,引言
本篇整理了我学习计算机网络原理时的一些笔记。所用教学平台：Cisco Networking Academy


当今网络网络影响着我们的生活当今世界有了网络，人与人的联系达到空前状态。当人们想,">
    
    
        <meta name="author" content="PhoenixNest">
    
    
        <link rel="alternative" href="atom.xml" title="PhoenixNest&#39;s Blog" type="application/atom+xml">
    
    
        <link rel="icon" href="/img/favicon.png">
    
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">

    
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">

    
<link rel="stylesheet" href="/css/obsidian.css">

    
<link rel="stylesheet" href="/css/ball-atom.min.css">

    
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="loading">
<div class="loader">
    <div class="la-ball-atom la-2x">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>
<span id="config-title" style="display:none">PhoenixNest&#39;s Blog</span>
<div id="loader"></div>
<div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/favicon.png" alt="" data-url="https://phoenixnest.github.io">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">计算机网络原理</h3>
        <div class="social">
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
                animation-delay: 600ms;
                animation-duration: 1.2s;
                background-image:
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/cisco.jpg) ">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                    <a href="/categories/计算机网络"><b>「
                        </b>计算机网络<b> 」</b></a>
                
                一月 12, 2021
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/School-Computer-Network-Technology/" title="计算机网络原理" class="">计算机网络原理</a>
            </h3>
            
                <p class="post-count animated fadeInDown">
                    
                        <span>
                    <b class="iconfont icon-text2"></b> <i>文章字数</i>
                    41k
                </span>
                    
                    
                        <span>
                    <b class="iconfont icon-timer__s"></b> <i>阅读约需</i>
                    1:15
                </span>
                    
                    
                        <span id="/School-Computer-Network-Technology/" class="leancloud_visitors"
                              data-flag-title="计算机网络原理">
                    <b class="iconfont icon-read"></b> <i>阅读次数</i>
                    <span class="leancloud-visitors-count">0</span>
                </span>
                    
                    
                </p>
            
            
                <ul class="animated fadeInDown post-tags-list" itemprop="keywords"><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/%E5%A4%A7%E5%AD%A6/" rel="tag">大学</a></li><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" rel="tag">计算机基础</a></li><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/" rel="tag">计算机网络原理</a></li></ul>
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><blockquote>
<p>本篇整理了我学习<code>计算机网络原理</code>时的一些笔记。<br>所用教学平台：<a href="%22https://cn.netacad.com/%22">Cisco Networking Academy</a></p>
</blockquote>
<hr>
<h2 id="当今网络"><a href="#当今网络" class="headerlink" title="当今网络"></a>当今网络</h2><h3 id="网络影响着我们的生活"><a href="#网络影响着我们的生活" class="headerlink" title="网络影响着我们的生活"></a>网络影响着我们的生活</h3><p>当今世界有了网络，人与人的联系达到空前状态。当人们想到某个创意时，可以即时与其他人沟通，使创意变为现实。用来交流思想和信息的网上社区的形成可能会提高全球的生产力。云的创建让我们可以存储文档和图片，并随时随地访问它们。</p>
<hr>
<h3 id="网络组件"><a href="#网络组件" class="headerlink" title="网络组件"></a>网络组件</h3><blockquote>
<p>连接到网络并直接参与网络通信的所有计算机都属于主机。</p>
</blockquote>
<ul>
<li>主机可以被称为终端设备。某些主机也称为客户端。许多计算机在网络中既是服务器又是客户端。这种网络称为对等网络。</li>
<li>终端设备是指通过网络传输的消息的来源或目的地。中间设备将每台终端设备连接到网络，并且可以将多个独立的网络连接成网际网络。中间设备使用目的终端设备地址以及有关网络互连的信息来决定消息在网络中应该采用的路径。</li>
<li>介质为消息从源设备传送到目的设备提供了通道。</li>
</ul>
<hr>
<h3 id="网络表示方式和网络拓扑"><a href="#网络表示方式和网络拓扑" class="headerlink" title="网络表示方式和网络拓扑"></a>网络表示方式和网络拓扑</h3><blockquote>
<p>网络图通常使用图标来表示构成网络的不同设备和连接。图可以让人们轻松了解大型网络中的设备连接方式。这种网络“图”被称为“拓扑图”。</p>
</blockquote>
<ul>
<li><code>物理拓扑图</code>说明了中间设备和线缆安装的物理位置。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_3_1.png" alt="物理拓补图"></p>
<ul>
<li><code>逻辑拓扑图</code>说明了设备、端口和网络的编址方案。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_3_2.png" alt="逻辑拓扑图"></p>
<hr>
<h3 id="常见网络类型"><a href="#常见网络类型" class="headerlink" title="常见网络类型"></a>常见网络类型</h3><ul>
<li><p><code>小型家庭网络</code>将少量的几台计算机互联并将它们连接到互联网。</p>
</li>
<li><p><code>小型办公室/家庭办公室（SOHO）网络</code>可让一个家庭办公室或远程办公室内的计算机连接到企业网络或访问集中的共享资源。</p>
</li>
<li><p><code>中大型网络</code>（例如大型企业和学校使用的网络）可能有许多站点，包含成百上千台相互连接的主机。</p>
</li>
<li><p><code>互联网</code>是由网络组成的网络，连接全球亿万台计算机。</p>
</li>
</ul>
<hr>
<blockquote>
<p>两种最常见的网络基础设施类型是局域网（LAN）和广域网（WAN）。</p>
</blockquote>
<ul>
<li><p>LAN是<code>覆盖较小地理区域</code>的网络基础设施。</p>
<p>局域网具有如下特点：</p>
<ul>
<li><p>LAN 在有限区域（如家庭、学校、办公大楼或园区）内互连终端设备。</p>
</li>
<li><p>LAN <code>通常由一个组织或个人管理</code>。实行网络级管控、安全控制并制定访问控制策略。</p>
</li>
<li><p>LAN 为内部终端设备和中间设备<code>提供高速带宽</code>。</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_4_1.png" alt="LAN"></p>
<hr>
<ul>
<li><p>WAN是<code>覆盖广泛地理区域</code>的网络基础设施。WAN 通常由服务提供商（SP）或互联网服务提供商（ISP）管理。</p>
<p>WAN 具有如下特点:</p>
<ul>
<li><p>WAN 互连广泛地理区域（例如各大城市、州、省、国家/地区或大陆之间）内的 LAN。</p>
</li>
<li><p>WAN <code>通常由多个服务提供商管理</code>。</p>
</li>
<li><p>WAN 通常<code>提供 LAN 之间的较慢链路</code>。</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_4_2.png" alt="WAN"></p>
<hr>
<ul>
<li>互联网是一个<code>遍及全球的互相连接</code>的网络（简称互联网络或互联网）的集合。</li>
</ul>
<p>互联网<code>不属于任何个人或团体</code>。要确保通过这种多元化基础设施有效通信，需要<code>采用统一的公认技术和标准</code>，也需要众多网络管理机构相互协作。</p>
<p>为了维护互联网协议和进程的结构和标准化，人们建立了许多组织。这些组织包括<code>互联网工程任务组（IETF）</code>、<code>互联网名称与数字地址分配机构（ICANN）</code>和<code>互联网架构委员会（IAB）</code>，以及许多其他组织。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_4_3.png" alt="互联网"></p>
<hr>
<ul>
<li><p>内部网和外联网</p>
<blockquote>
<p>与术语“互联网”类似的另外两个术语是内部网和外联网。</p>
</blockquote>
<p><code>内部网</code>这个术语<code>用于表示一个组织的私有局域网和广域网连接</code>。内部网的<code>设计旨在仅允许该组织的成员、员工或其他获得授权的人员进行访问</code>。</p>
<p><code>组织可以使用外联网为在其他组织工作</code>，但需要本组织数据的人提供安全访问。如：</p>
<ul>
<li><p>公司为外部供应商和承包商提供访问。</p>
</li>
<li><p>医院为医生提供预约系统，以便医生为患者安排预约。</p>
</li>
<li><p>当地教育局为其管辖区的学校提供预算和人员信息。</p>
</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_4_4.png" alt="内部网和外联网"></p>
<hr>
<h3 id="Internet-连接"><a href="#Internet-连接" class="headerlink" title="Internet 连接"></a>Internet 连接</h3><ul>
<li><p>小型办公室/家庭办公室（SOHO）网络互联网连接方式：有线电视、DSL、蜂窝网络、卫星和拨号电话。</p>
</li>
<li><p>商务互联网（企业）连接方式：专用租用线路、地铁以太网、商务 DSL 和卫星。</p>
</li>
</ul>
<blockquote>
<p>选择哪种连接方式取决于地理位置和可供选择的运营商。</p>
<p>传统的独立网络使用不同的技术、规则和标准。</p>
</blockquote>
<ul>
<li>融合网络<code>通过相同的网络基础设施，在许多不同类型的设备之间传输数据、语音和视频</code>。这个网络的基础设施<code>采用一组相同的规则、协议和实施标准</code>。</li>
</ul>
<hr>
<h3 id="可靠网络"><a href="#可靠网络" class="headerlink" title="可靠网络"></a>可靠网络</h3><blockquote>
<p>“网络架构”是<code>指支持基础设施的技术以及通过该网络传输数据的编程服务及规则或协议</code>。</p>
</blockquote>
<p>随着网络的发展，我们了解到网络架构师必须解决<code>四个基本特征</code>，以满足用户的期望：</p>
<p>容错能力、可扩展性、服务质量（QoS）、安全性。</p>
<ul>
<li><p><code>容错</code>网络是在发生故障时限制受影响设备数量的网络。有多条路径到达目的地被称为冗余。</p>
</li>
<li><p><code>可扩展</code>的网络可以快速扩展，以支持新用户和应用程序。网络具有扩展能力，因为设计人员遵循广为接受的标准和协议。</p>
</li>
<li><p><code>QoS</code>是管理拥塞和确保向所有用户可靠传输内容的主要机制。网络管理员必须解决两种网络安全问题：网络基础设施安全和信息安全。</p>
</li>
<li><p>为了实现网络<code>安全</code>的目标，有三个主要要求：保密性、完整性和可用性。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_6_1.png" alt="容错性"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_6_2.png" alt="可拓展性"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_6_3.png" alt="服务质量(QoS)"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_6_4.png" alt="网络安全性"></p>
<hr>
<h3 id="网络趋势"><a href="#网络趋势" class="headerlink" title="网络趋势"></a>网络趋势</h3><blockquote>
<p>最近有几种网络趋势影响着组织和消费者：自带设备（BYOD）、在preview: 192线协作、视频通信和云计算。</p>
</blockquote>
<ul>
<li><p>BYOD 意味着设备由任何使用者在任意地点使用，包括笔记本电脑、上网本、平板电脑、智能手机和电子阅读器。</p>
</li>
<li><p>在线协作工具，如：Cisco Webex、腾讯会议、钉钉，为员工、学生、教师、客户和合作伙伴即时连接、交互和实现其目标提供了一种方法。</p>
</li>
<li><p>视频可用于通信、协作和娱乐。无论身处何地，只要能上网，任何人都可以接打视频电话。</p>
</li>
<li><p>云计算使我们可以在互联网上存储个人文件，甚至可以在服务器上备份整个硬盘驱动器。使用云可以访问文字处理和图片编辑等应用程序。</p>
</li>
</ul>
<hr>
<blockquote>
<p>云类型主要有四种：公有云、私有云、混合云和定制云。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">云类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>公有云</strong></td>
<td align="left">在公有云中提供的云应用和云服务， 可供大众使用。服务可能免费，也可能按 即用即付模式提供，比如按在线存储付费。公有 云利用互联网提供服务。</td>
</tr>
<tr>
<td align="center"><strong>私有云</strong></td>
<td align="left">私有云提供的基于云的应用和服务专供 特定组织或实体（例如政府）使用。私有 云可以使用组织的私有网络来搭建， 虽然构建和维护私有云的成本很高。私有 云也可以由具有严格访问安全控制的外部组织 管理。</td>
</tr>
<tr>
<td align="center"><strong>混合云</strong></td>
<td align="left">混合云由两个或多个云组成（例如：部分私有， 部分公共），其中每个部分仍然是一个不同的对象，但两者都 使用单一架构进行连接。混合云中的个人 将能够根据用户访问权限对各种服务进行 不同程度的访问。</td>
</tr>
<tr>
<td align="center"><strong>社区云</strong></td>
<td align="left">社区云是专为特定实体或组织使用而创建的。公共云和社区云之间的区别在于为团体定制的功能需求。例如，医疗机构必须遵从要求特殊身份验证和保密性的政策与法律（比如 HIPAA）。社区云由具有类似需求和关注的多个组织使用。社区云类似于公共云环境，但是具有一定级别的安全性、隐私性，甚至具有私有云的法规合规性。</td>
</tr>
</tbody></table>
<p>人们正在开发<code>可用于家里所有房间的智能家庭技术</code>。随着家庭网络和高速互联网技术的普及，智能家庭技术将变得越来越普遍。通过使用供电的同一线路，电力线网络通过按一定频率发送数据来发送信息。<code>无线互联网服务提供商（WISP）是使用类似家庭无线局域网（WLAN）的无线技术，将用户连接到专用的接入点或热点的ISP</code>。</p>
<hr>
<h3 id="网络安全"><a href="#网络安全" class="headerlink" title="网络安全"></a>网络安全</h3><blockquote>
<p>不论是小到只有单个互联网连接的家庭网络，还是大到拥有数以千计用户的企业网络，<code>网络安全都是计算机网络中不可或缺的一部分</code>。网络安全必须考虑环境以及网络的工具和需求。它必须能够保护数据安全，同时仍要满足网络的服务质量要求。</p>
</blockquote>
<p>保护网络涉及使用各种协议、技术、设备和工具来保护数据和防御威胁。<code>威胁因素可能来自外部，也可能来自内部</code>。当今许多外部网络安全威胁都来自互联网。</p>
<p><strong>网络有几种常见的<code>外部</code>威胁：</strong></p>
<ul>
<li><p><strong>病毒、蠕虫和特洛伊木马</strong> - 这些包括在用户设备上运行的恶意软件或代码。</p>
</li>
<li><p><strong>间谍软件和广告软件</strong> - 这些是安装在用户设备上的软件类型。这些软件会秘密收集有关用户的信息。</p>
</li>
<li><p><strong>零日攻击（0day）</strong> - 在出现漏洞的第一天发起的攻击。</p>
</li>
<li><p><strong>威胁参与者攻击</strong> - 恶意人员攻击用户设备或网络资源。</p>
</li>
<li><p><strong>拒绝服务攻击</strong> - 使网络设备上的应用和进程减缓或崩溃的攻击。</p>
</li>
<li><p><strong>数据拦截和窃取</strong> - 通过公司网络捕获私人信息的攻击。</p>
</li>
<li><p><strong>身份盗窃</strong> - 窃取用户的登录凭证来访问私人数据的攻击。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_8_1.png" alt="网络威胁"></p>
<hr>
<h3 id="安全解决方案"><a href="#安全解决方案" class="headerlink" title="安全解决方案"></a>安全解决方案</h3><blockquote>
<p>没有哪个单一的解决方案能保护网络不受到各式各样的现有威胁。因此，应使用多个安全解决方案在多个层上实施安全。当一个安全组件无法识别和保护网络时，其他组件可以保护网络。</p>
</blockquote>
<p><strong>这些是家庭或小型办公室网络的基本安全组件：</strong></p>
<ul>
<li><p><strong>防病毒和反间谍软件</strong> - 这些应用帮助防止终端设备感染恶意软件。</p>
</li>
<li><p><strong>防火墙过滤</strong> - 防火墙过滤阻止未经授权的进出网络访问。这可以是基于主机的防火墙系统，用于阻止未经授权访问终端设备，也可以是家用路由器上的基本过滤服务，用于阻止外部人员未经授权访问网络。</p>
</li>
</ul>
<hr>
<blockquote>
<p>企业网络的安全实施通常包含内嵌在网络中的许多组件来监控和过滤流量。理想情况下，所有组件配合工作，从而最大程度地减少维护并提高安全性。大型网络和公司网络使用防病毒、反间谍软件和防火墙过滤，但它们也有其他安全要求:</p>
</blockquote>
<p><strong>大型网络和公司网络使用防病毒、反间谍软件和防火墙过滤，但它们也有其他安全要求:</strong></p>
<ul>
<li><p><strong>专用防火墙系统</strong> - 提供更高级的防火墙功能，更详细地过滤大量数据流。</p>
</li>
<li><p><strong>访问控制列表（ACL）</strong> - 基于IP地址和应用程序，进一步过滤访问和流量转发。</p>
</li>
<li><p><strong>入侵防御系统（IPS）</strong> - 识别快速扩散的威胁，例如零日攻击或零小时攻击。</p>
</li>
<li><p><strong>虚拟专用网络（VPN）</strong> - 为远程工作人员提供对组织机构的安全访问。</p>
</li>
</ul>
<p>网络环境必须考虑网络安全要求以及各种应用和计算要求。家庭环境和企业必须能够保护他们的数据，同时满足每种技术的预期服务质量。此外，实施的安全解决方案必须适应不断发展变化的网络趋势。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/1_8_2.png" alt="安全解决方案"></p>
<hr>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>网络影响着我的生活</li>
</ul>
<blockquote>
<p>当今世界有了网络，人与人的联系达到空前状态。当人们想到某个创意时，可以即时与其他人沟通，使创意变为现实。用来交流思想和信息的网上社区的形成可能会提高全球的生产力。云的创建让我们可以存储文档和图片，并随时随地访问它们。</p>
</blockquote>
<ul>
<li>网络组件</li>
</ul>
<blockquote>
<p>连接到网络并直接参与网络通信的所有计算机都属于主机。主机可以被称为终端设备。某些主机也称为客户端。许多计算机在网络中既是服务器又是客户端。这种网络称为对等网络。终端设备是指通过网络传输的消息的来源或目的地。中间设备将每台终端设备连接到网络，并且可以将多个独立的网络连接成网际网络。中间设备使用目的终端设备地址以及有关网络互连的信息来决定消息在网络中应该采用的路径。介质为消息从源设备传送到目的设备提供了通道。</p>
</blockquote>
<ul>
<li>网络表示方式和网络拓扑</li>
</ul>
<blockquote>
<p>网络图通常使用图标来表示构成网络的不同设备和连接。图可以让人们轻松了解大型网络中的设备连接方式。这种网络“图”被称为“拓扑图”。物理拓扑图说明了中间设备和线缆安装的物理位置。逻辑拓扑图说明了设备、端口和网络的编址方案。</p>
</blockquote>
<ul>
<li>常见网络类型</li>
</ul>
<blockquote>
<p>小型家庭网络将少量的几台计算机互联并将它们连接到互联网。小型办公室/家庭办公室 (SOHO) 网络可让一个家庭办公室或远程办公室内的计算机连接到企业网络或访问集中的共享资源。中大型网络（例如大型企业和学校使用的网络）可能有许多站点，包含成百上千台相互连接的主机。互联网是由网络组成的网络，连接全球亿万台计算机。两种最常见的网络基础设施类型是局域网 (LAN) 和广域网 (WAN)。LAN 是覆盖较小地理区域的网络基础设施。WAN 是覆盖广泛地理区域的网络基础设施。内部网表示一个组织的私有局域网和广域网连接。组织可以使用外联网为在其他组织工作，但需要本组织数据的人提供安全访问。</p>
</blockquote>
<ul>
<li>Internet 连接</li>
</ul>
<blockquote>
<p>SOHO互联网连接方式包括有线电视、DSL、蜂窝网络、卫星和拨号电话。商务互联网连接方式包括专用租用线路、地铁以太网、商务 DSL 和卫星。选择哪种连接方式取决于地理位置和可供选择的运营商。传统的独立网络使用不同的技术、规则和标准。融合网络通过相同的网络基础设施，在许多不同类型的设备之间传输数据、语音和视频。这个网络的基础设施采用一组相同的规则、协议和实施标准。Packet Tracer是一个灵活的软件程序，它让您有机会使用网络表示方式和理论来构建网络模型，并探索相对复杂的局域网和广域网。</p>
</blockquote>
<ul>
<li>可靠网络</li>
</ul>
<blockquote>
<p>术语“网络架构”是指支持基础设施的技术以及通过该网络传输数据的编程服务及规则或协议。随着网络的发展，我们了解到网络架构师必须解决四个基本特征，以满足用户的期望：容错能力、可扩展性、服务质量 (QoS) 和安全性。容错网络是在发生故障时限制受影响设备数量的网络。有多条路径到达目的地被称为冗余。可扩展的网络可以快速扩展，以支持新用户和应用程序。网络具有扩展能力，因为设计人员遵循广为接受的标准和协议。Qos是管理拥塞和确保向所有用户可靠传输内容的主要机制。网络管理员必须解决两种网络安全问题：网络基础设施安全和信息安全。为了实现网络安全的目标，有三个主要要求：保密性、完整性和可用性。</p>
</blockquote>
<ul>
<li>网络趋势</li>
</ul>
<blockquote>
<p>最近有几种网络趋势影响着组织和消费者：自带设备 (BYOD)、在线协作、视频通信和云计算。BYOD 意味着设备由任何使用者在任意地点使用。协作工具，如Cisco Webex，为员工、学生、教师、客户和合作伙伴即时连接、交互和实现其目标提供了一种方法。视频可用于通信、协作和娱乐。无论身处何地，只要能上网，任何人都可以接打视频电话。云计算使我们可以在互联网上存储个人文件，甚至可以在服务器上备份整个硬盘驱动器。使用云可以访问文字处理和图片编辑等应用程序。云类型主要有四种：公有云、私有云、混合云和定制云。人们正在开发可用于家里所有房间的智能家庭技术。随着家庭网络和高速互联网技术的普及，智能家庭技术将变得越来越普遍。通过使用供电的同一线路，电力线网络通过按一定频率发送数据来发送信息。无线互联网服务提供商 (WISP) 是使用类似家庭无线局域网 (WLAN) 的无线技术，将用户连接到专用的接入点或热点的 ISP。</p>
</blockquote>
<ul>
<li>网络安全</li>
</ul>
<blockquote>
<p>网络有几种常见的外部威胁：</p>
</blockquote>
<ol>
<li><strong>病毒、蠕虫和特洛伊木马</strong></li>
<li><strong>间谍软件和广告软件</strong></li>
<li><strong>零日攻击</strong></li>
<li><strong>威胁参与者攻击</strong></li>
<li><strong>拒绝服务攻击</strong></li>
<li><strong>数据拦截和窃取</strong></li>
<li><strong>身份盗窃</strong></li>
</ol>
<blockquote>
<p>这些是家庭或小型办公室网络的基本安全组件：</p>
</blockquote>
<ol>
<li><strong>防病毒和反间谍软件</strong></li>
<li><strong>防火墙过滤</strong></li>
</ol>
<blockquote>
<p>大型网络和公司网络使用防病毒、反间谍软件和防火墙过滤，但它们也有其他安全要求:</p>
</blockquote>
<ol>
<li><strong>专用防火墙系统</strong></li>
<li><strong>访问控制列表 (ACL)</strong></li>
<li><strong>入侵防御系统 (IPS)</strong></li>
<li><strong>虚拟专用网络 (VPN)</strong></li>
</ol>
<hr>
<h2 id="协议和模型"><a href="#协议和模型" class="headerlink" title="协议和模型"></a>协议和模型</h2><h3 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h3><blockquote>
<p>所有通信方法都有三个共同元素：消息源（发送方）、消息目的地（接收方）和信道。</p>
</blockquote>
<ul>
<li><p><strong>消息源（发送方）</strong> - 是需要向其他人或设备发送消息的人或电子设备。</p>
</li>
<li><p><strong>消息目的地（接收方）</strong> - 目的地接收并解释消息。</p>
</li>
<li><p><strong>信道</strong> - 这由为消息从源传送到目的地提供路径的介质组成。</p>
</li>
</ul>
<hr>
<blockquote>
<p>发送的消息由称为“协议”的规则管理。</p>
<p>协议必须包括：已识别的发送方和接收方、通用语言和语法、传输的速率和时序以及确认或确认要求。常用的计算机协议包括这些要求：消息编码、格式、封装、大小、时序、传输方式。</p>
</blockquote>
<ul>
<li><p><strong>编码</strong> - 是为了便于传输信息，将信息转换为另一种广为接受的形式。</p>
</li>
<li><p><strong>解码</strong> - 是编码的逆向过程，用来解释信息。</p>
</li>
<li><p><strong>消息格式和封装</strong> - 当消息从源发送到目的地时，必须使用特定的格式或结构，取决于消息的类型和传输信道。</p>
</li>
<li><p><strong>消息大小</strong></p>
</li>
<li><p><strong>消息时序</strong> - 流量控制、响应超时、访问方法。</p>
</li>
</ul>
<hr>
<p><strong>流量控制</strong>：定义了可以发送多少信息以及传递信息的速率。例如，如果一个人讲话太快，对方就难以听清和理解。在网络通信中，源设备和目的设备使用网络协议来协商和管理信息流。</p>
<p><strong>响应超时</strong>：如果一个人提问之后在合理的时间内没有得到回答，就会认为没有获得回答并作出相应的反应。此人可能会重复这个问题，也可能继续谈话。网络上的主机会使用网络协议来指定等待响应的时长，以及在响应超时的情况下执行什么操作</p>
<p><strong>访问方法</strong>：这决定人们可以发送消息的时间。</p>
<hr>
<p><code>消息传输方式</code>：单播（1：1）、组播（1：n - 1）和广播（1：n）。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_1.png" alt="消息传输方式"></p>
<hr>
<h3 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h3><blockquote>
<p>网络协议定义了用于设备之间交换消息的通用格式和规则集。<code>协议由软件、硬件或两者中的终端设备和中间设备实现</code>。</p>
<p>通过计算机网络发送的消息通常需要使用多种协议，<code>每个网络协议都有自己的功能、格式和通信规则</code>。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">协议类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>网络<code>通信</code>协议</strong></td>
<td align="left">这类协议使两个或多个设备能够在一个或多个网络上通信。以太网技术家族涉及多种协议，例如：IP、TCP、HTTP等。</td>
</tr>
<tr>
<td align="center"><strong>网络<code>安全</code>协议</strong></td>
<td align="left">这类协议保护数据以提供身份验证、数据完整性和数据加密。安全协议的示例包括安全外壳协议（SSH）、安全套接字层协议（SSL）和传输层安全协议（TLS）。</td>
</tr>
<tr>
<td align="center"><strong><code>路由</code>协议</strong></td>
<td align="left">这类协议使路由器能够交换路由信息，比较路径 信息，然后选择到达目标网络的 最佳路径。路由协议的示例包括开放最短路径优先协议（OSPF）和边界网关协议（BGP）。</td>
</tr>
<tr>
<td align="center"><strong><code>服务发现</code>协议（设备或服务自动检测协议）</strong></td>
<td align="left">这类协议用于设备或服务的自动检测。 服务发现协议的示例包括发现用于IP地址分配 服务的动态主机配置协议（DHCP），和用于执行域名到IP地址转换的域名系统（DNS）。</td>
</tr>
</tbody></table>
<hr>
<h3 id="协议功能"><a href="#协议功能" class="headerlink" title="协议功能"></a>协议功能</h3><blockquote>
<p>计算机和网络设备使用商定的协议，这些协议提供以下功能：编址，可靠性，流量控制，排序，错误检测和应用程序接口。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">功能</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>编址</strong></td>
<td align="left">这使用已定义的编址方案来标识消息的发送者和预期的接收者。提供编址的协议示例，包括以太网，IPv4和IPv6。</td>
</tr>
<tr>
<td align="center"><strong>可靠性</strong></td>
<td align="left">此功能提供了有保证的传输机制，以防消息在传输过程中丢失或损坏。TCP提供可靠的传输。</td>
</tr>
<tr>
<td align="center"><strong>流量控制</strong></td>
<td align="left">此功能可确保数据在两个通信设备之间高效传输。TCP提供流量控制服务。</td>
</tr>
<tr>
<td align="center"><strong>排序</strong></td>
<td align="left">此功能唯一地标记每个传输的数据段。接收设备使用排序信息正确地重组信息。如果数据段丢失，延迟或未按顺序接收，这将很有用。TCP提供排序服务。</td>
</tr>
<tr>
<td align="center"><strong>差错检测</strong></td>
<td align="left">此功能用于确定传输过程中数据是否已损坏。提供差错检测的各种协议包括以太网，IPv4，IPv6和TCP。</td>
</tr>
<tr>
<td align="center"><strong>应用接口</strong></td>
<td align="left">此功能包含用于网络应用程序之间的进程间通信的信息。例如，访问网页时， 使用HTTP或HTTPS协议在客户端和服务器Web进程 之间进行通信。</td>
</tr>
</tbody></table>
<hr>
<h3 id="协议簇"><a href="#协议簇" class="headerlink" title="协议簇"></a>协议簇</h3><blockquote>
<p>在许多情况下，<code>协议必须能够与其他协议配合使用</code>，以便让在线体验为您提供网络通信所需的一切。<code>协议簇旨在相互无缝协作</code>。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_3_1.png" alt="协议簇"></p>
<p>执行某种通信功能所需的一组内在相关协议称为协议簇。</p>
<p>协议栈展示了协议簇中的单个协议是如何实施的。协议显示为分层结构，每种上层服务都依赖于其余下层协议所定义的功能。协议栈的下层负责通过网络传输数据和向上层提供服务，而上层则负责处理发送的消息内容。</p>
<hr>
<p>自20世纪70年代以来，出现了几种不同的协议簇，<code>有些是由一个标准组织开发的，有些是由不同的供应商开发的</code>。</p>
<p>在网络通信和互联网的发展过程中，出现了几个<code>相互竞争的协议簇</code>，如图所示。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_3_2.png" alt="相互竞争的协议簇"></p>
<hr>
<h3 id="TCP-IP-协议示例"><a href="#TCP-IP-协议示例" class="headerlink" title="TCP/IP 协议示例"></a>TCP/IP 协议示例</h3><ul>
<li><p>TCP/IP 协议可用于应用层、传输层和互联网层。网络接入层中没有 TCP/IP 协议。最常见的网络接入层LAN协议是以太网和WLAN(无线LAN)协议。网络接入层协议负责通过物理介质传输 IP 数据包。</p>
</li>
<li><p>TCP/IP 是当今网络和互联网使用的协议簇。</p>
</li>
<li><p>TCP/IP 为供应商和制造商提供了两个重要的方面:开放标准协议簇和基于标准的协议簇。</p>
</li>
<li><p>TCP/IP 协议簇通信过程支持这样的过程：web 服务器封装 web 页面并将其发送到客户端，以及客户端解封 web 页面以便在 web 浏览器中显示。</p>
</li>
</ul>
<blockquote>
<p>图中显示了用于在主机的 web 浏览器和 web 服务器之间发送数据包的三种 TCP/IP 协议的示例。HTTP、TCP 和 IP 是所使用的 TCP/IP 协议。在网络接入层，示例中使用了以太网。然而，这里也可以使用一种无线标准，如WLAN或蜂窝服务。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_3_3.png" alt="示例"></p>
<h3 id="TCP-IP-协议簇"><a href="#TCP-IP-协议簇" class="headerlink" title="TCP/IP 协议簇"></a>TCP/IP 协议簇</h3><p>如今，TCP/IP 协议簇包含许多协议，并且不断发展以支持新服务。图中显示一些较为常用的协议。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_4.png" alt="TCP/IP 协议簇"></p>
<hr>
<h3 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h3><blockquote>
<p>域名系统</p>
</blockquote>
<ul>
<li><strong>DNS</strong> - 域名系统。将域名转换为 IP 地址。</li>
</ul>
<blockquote>
<p>主机配置</p>
</blockquote>
<ul>
<li><p><strong>DHCPv4</strong> - IPv4动态主机配置协议。DHCPv4 服务器在启动时动态地将 IPv4 编址信息分配给 DHCPv4 客户端，并允许在不再需要时重新使用这些地址。</p>
</li>
<li><p><strong>DHCPv6</strong> - IPv6动态主机配置协议。DHCPv6类似于DHCPv4。DHCPv6服务器在启动时动态地将IPv6编址信息分配给DHCPv6客户端。</p>
</li>
<li><p><strong>SLAAC</strong> - 无状态地址自动配置。一种允许设备在不使用DHCPv6服务器的情况下获得其IPv6编址信息的方法。</p>
</li>
</ul>
<blockquote>
<p>邮件</p>
</blockquote>
<ul>
<li><p><strong>SMTP</strong> - 简单邮件传输协议。使客户端能够将邮件发送到邮件服务器，并使服务器能够将邮件发送到其他服务器。</p>
</li>
<li><p><strong>POP3</strong> - 邮局协议第 3 版。使客户端能够从邮件服务器检索电子邮件并将电子邮件下载到客户端本地邮件应用程序。</p>
</li>
<li><p><strong>IMAP</strong> - 互联网消息访问协议。使客户端能够访问存储在邮件服务器上的电子邮件，并在服务器上维护电子邮件。</p>
</li>
</ul>
<blockquote>
<p>文件传输</p>
</blockquote>
<ul>
<li><p><strong>FTP</strong> - 文件传输协议。它设置规则，使得一台主机上的用户能够通过网络访问另一台主机或向其传输文件。FTP是一种可靠、面向连接且进行确认的文件传输协议。</p>
</li>
<li><p><strong>SFTP</strong> - SSH文件传输协议。作为安全外壳 (SSH)协议的扩展，SFTP可用于建立安全的文件传输会话，在该会话中对文件传输进行加密。SSH 是一种安全远程登录的方法，通常用于访问设备的命令行。</p>
</li>
<li><p><strong>TFTP</strong> - 简单文件传输协议。这是一个简单的，无连接的文件传输协议，使用尽最大努力、无需确认的文件传输方式。它使用的开销比FTP少。</p>
</li>
</ul>
<blockquote>
<p>Web和Web服务</p>
</blockquote>
<ul>
<li><p><strong>HTTP</strong> - 超文本传输协议。这是有关在万维网上交换文本、图形图像、音频、视频以及其他多媒体文件的一组规则集。</p>
</li>
<li><p><strong>HTTPS</strong> - 安全HTTP。这是一种安全的HTTP形式，它对在万维网上交换的数据进行加密。</p>
</li>
<li><p><strong>REST</strong> - 具象状态传输协议。它使用应用程序编程接口 (API) 和 HTTP 请求创建 Web 应用程序的 Web 服务。</p>
</li>
</ul>
<hr>
<h3 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h3><blockquote>
<p>面向连接</p>
</blockquote>
<ul>
<li><strong>TCP</strong> - 传输控制协议。它使运行在不同主机上的进程之间能够进行可靠的通信，并提供可靠的、需要确认的传输，以确保传输成功。</li>
</ul>
<blockquote>
<p>无连接</p>
</blockquote>
<ul>
<li><strong>UDP</strong> - 用户数据报协议。它允许一台主机上运行的进程向另一台主机上运行的进程发送数据包。但是，UDP不会确认数据报传输是否成功。</li>
</ul>
<hr>
<h3 id="互联网层"><a href="#互联网层" class="headerlink" title="互联网层"></a>互联网层</h3><blockquote>
<p>Internet 协议</p>
</blockquote>
<ul>
<li><p><strong>IPv4</strong> - 互联网协议第 4 版。它接收来自传输层的消息段，将消息打包成数据包，并为通过网络进行端到端传递的数据包进行地址分配。IPv4 使用 32 位地址。</p>
</li>
<li><p><strong>IPv6</strong> - 互联网协议第 6 版。与 IPv4 类似，但使用 128 位地址。</p>
</li>
<li><p><strong>NAT</strong> - 网络地址转换。将私有网络 IPv4 地址转换为全球唯一的公有 IPv4 地址。</p>
</li>
</ul>
<blockquote>
<p>消息传送</p>
</blockquote>
<ul>
<li><p><strong>ICMPv4</strong> - IPv4 互联网控制消息协议。目的主机针对数据包传输中出现的错误，向源主机提供反馈。</p>
</li>
<li><p><strong>ICMPv6</strong> - 用于 IPv6 的ICMP。与 ICMPv4 类似的功能，但用于 IPv6 数据包。</p>
</li>
<li><p><strong>ICMPv6 ND</strong> - IPv6 邻居发现。包括用于地址解析和重复地址检测的四个协议消息。</p>
</li>
</ul>
<blockquote>
<p>路由协议</p>
</blockquote>
<ul>
<li><p><strong>OSPF</strong> - 开放最短路径优先协议。它使用基于区域的分层设计的链路状态路由协议。OSPF是一种开放式标准内部路由协议。</p>
</li>
<li><p><strong>EIGRP</strong> — 增强型内部网关路由协议这是一种思科开发的开放标准路由协议，使用基于带宽、延迟、负载和可靠性的复合度量。</p>
</li>
<li><p><strong>BGP</strong> - 边界网关协议。这是一种开放标准的外部网关路由协议，用于互联网服务提供商(ISP)之间。BGP 还通常用于 ISP 与其大型私有客户端之间来交换路由信息。</p>
</li>
</ul>
<h3 id="网络接入层"><a href="#网络接入层" class="headerlink" title="网络接入层"></a>网络接入层</h3><blockquote>
<p>地址解析</p>
</blockquote>
<ul>
<li><strong>ARP</strong> - 地址解析协议。提供 IPv4 地址与硬件地址之间的动态地址映射。</li>
</ul>
<blockquote>
<p>数据链路协议</p>
</blockquote>
<ul>
<li><strong>以太网</strong> - 为网络接入层的布线和信令标准定义规则。</li>
<li><strong>WLAN</strong> - 无线局域网。定义 2.4 GHz 和 5 GHz 无线电频率的无线信号规则。</li>
</ul>
<hr>
<h3 id="开放标准"><a href="#开放标准" class="headerlink" title="开放标准"></a>开放标准</h3><p>开放标准<code>鼓励互操作性、竞争和创新</code>。</p>
<p>关于这一点有个不错的例子，您需要购买一个家用无线路由器。有出自众多供应商的许多不同路由器供您选择。这些路由器都融合了标准协议，例如 IPv4、IPv6、DHCP、SLAAC、以太网和 802.11无线局域网。这些开放标准还能够使运行 Apple 的 OS X 操作系统的客户端从运行 Linux 操作系统的 Web 服务器上下载网页。这是因为两种操作系统都实施开放标准协议，例如 TCP/IP 协议簇中的协议。</p>
<p><code>标准组织通常是中立于厂商的非营利性组织</code>。它的建立是为了发展和推广开放标准的概念。这些组织对维护一个开放的互联网，允许自由访问规范和协议并允许所有供应商实施这些规范和协议起着至关重要的作用。</p>
<p><code>标准组织可能会独立起草规则集，也可能在其他情况下将某个专有协议作为一个标准的基础</code>。如果要使用专有协议，通常就会涉及到创建了该协议的供应商。</p>
<hr>
<h3 id="互联网标准组织"><a href="#互联网标准组织" class="headerlink" title="互联网标准组织"></a>互联网标准组织</h3><p>各个组织在互联网和 TCP/IP 协议标准的推广和建立方面具有不同的责任。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_5_1.png" alt="互联网标准组织"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_5_2.png" alt="参与互联网开发和支持的标准组织"></p>
<hr>
<h3 id="电子和通信标准组织"><a href="#电子和通信标准组织" class="headerlink" title="电子和通信标准组织"></a>电子和通信标准组织</h3><ul>
<li><p><strong>电气电子工程师协会</strong>（IEEE，读作“I-triple-E”）– 是为致力于推动诸多行业领域的技术创新和标准创建的工程师设立的组织，涉及的领域包括电力与能源、医疗保健、电信和网络。重要的IEEE网络标准包括802.3以太网和802.11无线局域网标准。可在互联网上搜索其他IEEE网络标准。</p>
</li>
<li><p><strong>美国电子工业协会</strong>（EIA）- 该组织因其在用于安装网络设备的电线、连接器和19英寸机架方面的标准而知名。</p>
</li>
<li><p><strong>电信工业协会</strong>（TIA） - 该组织负责开发各种领域的通信标准，包括无线电设备、手机信号塔、IP 语音（VoIP）设备和卫星通信等。</p>
</li>
<li><p><strong>国际电信联盟电信标准局</strong>（ITU-T）- 是最大最早的通信标准组织之一。ITU-T定义视频压缩、Internet协议电视（IPTV）和宽带通信的标准，例如数字用户线路（DSL）。</p>
</li>
</ul>
<hr>
<h3 id="参考模型"><a href="#参考模型" class="headerlink" title="参考模型"></a>参考模型</h3><p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_6.png" alt="开放式系统互联(OSI)参考模型 TCP/IP 参考模型"></p>
<p><code>OSI 模型有七层</code>：</p>
<blockquote>
<p>OSI 参考模型详细罗列了每一层可以实现的功能和服务。 这种类型的模型通过描述特定层必须完成什么但不规定如何完成来保持各类网络协议和服务中的一致性。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">Num.</th>
<th align="center">Layer.</th>
<th align="center">数据单元</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">7</td>
<td align="center">应用层</td>
<td align="center">APDU</td>
<td align="left">应用层包含用于进程间通信的协议。</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">表示层</td>
<td align="center">PPDU</td>
<td align="left">表示层用常用方式表示数据在应用层服务之间的传输。</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">会话层</td>
<td align="center">SPDU</td>
<td align="left">会话层向表示层提供服务，组织对话并管理数据交换。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">传输层</td>
<td align="center">TPDU</td>
<td align="left">传输层定义服务以对数据进行分段，传输和重组，以进行终端设备之间的单独通信。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">网络层</td>
<td align="center">报文</td>
<td align="left">网络层为所标识的终端设备之间通过网络交换独立的数据的片段提供服务。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">数据链路层</td>
<td align="center">帧</td>
<td align="left">数据链路层协议描述了设备之间通过公共介质交换数据帧的方法。</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">物理层</td>
<td align="center">比特</td>
<td align="left">物理层协议描述了机械的、电气的、功能的和程序化的方法，以激活，维护和解除物理连接， 实现与网络设备之间的位设备。</td>
</tr>
</tbody></table>
<hr>
<p><code>TCP/IP 模型包括四层</code>：</p>
<blockquote>
<p>用于网际通信的 TCP/IP 协议模型建立于二十世纪七十年代早期，<code>有时称为互联网模型</code>。 这种类型的模型与特定的协议簇结构紧密配合。TCP/IP 模型描述了 TCP/IP 协议簇中每个协议层实现的功能，因此属于协议模型。TCP/IP 也用作参考模型。下表显示了TCP/IP模型每一层的详细信息。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">Num.</th>
<th align="center">Layer.</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">4</td>
<td align="center">应用层</td>
<td align="left">向用户提供数据，以及编码和对话控制。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">传输层</td>
<td align="left">支持各种设备之间通过不同网络通信。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">互联网层</td>
<td align="left">确定通过网络的最佳路径。</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">网络接入层</td>
<td align="left">控制组成网络的硬件设备和介质。</td>
</tr>
</tbody></table>
<hr>
<h3 id="OSI-模型与-TCP-IP-模型的比较"><a href="#OSI-模型与-TCP-IP-模型的比较" class="headerlink" title="OSI 模型与 TCP/IP 模型的比较"></a>OSI 模型与 TCP/IP 模型的比较</h3><blockquote>
<p>还可以根据 OSI 参考模型描述构成 TCP/IP 协议簇的协议。在 OSI 模型中，TCP/IP 模型的网络接入层和应用层被进一步划分，用于描述这些协议层需要实现的不同功能。</p>
</blockquote>
<p>TCP/IP 协议簇在网络接入层并没有指定通过物理介质传输时使用的协议，而只是描述了从互联网层到物理网络协议的传递。而 OSI 模型第 1 层和第 2 层则论述了接入介质所需的步骤以及通过网络发送数据的物理手段。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_7.png" alt="对比图"></p>
<hr>
<h3 id="数据封装"><a href="#数据封装" class="headerlink" title="数据封装"></a>数据封装</h3><blockquote>
<p>消息分段 -&gt; 排序 -&gt; 封装 -&gt; 解封</p>
</blockquote>
<ul>
<li><p>**<code>消息分段</code>**主要有两个优点：</p>
<ul>
<li>通过从源设备向目的地<code>发送</code>一个个<code>小片段</code>，就可以在网络上交替发送许多不同会话。这称为<code>“多路复用”</code>。</li>
<li>分段可以<code>增强网络通信的效率</code>。如果有部分消息未能传送到目的，则<code>只需重新传输丢失的部分</code>。</li>
</ul>
</li>
<li><p>TCP负责对单独的数据段进行 **<code>排序</code>**。一段数据在任意协议层的表示形式称为协议数据单元（PDU）。</p>
</li>
<li><p>在 **<code>封装</code>**过程中，后续的每一层都根据使用的协议封装其从上一层接收的PDU。在网络中发送消息时，封装过程自上而下工作。</p>
</li>
<li><p>接收主机上的过程称为“解封”。**<code>解封</code>**是接收设备用来删除一个或多个协议报头的过程。数据在朝着最终用户应用程序沿协议栈向上移动的过程中被解封。</p>
</li>
</ul>
<hr>
<h3 id="数据访问"><a href="#数据访问" class="headerlink" title="数据访问"></a>数据访问</h3><blockquote>
<p>网络层（第3层）和数据链路层（第2层）负责将数据从源设备传输到目的设备。两层中的协议都包含源地址和目的地址，但它们的地址具有不同的用途。</p>
</blockquote>
<ul>
<li><p><strong>网络层源地址和目的地址</strong> - 负责将IP数据包从始源设备传输到可能处于同一网络或远程网络中的最终目的设备。</p>
</li>
<li><p><strong>数据链路层源地址和目的地址</strong> – 负责将数据链路层帧从一个网络接口卡（NIC）传输到同一网络上的另一个NIC。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_8.png" alt="地址的不同用途"></p>
<hr>
<h3 id="网络层（第3层）逻辑地址"><a href="#网络层（第3层）逻辑地址" class="headerlink" title="网络层（第3层）逻辑地址"></a>网络层（第3层）逻辑地址</h3><blockquote>
<p>IP 地址是网络层（或第 3 层）逻辑地址，用于将 IP 数据包从原始源设备传输到最终目的设备，如图所示。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_9.png" alt="IP数据包传输过程"></p>
<p><code>IP 数据包</code>包含两个IP地址：</p>
<ul>
<li><p><strong>源IP地址</strong> - <code>发送</code>设备（数据包的<code>始源设备</code>）的IP地址。</p>
</li>
<li><p><strong>目的IP地址</strong> - <code>接收</code>设备（数据包的<code>最终目的设备</code>）的IP地址。</p>
</li>
</ul>
<p>IP地址表示始源IP地址和最终目的IP地址。<code>无论源和目的地在同一IP网络上还是在不同的IP网络上，都是如此</code>。</p>
<hr>
<p><code>IP 地址</code>包含两部分：</p>
<ul>
<li><p><strong>网络部分（IPv4）或前缀（IPv6）</strong> – 地址<code>最左边的部分</code>，<code>表示</code>IP地址是哪个<code>网络</code>的<code>成员</code>。同一网络中所有设备的地址都有相同的网络部分。</p>
</li>
<li><p><strong>主机部分（IPv4）或接口ID（IPv6）</strong> - 地址的<code>其余部分</code>，用于<code>识别</code>网络上的<code>特定设备</code>。这部分对于网络中的每个设备或接口都是唯一的。</p>
</li>
</ul>
<hr>
<h3 id="同一网络（局域网）中的设备"><a href="#同一网络（局域网）中的设备" class="headerlink" title="同一网络（局域网）中的设备"></a>同一网络（局域网）中的设备</h3><p>在本示例中，客户端计算机 PC1 与<strong>同一 IP 网络</strong>中的 FTP 服务器进行通信。</p>
<ul>
<li><p><strong>源IPv4地址</strong> - 发送设备的IPv4地址，即客户端计算机PC1：192.168.1.110。</p>
</li>
<li><p><strong>目的IPv4地址</strong> - 接收设备的IPv4地址，即服务器，Web服务器：172.16.1.99。</p>
</li>
</ul>
<p>注意图中，源IPv4地址的网络部分和目的IPv4地址的网络部分是相同的，因此，源和目的地在同一个网络上。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_10.png" alt="同一网络"></p>
<hr>
<h3 id="数据链路层（第2层）地址的作用：相同的-IP-网络（局域网）"><a href="#数据链路层（第2层）地址的作用：相同的-IP-网络（局域网）" class="headerlink" title="数据链路层（第2层）地址的作用：相同的 IP 网络（局域网）"></a>数据链路层（第2层）地址的作用：相同的 IP 网络（局域网）</h3><blockquote>
<p>当IP数据包的发送方和接收方处于 **<code>同一网络</code>**中时，数据链路层帧将直接将其发送到接收设备。在以太网中，数据链路层地址称为以太网介质访问控制（MAC）地址。</p>
</blockquote>
<p><code>MAC 地址</code>是以太网网卡的物理内嵌地址。</p>
<ul>
<li><p><strong>源MAC地址</strong> - 这是发送封装有IP数据包的数据链路帧的设备的数据链路地址，或以太网 MAC 地址。以太网网卡的MAC地址为：AA-AA-AA-AA-AA-AA，以十六进制表示法表示。</p>
</li>
<li><p><strong>目的MAC地址</strong> - 当接收设备与发送设备在同一网络中时，这就是接收设备的数据链路层地址。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_11.png" alt="同一网络"></p>
<hr>
<h3 id="网络层地址的作用"><a href="#网络层地址的作用" class="headerlink" title="网络层地址的作用"></a>网络层地址的作用</h3><blockquote>
<p>当数据包的发送方与接收方位于 **<code>不同网络</code>**时，源 IP 地址和目的 IP 地址将代表位于不同网络的主机。这将由目的主机 IP 地址的网络部分来表明。</p>
</blockquote>
<ul>
<li><p><strong>源IPv4地址</strong> – 发送设备的IPv4地址，即客户端计算机PC1：192.168.1.110。</p>
</li>
<li><p><strong>目的IPv4地址</strong> – 接收设备的IPv4地址，即服务器，Web服务器：172.16.1.99。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_12.png" alt="不同网络"></p>
<hr>
<h3 id="数据链路层地址的作用：不同的IP网络"><a href="#数据链路层地址的作用：不同的IP网络" class="headerlink" title="数据链路层地址的作用：不同的IP网络"></a>数据链路层地址的作用：不同的IP网络</h3><blockquote>
<p>当 IP 数据包的发送方和接收方位于不同网络时，以太网数据链路帧不能直接发送到目的主机，因为在发送方的网络中无法直接到达该主机。必须将以太网帧发送到称为路由器或默认网关的另一设备。在我们的示例中，默认网关是 R1。R1 有一个以太网数据链路地址与 PC1 位于同一网络中。这使 PC1 能够直接到达路由器。</p>
</blockquote>
<ul>
<li><p>源 MAC 地址 - 发送设备 PC1 的以太网 MAC 地址。PC1 以太网接口的 MAC 地址是 AA-AA-AA-AA-AA-AA。</p>
</li>
<li><p>目的 MAC 地址 - 当接收设备（目的 IP 地址）与发送设备位于不同网络时，发送设备使用默认网关或路由器的以太网 MAC 地址。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_13.png" alt="不同网络"></p>
<hr>
<h3 id="数据链路层（第2层）地址"><a href="#数据链路层（第2层）地址" class="headerlink" title="数据链路层（第2层）地址"></a>数据链路层（第2层）地址</h3><p>数据链路层地址的作用是<code>将数据链路层帧从一个网络接口传输到同一网络中的另一个网络接口</code>。</p>
<p>在IP数据包可以通过有线或无线网络<code>发送之前</code>，必须将其<code>封装成数据链路层帧</code>，以便通过物理介质传输。</p>
<blockquote>
<p>当IP数据包从主机到路由器、从路由器到路由器和最终从路由器到主机传输时，沿途中的每个点上都会将IP数据包封装到新的数据链路层帧中。每个数据链路层帧包含发送帧的NIC卡的源数据链路层地址和接收帧的NIC卡的目的数据链路层地址。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_13_1.png" alt="主机到路由器"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_13_2.png" alt="路由器到路由器"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/2_13_3.png" alt="路由器到服务器"></p>
<blockquote>
<p>第2层，数据链路层协议仅用于在同一网络中的NIC之间传输数据包。路由器会将其NIC上收到的第2层信息删除，添加新的数据链路层信息，然后将数据包从通往最终目的地路径的出口NIC上转发出去。</p>
</blockquote>
<p>IP数据包会封装到包含以下数据链路层信息的数据链路层帧中：</p>
<ul>
<li><strong>源数据链路层地址</strong> - 发送数据链路层帧的网卡的物理地址。</li>
<li><strong>目的数据链路层地址</strong> - 接收数据链路层帧的NIC的物理地址。该地址为下一跳路由器，或最终目的设备的地址。</li>
</ul>
<hr>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><ul>
<li>规则</li>
</ul>
<blockquote>
<p>所有通信方法都有三个共同元素：消息源（发送方）、消息目的地（接收方）和信道。发送的消息由称为“协议”的规则管理。协议必须包括：已识别的发送方和接收方、通用语言和语法、传输的速率和时序以及确认或确认要求。常用的计算机协议包括这些要求：消息编码、格式、封装、大小、时序和传输方式。编码是为了便于传输信息，将信息转换为另一种广为接受的形式。解码是编码的逆向过程，用来解释信息。消息格式取决于消息的类型和传输信道。消息时序包括流量控制、响应超时和访问方法。消息传输方式包括单播、组播和广播。</p>
</blockquote>
<ul>
<li>协议</li>
</ul>
<blockquote>
<p>协议由终端设备和中间设备以软件、硬件或两者都有的方式实现。通过计算机网络发送的消息通常需要使用多种协议，每种协议都有自己的功能和格式。每个网络协议都有自己的功能、 格式和通信规则。以太网协议家族包括IP、TCP、HTTP等。安全协议保护数据以提供身份验证、数据完整性和数据加密：SSH、SSL 和 TLS。路由协议使路由器能够交换路由信息，比较路径信息，然后选择到目的网络的最佳路径：OSPF和BGP。用于设备或服务自动检测的协议有：DHCP 和 DNS。计算机和网络设备使用商定的协议，这些协议提供以下功能：编址，可靠性，流量控制，排序，错误检测和应用程序接口。</p>
</blockquote>
<ul>
<li>协议簇</li>
</ul>
<blockquote>
<p>执行某种通信功能所需的一组内在相关协议称为协议簇。协议栈展示了协议簇中的单个协议是如何实施的。自20世纪70年代以来，出现了几种不同的协议簇，有些是由一个标准组织开发的，有些是由不同的供应商开发的。TCP/IP协议可用于应用层、传输层和互联网层。TCP/IP 是当今网络和互联网使用的协议簇。TCP/IP为供应商和制造商提供了两个重要的方面:开放标准协议簇和基于标准的协议簇。TCP/IP协议簇通信过程支持这样的过程：web服务器封装web页面并将其发送到客户端，以及客户端解封web页面以便在web浏览器中显示。</p>
</blockquote>
<ul>
<li>标准组织</li>
</ul>
<blockquote>
<p>开放标准鼓励互操作性、竞争和创新。标准组织通常是中立于厂商的非营利性组织。它的建立是为了发展和推广开放标准的概念。各个组织在互联网标准的推广和建立方面具有不同的责任，包括：ISOC, IAB, IETF, 和IRTF。开发和支持TCP/IP的标准组织包括:：CANN和IANA。电子和通信标准组织包括：IEEE、EIA、TIA和ITU-T。</p>
</blockquote>
<ul>
<li>参考模型</li>
</ul>
<blockquote>
<p>用于描述网络运行的两个参考模型是OSI和TCP/IP。OSI 模型有七层：</p>
</blockquote>
<p>7 - 应用层</p>
<p>6 - 表示层</p>
<p>5 - 会话层</p>
<p>4 - 传输层</p>
<p>3 - 网络层</p>
<p>2 - 数据链路层</p>
<p>1 - 物理层</p>
<blockquote>
<p>TCP/IP 模型包括四层：</p>
</blockquote>
<p>4 - 应用层</p>
<p>3 - 传输层</p>
<p>2 - 互联网层</p>
<p>1 - 网络接入层</p>
<ul>
<li>数据封装</li>
</ul>
<blockquote>
<p>消息分段主要有两个优点：</p>
</blockquote>
<ol>
<li>通过从源设备向目的地发送一个个小片段，就可以在网络上交替发送许多不同会话。这称为“多路复用”。</li>
<li>分段可以增强网络通信的效率。如果有部分消息未能传送到目的，则只需重新传输丢失的部分。</li>
</ol>
<blockquote>
<p>TCP 负责对单独的数据段进行排序。一段数据在任意协议层的表示形式称为协议数据单元 (PDU)。在封装过程中，后续的每一层都根据使用的协议封装其从上一层接收的 PDU。在网络中发送消息时，封装过程自上而下工作。接收主机上的过程与之相反，称为“解封”。解封是接收设备用来删除一个或多个协议报头的过程。数据在朝着最终用户应用程序沿协议栈向上移动的过程中被解封。</p>
</blockquote>
<ul>
<li>数据访问</li>
</ul>
<p>网络层和数据链路层负责将数据从源设备传输到目的设备。两层中的协议都包含源地址和目的地址，但它们的地址具有不同的用途。</p>
<ol>
<li><strong>网络层源地址和目的地址</strong> - 负责将 IP 数据包从始源设备传输到可能处于同一网络或远程网络中的最终目的设备。</li>
<li><strong>数据链路层源地址和目的地址</strong> – 负责将数据链路层帧从一个网络接口卡 (NIC) 传输到同一网络上的另一个 NIC。</li>
</ol>
<blockquote>
<p>IP 地址表示始源IP地址和最终目的IP地址。一个IP地址包含两部分：网络部分(IPv4)或前缀(IPv6)和主机部分(IPv4)或接口ID (IPv6)。当 IP 数据包的发送方和接收方处于同一网络中时，数据链路层帧将直接将其发送到接收设备。在以太网中，数据链路层地址称为以太网介质访问控制（MAC）地址。当数据包的发送方与接收方位于不同网络时，源 IP 地址和目的 IP 地址将代表位于不同网络的主机。必须将以太网帧发送到称为路由器或默认网关的另一设备。</p>
</blockquote>
<hr>
<h2 id="物理层（第-1-层）"><a href="#物理层（第-1-层）" class="headerlink" title="物理层（第 1 层）"></a><a href="https://phoenixnest.github.io/School-Computer-Network-Technology-1-Physical-Layer/">物理层（第 1 层）</a></h2><hr>
<h2 id="数据链路层（第-2-层）"><a href="#数据链路层（第-2-层）" class="headerlink" title="数据链路层（第 2 层）"></a><a href="https://phoenixnest.github.io/School-Computer-Network-Technology-2-Data-Link-Layer/">数据链路层（第 2 层）</a></h2><hr>
<h2 id="以太网交换"><a href="#以太网交换" class="headerlink" title="以太网交换"></a>以太网交换</h2><h3 id="以太网封装"><a href="#以太网封装" class="headerlink" title="以太网封装"></a>以太网封装</h3><blockquote>
<p><code>以太网是如今广泛使用的两种局域网技术之一，另一种是无线局域网（WLAN）</code>。它使用有线通信，包括双绞线、光纤链路和同轴电缆。</p>
</blockquote>
<p><code>以太网在数据链路层和物理层运行</code>，是 IEEE 802.2 和 802.3 标准中定义的一系列网络技术。以太网支持的数据带宽为：</p>
<ul>
<li><p><strong>10 Mbps</strong></p>
</li>
<li><p><strong>100 Mbps</strong></p>
</li>
<li><p><strong>1000 Mbps (1 Gbps)</strong></p>
</li>
<li><p><strong>10,000 Mbps (10 Gbps)</strong></p>
</li>
<li><p><strong>40,000 Mbps (40 Gbps)</strong></p>
</li>
<li><p><strong>100,000 Mbps (100 Gbps)</strong></p>
</li>
</ul>
<p>如图所示，<code>以太网标准同时定义第 2 层协议和第 1 层技术</code>。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_1.png" alt="以太网和 OSI 模型"></p>
<hr>
<h3 id="数据链路子层"><a href="#数据链路子层" class="headerlink" title="数据链路子层"></a>数据链路子层</h3><blockquote>
<p>IEEE 802 LAN/MAN 协议，包括以太网，使用以下两个单独的数据链路层子层进行操作。它们是逻辑链路控制（LLC）和介质访问控制（MAC），如图所示。</p>
</blockquote>
<p>回想一下，LLC 和 MAC 在数据链接层中具有以下角色：</p>
<ul>
<li><p><strong>LLC 子层</strong> - 此 IEEE 802.2 子层<code>在上层的网络软件与下层的设备硬件之间进行通信</code>。它放入帧中的信息用于确定帧所使用的网络层协议。此信息允许多个第 3 层协议（如 IPv4 和 IPv6）使用相同的网络接口和介质。</p>
</li>
<li><p><strong>MAC 子层</strong> -此子层（例如 IEEE 802.3、802.11 或 802.15）<code>在硬件中实现</code>，负责数据封装和介质访问控制。它<code>提供数据链路层寻址，并与各种物理层技术集成</code>。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_2.png" alt="数据链路子层"></p>
<hr>
<h3 id="MAC-子层"><a href="#MAC-子层" class="headerlink" title="MAC 子层"></a>MAC 子层</h3><blockquote>
<p>MAC 子层负责数据封装和访问介质。</p>
</blockquote>
<p>数据封装</p>
<p>IEEE 802.3 数据封装包括以下内容：</p>
<ul>
<li><p><strong>以太网帧</strong> - 这是以太网帧的内部结构。</p>
</li>
<li><p><strong>以太网寻址</strong> - 以太网帧中包含源和目的MAC 地址，用于将该以太网帧从以太网网卡传送到同一LAN上的以太网网卡。</p>
</li>
<li><p><strong>以太网错误检测</strong> - 以太网帧中包含用于错误检测的帧校验序列 (FCS) 帧尾。<br>访问介质</p>
</li>
</ul>
<p>如图所示，IEEE 802.3 MAC 子层包含了在各种介质(包括铜和光纤)上不同类型的以太网通信标准的规格。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_3.png" alt="MAC 子层"></p>
<blockquote>
<p>回想一下，使用总线拓扑或集线器的传统以太网是一种共享的半双工介质。<strong>半双工介质上的以太网使用争用访问方法，即载波侦听多路访问/冲突检测 (CSMA/CD)，这确保一次只有一个设备进行传输。</strong>CSMA/CD 允许多个设备共享相同的半双工介质，如果多台设备同时传输，则会发生冲突。它还提供了一种回退重传算法。</p>
</blockquote>
<p><code>如今的以太网 LANs 使用的交换机是全双工的</code>。在全双工模式下运行的以太网交换机不需要通过 CSMA/CD 进行访问控制。</p>
<hr>
<h3 id="以太网帧字段"><a href="#以太网帧字段" class="headerlink" title="以太网帧字段"></a>以太网帧字段</h3><p>以太网帧大小的最小值为 64 个字节，最大值为 1518 个字节。这包括从“目的 MAC 地址”字段到“帧校验序列 (FCS)”字段的所有字节。在描述帧的大小时，不包含“前导码”字段。</p>
<p>任何长度小于 64 个字节的帧都被接收站点视为“冲突碎片”或“残帧”而自动丢弃。超过 1500 个字节的数据帧被视为“巨帧”或“小型巨型帧”。</p>
<p>如果发送的帧小于最小值或者大于最大值，接收设备将会丢弃该帧。帧之所以被丢弃，可能是因为冲突或其他多余信号。它们被视为无效。大多数快速以太网和千兆以太网交换机和网卡通常都支持巨帧。</p>
<p>这张图显示了以太网帧中的每个字段。有关每个字段功能的详细信息，请参阅表格。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_4.png" alt="以太网帧字段"></p>
<hr>
<blockquote>
<p>以太网帧字段细节</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">字段</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>前导码和帧首定界符字段</strong></td>
<td align="left"><code>前导码</code>（<strong>7 字节</strong>）和<code>帧首定界符</code>（SFD），也称为 <code>帧首</code>（<strong>1 字节</strong>），该字段<code>用于发送设备与接收设备之间的同步</code>。帧开头的<strong>8 个字节</strong> 用于引起接收节点的注意。**<code>基本上，前几个字节的作用是告诉接收方准备接收新帧。</code>**</td>
</tr>
<tr>
<td align="left"><strong>目的 MAC 地址字段</strong></td>
<td align="left">该 <strong>6 字节</strong>字段是<code>预期接收方的标识符</code>。读者应该还记得， <code>此地址被第2层用来协助设备 确定帧是否发送到目的地</code>。帧中的地址将会与设备中的 MAC 地址进行比对。如果匹配， 设备就接受该帧。可以是单播、组播或广播 地址。</td>
</tr>
<tr>
<td align="left"><strong>源 MAC 地址字段</strong></td>
<td align="left">该 <strong>6 字节</strong>字段<code>标识发出帧的网卡 或接口</code>。</td>
</tr>
<tr>
<td align="left"><strong>类型/长度</strong></td>
<td align="left">该字段包含<strong>2 字节</strong>，<code>标识封装于以太网帧中的上层协议</code>。常见值为十六进制，<code>0x800 用于 IPv4</code>， <code>0x86DD 用于 IPv6</code>，<code>0x806 用于 ARP</code>。<strong>注意：您也可能会看到此字段称为 EtherType、类型或长度。</strong></td>
</tr>
<tr>
<td align="left"><strong>数据字段</strong></td>
<td align="left">该字段（<strong>46-1500 字节</strong>）包含来自较高层的封装数据，<code>一般是第3层PDU或更常见的IPv4 数据包</code>。**<code>所有帧至少必须有 64 个字节。如果封装的是小数据包， 则使用填充位将帧 增大到最小值</code>**。</td>
</tr>
<tr>
<td align="left"><strong>帧校验序列字段</strong></td>
<td align="left">“帧校验序列 (FCS)”字段（<strong>4 个字节</strong>）用于检测帧中 的错误。它使用循环冗余校验（CRC）。<code>发送设备</code>在帧的 FCS 字段中包含 CRC 的结果。<code>接收设备</code>接收帧并生成 CRC 以查找 错误。**<code>如果计算匹配，就不会发生错误</code>**。 **<code>计算不匹配则表明数据已经改变。因此， 帧会被丢弃</code>**。数据的变化可能是由于代表比特位的电信号受到干扰所致。</td>
</tr>
</tbody></table>
<hr>
<h3 id="MAC-地址和十六进制"><a href="#MAC-地址和十六进制" class="headerlink" title="MAC 地址和十六进制"></a>MAC 地址和十六进制</h3><p>在网络中，<code>IPv4 地址使用十进制以10为基数的数制系统和二进制以2为基数的数制系统来表示</code>。<code>IPv6 地址和以太网地址使用十六进制以16为基数的数制系统表示</code>。</p>
<blockquote>
<p>十六进制是以 16 为基数的数制系统，使用数字 0 到 9 和字母 A 到 F。</p>
<p>以太网 MAC 地址由48位二进制值组成。十六进制用于标识以太网地址，因为单个十六进制数字表示四个二进制位。因此，一个48位以太网MAC地址只用12个十六进制值就可以表示。</p>
</blockquote>
<p>该图显示了 0000 (0) ~ 1111 (15) 这些二进制数的十进制和十六进制值。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_5_1.png" alt="MAC 地址和十六进制"></p>
<hr>
<blockquote>
<p>8 位（1 字节）是一种常用的二进制组，从 00000000 到 11111111 的二进制可表示为从 00 到 FF 的十六进制。</p>
</blockquote>
<p>如下图所示。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_5_2.png" alt="选定的十进制、二进制和十六进制等值数字"></p>
<blockquote>
<p>当使用十六进制时，前导零始终都会显示，以完整的 8 位表示。例如，在表中，二进制值 0000 1010 以十六进制显示为 0A。</p>
</blockquote>
<p><code>十六进制通常以0x为前导的值</code>（例如 0x73）表示，以区分文档中的十进制值和十六进制值。</p>
<p><code>十六进制也可以用以16为下标的值或十六进制数字后跟 H</code>（例如 73H）来表示。</p>
<blockquote>
<p>如果需要在十进制值和十六进制值之间进行转换，先将十进制或十六进制值转换为二进制值，然后将二进制值转换为适当的十进制或十六进制值。</p>
</blockquote>
<hr>
<h3 id="以太网-MAC-地址"><a href="#以太网-MAC-地址" class="headerlink" title="以太网 MAC 地址"></a>以太网 MAC 地址</h3><p><code>在以太网中，每台网络设备都连接到同一个共享介质</code>。<code>MAC 地址用于标识本地网段上的物理源和目的设备</code>。MAC 编址为 OSI 模型的数据链路层提供了设备识别方法。</p>
<blockquote>
<p>以太网 MAC 地址是使用 <strong>12</strong> 个<strong>十六进制数字</strong>表示的 <strong>48</strong> 位地址，如图所示。<strong>因为一个字节等于 8 位，我们也可以说 一个MAC 地址长度为 6 个字节</strong>。</p>
</blockquote>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_5_3.png">

<hr>
<p><code>所有 MAC 地址对于以太网设备或以太网接口必须是唯一的</code>。为了确保这一点，所有销售以太网设备的供应商必须向 IEEE 注册才能获得唯一的 6个十六进制（即 24 位或 3 字节）代码，称为组织唯一标识符 (OUI)。</p>
<p>当供应商为设备或以太网接口分配 MAC 地址时，供应商必须执行以下操作：</p>
<ul>
<li><p>使用其分配的 OUI 作为前 6 个十六进制数字。</p>
</li>
<li><p>为后 6 个十六进制数字分配唯一值。</p>
</li>
</ul>
<p>因此，以太网 MAC 地址由6个十六进制供应商 OUI 代码和6个十六进制供应商分配的值组成，如图所示。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_5_4.png">

<p>例如，假设思科需要为新设备分配唯一的 MAC 地址。IEEE 已经给思科分配了一个OUI 00-60-2F. 然后思科将唯一的供应商代码配置给设备，如 3A-07-BC。因此，该设备的以太网 MAC 地址将是 00-60-2F-3A-07-BC.</p>
<blockquote>
<p>供应商有责任确保其设备不被分配相同的 MAC 地址。但是，由于制造过程中出现的错误、某些虚拟机部署方式中的错误或使用多种软件工具之一进行的修改，可能存在重复的 MAC 地址。若出现以上任一情况，必须在新网卡或软件中修改 MAC 地址。</p>
</blockquote>
<hr>
<h3 id="帧处理"><a href="#帧处理" class="headerlink" title="帧处理"></a>帧处理</h3><p><code>MAC 地址通常称为烧录地址（BIA）</code>，因为传统上该地址被烧录到网卡的只读存储器（ROM）中。这意味着该地址会永久编码到 ROM 芯片中。</p>
<blockquote>
<p>注意: 在现代 PC 操作系统和网卡中，可以在软件中更改MAC 地址。当试图访问基于 BIA 进行过滤的网络时，这一点非常有用。因此，根据 MAC 地址来过滤或控制流量就不再安全了。</p>
</blockquote>
<p>当计算机启动时，网卡将 MAC 地址从 ROM 复制到 RAM 中。设备在向以太网络转发消息时，以太网报头包含这些：</p>
<ul>
<li><p><strong>源 MAC 地址</strong> – 这是源设备网卡的 MAC 地址。</p>
</li>
<li><p><strong>目的 MAC 地址</strong> -这是目标设备网卡的 MAC 地址。</p>
</li>
</ul>
<hr>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_5_5.png" alt="H1向H3发送以太网帧，当帧到达中继器时将转发至H2、H3、H4，转发结束后由各终端进行判断，若为帧的目的接收设备，则进行接受，反之终端不予理会。"></p>
<blockquote>
<p>收到以太网帧时，网卡会查看帧中的目的 MAC 地址是否与设备 RAM 中存储的物理 MAC 地址匹配。如果不匹配，设备就会丢弃帧。如果与帧中的目的 MAC 匹配，则网卡会将帧向上传送到 OSI 层进行解封处理。</p>
<p>注意:如果目的 MAC 地址是主机为其成员的广播或组播组时，以太网网卡也会接收帧。</p>
</blockquote>
<p><code>任何</code>作为以太网帧的源或目的设备都有一个以太网网卡，因此也有一个MAC地址。这些设备包括工作站、服务器、打印机、移动设备和路由器。</p>
<hr>
<h3 id="单播-MAC-地址"><a href="#单播-MAC-地址" class="headerlink" title="单播 MAC 地址"></a>单播 MAC 地址</h3><p>在以太网中，第 2 层单播、组播和广播通信会使用不同的 MAC 地址。</p>
<p>单播 MAC 地址是帧从一台发送设备去往一台目的设备时使用的唯一地址。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_5_6.png" alt="IPv4 地址为 192.168.1.5 的主机（源）向 IPv4 单播地址为 192.168.1.200 的服务器请求网页，目的 MAC 地址和目的 IP 地址均为单播。"></p>
<blockquote>
<p>要传送和接收单播数据包，目的 IP 地址必须包含于 IP 包报头中。相应的目的 MAC 地址也必须出现于以太网帧报头中。只有 IP 地址和 MAC 地址相结合才能将数据传送到特定的目的主机。</p>
</blockquote>
<blockquote>
<p>源主机用来确定目的IPv4地址所对应的目的 MAC 地址的流程称为地址解析协议 (ARP)。源主机用来确定目的IPv6地址所对应的目的 MAC 地址的流程称为邻居发现 (ND)。</p>
</blockquote>
<blockquote>
<p><strong>注意: 源 MAC 地址必须始终为单播地址</strong>。</p>
</blockquote>
<hr>
<h3 id="广播-MAC-地址"><a href="#广播-MAC-地址" class="headerlink" title="广播 MAC 地址"></a>广播 MAC 地址</h3><p>以太网广播帧由以太网LAN上的每个设备接收和处理。以太网广播的功能如下：</p>
<ul>
<li><p>它有一个十六进制（在二进制中是 48 个 1）FF-FF-FF-FF-FF-FF的目的 MAC 地址。</p>
</li>
<li><p>它向除输入端口以外的所有以太网交换机端口泛洪。</p>
</li>
<li><p>路由器不会转发该帧。</p>
</li>
</ul>
<blockquote>
<p>如果封装的数据是IPv4广播包，这意味着该数据包包含一个目的IPv4地址，该地址的主机部分全部为1。这种地址值表示本地网络（广播域）中的所有主机都将接收和处理该数据包。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_5_7.png" alt="源主机向其网络中的所有设备发送 IPv4 广播数据包。IPv4 目的地址为广播地址 192.168.1.255。如果 IPv4 广播数据包被封装在以太网帧内，则目的 MAC 地址为十六进制（在二进制中是 48 个 1）的 FF-FF-FF-FF-FF-FF 广播 MAC 地址。"></p>
<p>IPv4 的 DHCP 是使用以太网和 IPv4 广播地址的一个协议示例。</p>
<blockquote>
<p>但是，<strong>并非所有以太网广播都带有 IPv4 广播数据包</strong>。例如，ARP 请求不使用 IPv4，但 ARP 消息却作为以太网广播发送。</p>
</blockquote>
<hr>
<h3 id="组播-MAC-地址"><a href="#组播-MAC-地址" class="headerlink" title="组播 MAC 地址"></a>组播 MAC 地址</h3><p>以太网组播帧由属于同一组多播组的以太网LAN上的一组设备接收和处理。以太网组播的功能如下：</p>
<ul>
<li><p><strong>当封装数据为IPv4组播包时，目的 MAC 地址为 01-00-5E；当封装数据为 IPv6 组播包时，目的 MAC 地址为 33-33。</strong></p>
</li>
<li><p><strong>当封装的数据不是IP时，还有其他预留的组播目的 MAC 地址，如生成树协议（STP）和链路层发现协议(LLDP)。</strong></p>
</li>
<li><p><strong>除非交换机被配置为用于组播窥探，否则它将向除传入端口之外的所有以太网交换机端口泛洪。</strong></p>
</li>
<li><p><strong>它不会由路由器转发，除非路由器配置为路由组播数据包。</strong></p>
</li>
</ul>
<blockquote>
<p>如果封装的数据是一个 IP 组播包，则属于组播组的设备都分配有该组播组 IP 地址。IPv4 组播地址的范围为 224.0.0.0 到 239.255.255.255。IPv6 组播地址的范围以 ff00::/8 开头。由于组播地址代表一组地址（有时称为主机组），因此只能用作数据包的目的地址。源地址始终应为单播地址。</p>
</blockquote>
<p>如同单播和广播地址一样，组播 IP 地址也需要相应的组播 MAC 地址才能在本地网络中传送帧。组播 MAC 地址与 IPv4 或 IPv6 组播地址相关联，并使用来自 IPv4 或 IPv6 的编址信息。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_5_8.png" alt="目的 MAC 地址和目的 IP 地址都是广播。"></p>
<p>路由协议和其他网络协议会使用组播地址。视频和图像软件等应用程序也可能使用组播地址，尽管组播应用程序并不常见。</p>
<hr>
<h3 id="MAC-地址表-交换机"><a href="#MAC-地址表-交换机" class="headerlink" title="MAC 地址表 - 交换机"></a>MAC 地址表 - 交换机</h3><p>既然您已经了解了所有关于以太网MAC地址的知识，现在就该讨论交换机如何使用这些地址将帧转发(或丢弃)到网络上的其他设备。如果交换机只是转发出它接收到的每一帧到所有端口，您的网络将会非常拥挤，以至于它可能会完全停止工作。</p>
<p>第 2 层以太网交换机使用 MAC 地址做出转发决策。它完全忽视帧的数据部分的协议，例如 IPv4 数据包，一个ARP消息或一个IPv6 ND数据包。交换机仅根据第 2 层以太网 MAC 地址做出转发决策。</p>
<p>一个以太网交换机检查它的MAC地址表，为每个帧做出一个转发决策，不像传统的以太网集线器，向除了传入端口以外的所有端口重复发出比特位。如图所示，四端口交换机已启动。如表所示，MAC地址表还未获知四台连接的 PC 的 MAC 地址。</p>
<p>注意: 缩短 MAC 地址是为了便于演示。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_6_1.png" alt="交换机"></p>
<p>注意: MAC 地址表有时也称为内容可寻址内存 (CAM) 表。虽然 CAM 表这一术语相当常见，但在本课程中，我们将称其为 MAC 地址表。</p>
<hr>
<h3 id="交换机学习和转发"><a href="#交换机学习和转发" class="headerlink" title="交换机学习和转发"></a>交换机学习和转发</h3><blockquote>
<p>交换机通过检查端口传入帧的源 MAC 地址来动态构建 MAC 地址表。交换机通过匹配帧中的目的 MAC 地址与 MAC 地址表中的条目来转发帧。</p>
</blockquote>
<p><strong>检查源MAC地址</strong></p>
<blockquote>
<p>进入交换机的每个帧被检查，以确定其中是否有可被学习的新信息。它是通过检查帧的源 MAC 地址和帧进入交换机的端口号来完成这一步的。如果源 MAC 地址不存在，会将其和传入端口号一并添加到表中。如果源 MAC 地址已存在于表中，则交换机会更新该条目的刷新计时器。默认情况下，大多数以太网交换机将条目在表中保留 5 分钟。</p>
</blockquote>
<p>如图所示，PC-A 正在向 PC-D 发送以太网帧。如表所示该交换机将 PC-A 的 MAC 地址添加到MAC地址表中。</p>
<p>注意: 如果源 MAC 地址已经保存在表中，但是对应的是不同的端口，那么交换机会将其视为一个新的条目。使用相同的 MAC 地址和最新的端口号来替换该条目。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_6_2.png" alt="学习"></p>
<hr>
<p><strong>查找目的MAC地址</strong></p>
<blockquote>
<p>如果目的 MAC 地址为单播地址，该交换机会看帧中的目的 MAC 地址与 MAC 地址表中的条目是否匹配。如果表中存在该目的MAC地址，交换机会从指定端口转发帧。如果表中不存在该目的MAC地址，交换机会从除传入端口外的所有端口转发帧。这称为未知单播。</p>
</blockquote>
<p>如图所示，交换机的表中没有目的主机 PC-D 的 MAC 地址，因此交换机会从除端口 1 外的所有端口转发帧。</p>
<p>注意: 如果目的 MAC 地址为广播或组播，该帧也将被泛洪到除传入端口外的所有端口。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_6_3.png" alt="转发"></p>
<hr>
<h3 id="过滤帧"><a href="#过滤帧" class="headerlink" title="过滤帧"></a>过滤帧</h3><p>交换机是从不同的设备接收帧，因此它可以通过检查每个帧的源 MAC 地址来填充它的 MAC 地址表。如果MAC 地址表包含目的MAC 地址，则交换机将“滤过”该帧并将其从单个端口转发出去。</p>
<p><strong>在图中，PC-D 正在回复 PC-A。 交换机在端口 4 上的传入帧中看到 PC-D 的 MAC 地址。然后，交换机将 PC-D 的 MAC 地址放入与端口 4 关联的 MAC 地址表中。</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_6_4.png" alt="PC - D 到转换机"></p>
<p><strong>下一步，因为该交换机的MAC地址表中存在 PC-A 的目的 MAC 地址，它将仅从端口 1 将该帧发出去，如rt676图所示。</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_6_5.png" alt="交换到 PC - A"></p>
<p><strong>下一步，PC-A 向 PC-D 发送另一帧，如图所示。MAC 地址表中已包含 PC-A 的 MAC 地址，因此该条目的五分钟刷新计时器被重置。下一步，因为该交换机的表中存在 PC-D 的目的 MAC 地址，它将仅从端口 4 将该帧发出去。</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_6_6.png" alt="PC - A 到交换机再到PC - D"></p>
<hr>
<h3 id="相连交换机上的-MAC-地址表"><a href="#相连交换机上的-MAC-地址表" class="headerlink" title="相连交换机上的 MAC 地址表"></a>相连交换机上的 MAC 地址表</h3><blockquote>
<p>交换机的单个端口可以与多个 MAC 地址关联。这种情况在交换机与另一个交换机连接时很常见。交换机为每个收到的帧中的源 MAC 地址创建一条有单独的 MAC 地址表条目。</p>
</blockquote>
<hr>
<h3 id="将帧发送到默认网关"><a href="#将帧发送到默认网关" class="headerlink" title="将帧发送到默认网关"></a>将帧发送到默认网关</h3><blockquote>
<p>如果一台设备的 IP 地址在远程网络上，则不能将以太网帧直接发送到目的设备。而是将以太网帧发送到默认网关（路由器）的 MAC 地址。</p>
</blockquote>
<hr>
<h3 id="思科交换机上的帧转发方法"><a href="#思科交换机上的帧转发方法" class="headerlink" title="思科交换机上的帧转发方法"></a>思科交换机上的帧转发方法</h3><blockquote>
<p><code>交换机使用其 MAC 地址表来确定用于转发帧的端口</code>。对于思科交换机，实际上有两种帧转发的方法，根据具体情况，有充分的理由使用其中一种来代替另一种。</p>
</blockquote>
<p>在过去，交换机使用下面的两种转发方法之一来进行<code>网络端口间的数据交换</code>：</p>
<ul>
<li><p><strong>存储转发交换</strong> - 这个帧转发的方法接收整个帧并计算CRC <strong>(Cyclic Redundancy Check，循环冗余校验)</strong> 根据帧中的比特位为 1 的位数量，使用数学公式来确定收到的帧是否有错。如果 CRC 有效，则交换机查找目的地址，目的地址决定了转发接口。帧然后从正确的端口转发出去。</p>
</li>
<li><p><strong>直通交换</strong> - 这种帧转发的方法在收到整个帧之前即转发帧。在可以转发帧之前，至少必须读取帧的目的地址。</p>
</li>
</ul>
<p>存储转发交换的一大<code>优点</code>是，它<code>可以在传播帧之前确定帧是否有错误</code>。</p>
<blockquote>
<p>当在帧中检测到错误时，交换机丢弃该帧。丢弃有错的帧可减少损坏的数据所耗用的带宽量。<strong>存储转发交换对于融合网络中的服务质量（QoS）分析是必需的</strong>，在融合网络中，必须对帧进行分类以划分流量优先级。例如，IP 语音数据流的优先级需要高于 Web 浏览流量。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_9_1.png" alt="源数据帧"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_9_2.png" alt="交换机帧校验"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_9_3.png" alt="交换机校验通过"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_9_4.png" alt="交换机检查交换表"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_9_5.png" alt="交换机发送源数据帧到目的地"></p>
<hr>
<h3 id="直通交换"><a href="#直通交换" class="headerlink" title="直通交换"></a>直通交换</h3><blockquote>
<p>在直通交换中，交换机在收到数据时立即处理数据，<strong>即使传输尚未完成。交换机只缓冲帧的一部分，缓冲的量仅足以读取目的 MAC 地址，以便确定转发数据时应使用的端口</strong>。目的 MAC 地址位于帧中前导码后面的前 6 个字节。交换机在其交换表中查找目的 MAC 地址，确定转发端口，然后通过指定的交换机端口将帧转发到其目的地。交换机对该帧不执行任何错误检查。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_10_1.png" alt="交换机发送源数据帧到目的地"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_10_2.png" alt="交换机发送源数据帧到目的地"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_10_3.png" alt="交换机发送源数据帧到目的地"></p>
<hr>
<p>直通交换有两种变体：</p>
<ul>
<li><p><strong>快速转发交换</strong> - 快速转发交换<code>提供最低程度的延时</code>。快速转发交换在读取目的地址之后立即转发数据包。由于快速转发交换在收到整个数据包之前就开始转发，因此有时候中继数据包时会出错。这种情况并不经常发生，而且目的网络适配器在收到含错数据包时会将其丢弃。在快速转发模式下，延时是指从收到第一个位到传出第一个位之间的时间差。快速转发交换是典型的直通交换方法。</p>
</li>
<li><p><strong>免分片交换</strong> - 在免分片交换中，交换机在转发之前存储帧的前 64 个字节。<code>可以将免分片交换视为存储转发交换和直通交换之间的折衷</code>。免分片交换只存储帧的前 64 个字节的原因是，大部分网络错误和冲突都发生在前 64 个字节。免分片交换在转发帧之前对帧的前 64 个字节执行小错误检查以确保没有发生过冲突，并且尝试通过这种方法来增强快速转发交换功能。免分片交换是存储转发交换的高延时和高完整性与快速转发交换的低延时和弱完整性之间的折衷。</p>
</li>
</ul>
<blockquote>
<p><code>某些交换机可配置为按端口执行直通交换</code>，<strong>当达到用户定义的错误阈值时，这些端口自动切换为存储转发。当错误率低于该阈值时，端口自动恢复到直通切换</strong>。</p>
</blockquote>
<hr>
<h3 id="交换机上的内存缓冲"><a href="#交换机上的内存缓冲" class="headerlink" title="交换机上的内存缓冲"></a>交换机上的内存缓冲</h3><blockquote>
<p><code>以太网交换机在转发帧之前</code>，可以使用缓冲技术存储帧。<code>当目的端口由于拥塞而繁忙时</code>，也可以使用缓冲。<strong>交换机将帧存储起来，直到可以传输</strong>。</p>
</blockquote>
<p>如表所示，有两种内存缓冲方法：</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>基于端口的内存</strong></td>
<td align="left"><strong>1.</strong> 帧存储在链接到特定传入端口和传出 端口的队列中。<strong>2.</strong> 只有当队列前面的所有帧都成功传输后， 才会将帧传输到传出端口。<strong>3.</strong> 由于目地端口繁忙， 单个帧可能会造成内存中所有帧的传输延迟。<strong>4.</strong> 即使其他帧可以传送到开放的目的端口， 这种延迟仍然会发生。</td>
</tr>
<tr>
<td align="left"><strong>共享内存</strong></td>
<td align="left"><strong>1.</strong> 将所有帧存储到由所有交换端口共享的公共内存缓冲区中， 并且动态分配一个端口所需的 缓冲区内存量。 <strong>2.</strong> 缓冲区中的帧动态地链接到目的端口， 允许在一个端口上接收数据包，然后 在另一个端口上发送，而无需移动到另一个队列。</td>
</tr>
</tbody></table>
<p>而且<strong>共享内存缓冲也意味着存储较大帧的能力，丢弃的帧可能较少</strong>。这对于非对称交换非常重要，因为它允许在不同端口上使用不同的数据速率，比如将服务器连接到 10 Gbps 的交换机端口，而pc连接到 1 Gbps 的端口。</p>
<hr>
<h3 id="双工和速率设置"><a href="#双工和速率设置" class="headerlink" title="双工和速率设置"></a>双工和速率设置</h3><blockquote>
<p>交换机上<code>最基本的两个设置是带宽（有时称为“速率”）和每个交换机端口的双工设置</code>。交换机端口和连接的设备（例如计算机或另一台交换机）的双工设置和带宽设置必须匹配。</p>
</blockquote>
<p>用于以太网通信的双工设置有两种：</p>
<ul>
<li><p><strong>全双工</strong> – 连接的两端均可同时收发信息。</p>
</li>
<li><p><strong>半双工</strong> – 一次只能是连接的两端中其中一端发送信息。</p>
</li>
</ul>
<blockquote>
<p><strong>自动协商是大多数以太网交换机和网卡的一项可选功能</strong>。它使两个设备自动协商最佳速率和双工性能。如果两台设备具有最高常见带宽的功能，则会选择全双工。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_12_1.png" alt="PC-A 的以太网网卡可在全双工或半双工模式下，以及以 10 Mbps 或 100 Mb速率运行。"></p>
<p>注意: 大多数思科交换机和以太网网卡默认采用自动协商功能，以提高速率和实现双工。<code>千兆以太网端口仅以全双工模式运行</code>。</p>
<blockquote>
<p><strong>双工不匹配是以太网链路出现性能问题的常见原因之一</strong>。当链路上的一个端口在半双工模式下运行，而另一个端口在全双工模式下运行时，就会发生双工不匹配，如图所示。</p>
</blockquote>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_12_2.png">

<blockquote>
<p><strong>当链路上的一个或两个端口被重置时，会发生双工不匹配</strong>，自动协调过程并不会使链路上的两个端口的配置相同。当用户重新配置链路的一端而忘记重新配置另一端时，也会出现这样的情况。链路的两端均应都使用或都不使用自动协商。最佳实践是将两个以太网交换端口都配置为全双工。</p>
</blockquote>
<hr>
<h3 id="Auto-MDIX"><a href="#Auto-MDIX" class="headerlink" title="Auto-MDIX"></a>Auto-MDIX</h3><blockquote>
<p>设备之间的连接曾经要求使用交叉线或直通线。所需的线缆类型取决于互连设备的类型。</p>
</blockquote>
<p>例如，该图标识了互连<code>交换机到交换机</code>、<code>交换机到路由器</code>、<code>交换机到主机</code>或<code>路由器到主机</code>设备所需的正确线缆类型。交叉线用于连接相似的设备，而直通电缆主要用于连接不同的设备。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/5_13.png" alt="连线规则"></p>
<p>现在，<strong>大多数交换机设备都支持自动介质相关接口交叉 (auto-MDIX) 功能</strong>。当该功能启用时，交换机可检测连接到端口的线缆类型，并相应地配置接口。因此，如果要连接到交换机上的铜缆 10/100/1000 端口，您既可以使用交叉线，也可以使用直通线，而无需考虑连接另一端的设备类型。</p>
<hr>
<h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h3><ul>
<li>以太网帧</li>
</ul>
<blockquote>
<p>以太网在数据链路层和物理层运行。以太网标准定义第 2 层协议和第 1 层技术。以太网使用数据链路层的 LLC 和 MAC 子层进行操作。数据封装包括以下内容：以太网帧、以太网编址和以太网错误检测。以太网LANs使用的交换机是全双工的。以太网帧字段包括：前导码和帧起始定界符、目的 MAC 地址、源 MAC 地址、EtherType、数据和 FCS。</p>
</blockquote>
<ul>
<li>以太网MAC地址</li>
</ul>
<blockquote>
<p>二进制系统仅使用数字 0 和 1。十进制使用 0 到 9。十六进制使用 0 到 9，字母 A 到 F。MAC 地址用于标识本地网段上的物理源和目的设备 (NIC)。MAC 编址为 OSI 模型的数据链路层提供了设备识别方法。以太网 MAC 地址是48 位，使用 12个十六进制数字，或 6 字节表示。以太网 MAC 地址由6个十六进制供应商 OUI 代码和6个十六进制供应商分配的值组成。当设备将消息转发到以太网网络时，以太网报头包括源 MAC 地址和目的 MAC 地址。在以太网中，第 2 层单播、组播和广播通信会使用不同的 MAC 地址。</p>
</blockquote>
<ul>
<li>MAC地址表</li>
</ul>
<blockquote>
<p>第 2 层以太网交换机仅根据第 2 层以太网 MAC 地址做出转发决策。交换机通过检查端口传入帧的源 MAC 地址来动态构建 MAC 地址表。交换机通过匹配帧中的目的 MAC 地址与 MAC 地址表中的条目来转发帧。交换机是从不同的设备接收帧，因此它可以通过检查每个帧的源 MAC 地址来填充它的 MAC 地址表。如果MAC 地址表包含目的MAC 地址，则交换机将滤过该帧并将其从单个端口转发出去。</p>
</blockquote>
<ul>
<li>交换机速率和转发方法</li>
</ul>
<blockquote>
<p>交换机使用下面的两种转发方法之一来进行网络端口间的数据交换：存储转发交换或直通交换。有两种类型的直通交换方法：快速转发和免分片。内存缓冲的两种方法是基于端口的内存和共享内存。以太网络上的通信使用两种双工设置：全双工和半双工。自动协商是大多数以太网交换机和网卡的一项可选功能。它使两个设备自动协商最佳速率和双工性能。如果两台设备具有最高常见带宽的功能，则会选择全双工。现在，大多数交换机设备都支持自动介质相关接口交叉 (auto-MDIX) 功能。当该功能启用时，交换机可检测连接到端口的线缆类型，并相应地配置接口。</p>
</blockquote>
<hr>
<h2 id="网络层（第-3-层）"><a href="#网络层（第-3-层）" class="headerlink" title="网络层（第 3 层）"></a><a href="https://phoenixnest.github.io/School-Computer-Network-Technology-3-Network-Layer/">网络层（第 3 层）</a></h2><hr>
<h2 id="地址解析"><a href="#地址解析" class="headerlink" title="地址解析"></a>地址解析</h2><h3 id="同一网络中的目的地"><a href="#同一网络中的目的地" class="headerlink" title="同一网络中的目的地"></a>同一网络中的目的地</h3><p>有时，主机必须发送消息，但它只知道目的设备的 IP 地址。主机需要知道该设备的MAC地址，但是如何才能发现它呢? 这就是地址解析变得至关重要的地方。</p>
<p>以太网 LAN 上的设备都配有两个主要地址：</p>
<ul>
<li><p><strong>物理地址（MAC 地址）</strong> – <code>用于同一网络上的以太网网卡之间的通信</code>。</p>
</li>
<li><p><strong>逻辑地址（IP地址）</strong> – <code>用于将数据包从源设备发送到目的设备</code>。<strong>目的IP地址可能与源地址在同一个IP网络上，也可能在远程网络上</strong>。</p>
</li>
</ul>
<p>第二层物理地址（即以太网 MAC 地址）用于将数据链路层帧从同一网络中一个网卡发送到另一个网卡， IP 数据包就封装在帧中。如果目的IP地址在同一网络上，则目的MAC地址将是目的设备的MAC地址。</p>
<p>考虑下面使用简化的MAC地址表示的示例。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_1.png" alt="同一网络中的目的地"></p>
<p>在本示例中，PC1 想要向 PC2 发送一个数据包。该图显示了从 PC1 发送的数据包中包含：第2层目的和源 MAC 地址以及第 3 层 IPv4 地址。</p>
<p><code>第 2 层以太网帧</code>包含以下内容：</p>
<ul>
<li><p><strong>目的MAC地址</strong> – 这是简化的 PC2 MAC 地址，55-55-55。</p>
</li>
<li><p><strong>源MAC地址</strong> – 这是 PC1 上以太网网卡的简化 MAC 地址，aa-aa-aa。</p>
</li>
</ul>
<p><code>第 3 层 IP 数据包</code>包含以下内容：</p>
<ul>
<li><p><strong>源 IPv4 地址</strong> – 这是 PC1 的 IPv4 地址，192.168.10.10。</p>
</li>
<li><p><strong>目的 IPv4 地址</strong> – 这是 PC2 的 IPv4 地址, 192.168.10.11。</p>
</li>
</ul>
<hr>
<h3 id="远程网络中的目的地"><a href="#远程网络中的目的地" class="headerlink" title="远程网络中的目的地"></a>远程网络中的目的地</h3><p>当目的 IP 地址(IPv4或IPv6)处于远程网络中时，则目的 MAC 地址为主机的默认网关的地址(即路由器接口)。</p>
<p>考虑下面使用简化的MAC地址表示的示例。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_2_1.png">

<p>在本示例中，PC1想要向PC2发送一个数据包。PC2 位于远程网络上。因为目的IPv4地址与PC1不在同一个本地网络上，所以目的MAC地址是路由器上的本地默认网关地址。</p>
<p>路由器通过检查目的 IPv4 地址来确定转发 IPv4 数据包的最佳路径。路由器收到以太网帧后，将解封第 2 层信息。它可借助目的 IPv4 地址确定下一跳设备，然后将 IPv4 数据包封装在发送接口的新数据链路帧中。</p>
<p>在我们的示例中, R1现在用新的第2层地址信息封装数据包，如图所示。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_2_2.png">

<p>新的目的MAC地址将是R2 G0/0/1接口的地址，新的源MAC地址将是R1 G0/0/1接口的地址。</p>
<p>沿着路径中的每个链路，IP数据包都被封装在一个帧中。这个帧由该链路的数据链路层技术指定，如以太网。如果下一跳设备为最终目的地，则目的 MAC 地址将是该设备的以太网网卡的 MAC 地址，如图所示。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_2_3.png">

<p>数据流中 IP 数据包的 IP 地址如何与通往目的地路径中每条链路上的 MAC 地址相关联？对于IPv4数据包，这可以通过地址解析协议 (ARP) 过程来完成。对于IPv6数据包，这个过程是ICMPv6邻居发现(ND)。</p>
<hr>
<h3 id="ARP概述"><a href="#ARP概述" class="headerlink" title="ARP概述"></a>ARP概述</h3><blockquote>
<p>如果您的网络使用IPv4通信协议，则需要使用 <strong>地址解析协议（ARP，Address Resolution Protocol）</strong> 将IPv4地址映射到MAC地址。</p>
</blockquote>
<p><code>以太网网络上的每个IP设备都有一个唯一的以太网MAC地址</code>。当设备发送以太网第2层帧时，将包含以下两个地址：</p>
<ul>
<li><p><strong>目的 MAC 地址</strong>  - 目的设备位于同一本地网络上，则为其以太网 MAC 地址。如果目的主机位于另一个网络上，则帧中的目的地址将是默认网关（即路由器）的地址。</p>
</li>
<li><p><strong>源 MAC 地址</strong> - 源主机以太网网卡的 MAC 地址。</p>
</li>
</ul>
<p>该图说明了将帧发送到 IPv4 网络上同一段中的另一个主机时出现的问题。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_3.png">

<blockquote>
<p>要向同一本地IPv4网络上的另一个主机发送数据包，主机必须知道目的设备的IPv4地址和MAC地址。设备目的IPv4地址可以是已知的，也可以通过设备名称解析。然而，MAC地址必须被发现。</p>
</blockquote>
<p>设备使用地址解析协议（ARP）来确定一个已知 IPv4 地址的本地设备的目的 MAC 地址。</p>
<p>ARP 提供两个基本功能：</p>
<ul>
<li><p><strong>将 IPv4 地址解析为 MAC 地址</strong></p>
</li>
<li><p><strong>维护IPv4到MAC地址映射表</strong></p>
</li>
</ul>
<hr>
<h3 id="ARP-功能"><a href="#ARP-功能" class="headerlink" title="ARP 功能"></a>ARP 功能</h3><blockquote>
<p>当数据包发送到要封装入以太网帧的数据链路层时，<strong>设备将参照其内存中的表来查找映射至 IPv4 地址的 MAC 地址。此表临时存储在 RAM 内存中，称为 ARP 表或 ARP 缓存</strong>。</p>
</blockquote>
<p>发送设备会在自己的 ARP 表中搜索目的 IPv4 地址和相应的 MAC 地址。</p>
<ul>
<li><p>如果数据包的目的 IPv4 地址与源 IPv4 地址处于同一个网络，则设备会在 ARP 表中搜索目的 IPv4 地址。</p>
</li>
<li><p>如果目的 IPv4 地址与源 IPv4 地址不在同一个网络中，则设备会在 ARP 表中搜索默认网关的 IPv4 地址。</p>
</li>
</ul>
<p>这两种情况都是搜索设备的 IPv4 地址和与其相对应的 MAC 地址。</p>
<blockquote>
<p>ARP 表中的每一条（或每行）将一个 IPv4 地址与一个 MAC 地址绑定。我们把两个值之间的关系称为映射。这意味着您可以在表中查找 IPv4 地址并发现相应的 MAC 地址。ARP 表暂时保存（缓存）LAN 上设备的映射。</p>
<blockquote>
<p>如果设备找到 IPv4 地址，其相应的 MAC 地址将作为帧中的目的 MAC 地址。如果找不到该条目，设备会发送一个 ARP 请求。</p>
</blockquote>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_4_1.png" alt="源设备发送 ARP 请求"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_4_2.png" alt="交换机转发请求报文"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_4_3.png" alt="终端报文校验"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_4_4.png" alt="目标机回传信息"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_4_5.png" alt="源设备向目标机发送信息"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_4_6.png" alt="目标机接收信息"></p>
<hr>
<h3 id="ARP-请求"><a href="#ARP-请求" class="headerlink" title="ARP 请求"></a>ARP 请求</h3><blockquote>
<p>当设备需要确定与 IPv4 地址关联的 MAC 地址，而它的 ARP 表中没有该 IPv4 地址条目时，会发送一个 ARP 请求。</p>
</blockquote>
<p><code>ARP 消息直接封装到以太网帧中。没有 IPv4 报头</code>。ARP 请求使用以下<strong>帧头信息</strong>封装在以太网帧中：</p>
<ul>
<li><p><strong>目的 MAC 地址</strong> – 这是一种要求 LAN 上的所有以太网网卡接受并处理 ARP 请求的广播地址FF-FF-FF-FF-FF-FF。</p>
</li>
<li><p><strong>源 MAC 地址</strong> – 这是ARP请求发送方的MAC地址。</p>
</li>
<li><p><strong>类型</strong> - ARP 消息的类型字段为 0x806。该类型字段会通知接收网卡需要将帧的数据部分传递给 ARP 进程处理。</p>
</li>
</ul>
<blockquote>
<p>因为 <strong>ARP 请求属于广播</strong>，交换机会将其泛洪到除接收端口外的其他所有端口。<code>局域网上的所有以太网网卡都会处理广播，并且必须将ARP请求发送到其操作系统进行处理</code>。<strong>每台设备必须处理 ARP 请求，以检查目的 IPv4 地址是否与其自己的地址相匹配</strong>。路由器不会将广播转发到其他接口。</p>
</blockquote>
<p>LAN 上只有一台设备的 IPv4 地址与 ARP 请求中的目的 IPv4 地址相匹配。所有其他设备将不应<br>答。</p>
<hr>
<h3 id="ARP-操作-ARP-应答"><a href="#ARP-操作-ARP-应答" class="headerlink" title="ARP 操作 - ARP 应答"></a>ARP 操作 - ARP 应答</h3><p>只有具有与ARP请求相应的目的IPv4地址的设备才会以ARP应答做出响应。ARP 应答使用以下帧头信息封装在以太网帧中：</p>
<ul>
<li><p><strong>目的 MAC 地址</strong> – 这是ARP请求发送方的MAC地址。</p>
</li>
<li><p><strong>源 MAC 地址</strong> – 这是ARP应答发送方的MAC地址。</p>
</li>
<li><p><strong>类型</strong> – ARP 消息的类型字段为 0x806。该类型字段会通知接收网卡需要将帧的数据部分传递给 ARP 进程处理。</p>
</li>
</ul>
<blockquote>
<p><strong>只有原始发送 ARP 请求的设备会收到单播 ARP 应答</strong>。收到该 ARP 应答后，设备会将 IPv4 地址及相应的 MAC 地址添加到自身的 ARP 表中。该 IPv4 地址的数据包现在便可使用其相应的 MAC 地址封装在帧中。</p>
<blockquote>
<p>如果没有设备响应 ARP 请求，就无法创建帧，那么这个数据包会被丢弃。</p>
</blockquote>
</blockquote>
<p><code>ARP 表中的条目具有时间戳</code>。<strong>如果设备在时间戳到期前没有从特定设备收到帧</strong>，<strong>此设备的条目将会从 ARP 表中删除</strong>。</p>
<p>此外，也<strong>可以在 ARP 表中输入静态映射条目</strong>，但<code>这种情况很少见</code>。<strong>静态 ARP 表条目没有到期时间，必须手动删除</strong>。</p>
<blockquote>
<p>注意: IPv6 使用与 IPv4 类似的 ARP 流程，称为 ICMPv6 邻居发现(ND)。与 IPv4 的 ARP 请求和 ARP 应答类似，Pv6 使用邻居请求和邻居通告消息。</p>
</blockquote>
<hr>
<h3 id="ARP-在远程通信中的作用"><a href="#ARP-在远程通信中的作用" class="headerlink" title="ARP 在远程通信中的作用"></a>ARP 在远程通信中的作用</h3><p>当目的 IPv4 地址与源 IPv4 地址位于不同网络时，源设备需要将帧发送到其默认网关。这是本地路由器的接口。每当源设备具有 IPv4 地址在其他网络中的数据包时，它会使用路由器的目的 MAC 地址将该数据包封装在帧中。</p>
<blockquote>
<p>默认网关的 IPv4 地址存储在主机的 IPv4 配置中。当主机创建通往某台目的主机的数据包时，会将目的 IPv4 地址与其自己的 IPv4 地址进行比较，以确定两个 IPv4 地址是否位于相同的第 3 层网络上。如果目的主机不在同一网络上，源主机将从 ARP 表中查找默认网关的 IPv4 地址条目。如果没有该条目，源主机将使用 ARP 流程来确定默认网关的 MAC 地址。</p>
</blockquote>
<hr>
<h3 id="从-ARP-表中删除条目"><a href="#从-ARP-表中删除条目" class="headerlink" title="从 ARP 表中删除条目"></a>从 ARP 表中删除条目</h3><p>对于每台设备，<code>ARP 缓存定时器将会删除在指定时间内未使用的 ARP 条目</code>。时间根据设备的操作系统不同而不同。例如，较新的 Windows 操作系统将 ARP 表条目存储 15 秒到 45 秒之间，如图所示。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_8.png">

<p><code>也可以使用命令来手动删除 ARP 表中的部分或全部条目</code>。<strong>当条目被删除之后，要想在 ARP 表中输入映射，必须重复一次发送 ARP 请求和接收 ARP 回复的过程</strong>。</p>
<hr>
<h3 id="网络设备上的-ARP-表"><a href="#网络设备上的-ARP-表" class="headerlink" title="网络设备上的 ARP 表"></a>网络设备上的 ARP 表</h3><blockquote>
<p>在<code>思科路由器</code>上，<strong>show ip arp</strong>命令用于显示 ARP 表。</p>
</blockquote>
<pre><code class="CISCO">R1# show ip arp 
Protocol  Address          Age (min)  Hardware Addr   Type   Interface
Internet  192.168.10.1            -   a0e0.af0d.e140  ARPA   GigabitEthernet0/0/0
Internet  209.165.200.225         -   a0e0.af0d.e141  ARPA   GigabitEthernet0/0/1
Internet  209.165.200.226         1   a03d.6fe1.9d91  ARPA   GigabitEthernet0/0/1
R1#
</code></pre>
<blockquote>
<p>在 <code>Windows 10</code> PC 上，<strong>arp –a</strong>命令用于显示 ARP 表。</p>
</blockquote>
<pre><code class="bash">C:\Users\PC&gt; arp -a
Interface: 192.168.1.124 --- 0x10
  Internet Address      Physical Address      Type
  192.168.1.1           c8-d7-19-cc-a0-86     dynamic
  192.168.1.101         08-3e-0c-f5-f7-77     dynamic
  192.168.1.110         08-3e-0c-f5-f7-56     dynamic
  192.168.1.112         ac-b3-13-4a-bd-d0     dynamic
  192.168.1.117         08-3e-0c-f5-f7-5c     dynamic
  192.168.1.126         24-77-03-45-5d-c4     dynamic
  192.168.1.146         94-57-a5-0c-5b-02     dynamic
  192.168.1.255         ff-ff-ff-ff-ff-ff     static
  224.0.0.22            01-00-5e-00-00-16     static
  224.0.0.251           01-00-5e-00-00-fb     static
  239.255.255.250       01-00-5e-7f-ff-fa     static
  255.255.255.255       ff-ff-ff-ff-ff-ff     static
C:\Users\PC&gt;
</code></pre>
<hr>
<h3 id="ARP-问题-ARP广播和ARP-欺骗"><a href="#ARP-问题-ARP广播和ARP-欺骗" class="headerlink" title="ARP 问题 - ARP广播和ARP 欺骗"></a>ARP 问题 - ARP广播和ARP 欺骗</h3><p><code>作为广播帧，本地网络上的每台设备都会收到并处理 ARP 请求</code>。在一般的商业网络中，这些广播对网络性能的影响可能微不足道。但是，如图所示，<code>如果大量设备都已启动，并且同时开始使用网络服务，网络性能可能会有短时间的下降</code>。<strong>在设备发出初始 ARP 广播并获取必要的 MAC 地址之后，网络受到的影响将会降至最小</strong>。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_10_1.png">

<p>有时，<code>使用 ARP 可能会造成潜在的安全风险</code>。</p>
<blockquote>
<p>威胁发起者可以使用 ARP 欺骗来执行 ARP 毒化攻击。</p>
</blockquote>
<p>如图所示，威胁发起者使用这种技术来应答属于另一台设备（例如默认网关）的 IPv4 地址的 ARP 请求。威胁发起者会发送一个带有自己 MAC 地址的 ARP 应答。ARP 应答的接收方会将错误的 MAC 地址添加到其 ARP 表中，并将这些数据包发送给威胁发起者。 <code>企业级的交换机包含称为动态 ARP 检查（DAI，Dynamic ARP Inspection，动态 ARP 检测）的缓解技术</code>。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_10_2.png">

<hr>
<h3 id="IPv6-邻居发现"><a href="#IPv6-邻居发现" class="headerlink" title="IPv6 邻居发现"></a>IPv6 邻居发现</h3><blockquote>
<p>如果您的网络使用IPv6通信协议，则需要使用邻居发现协议(ND)将 IPv6 地址与 MAC 地址进行匹配。</p>
</blockquote>
<hr>
<h3 id="IPv6-邻居发现消息"><a href="#IPv6-邻居发现消息" class="headerlink" title="IPv6 邻居发现消息"></a>IPv6 邻居发现消息</h3><blockquote>
<p><strong>IPv6 邻居发现协议有时被称为 ND 或 NDP</strong>。在本课程中，我们称它为 ND。ND使用ICMPv6为IPv6提供地址解析、路由器发现和重定向服务。<strong>ICMPv6 ND 使用五种 ICMPv6 消息来执行这些服务</strong>：</p>
</blockquote>
<ul>
<li><p><strong>邻居请求消息</strong></p>
</li>
<li><p><strong>邻居通告消息</strong></p>
</li>
<li><p><strong>路由器请求消息</strong></p>
</li>
<li><p><strong>路由器通告消息</strong></p>
</li>
<li><p><strong>重定向消息</strong></p>
</li>
</ul>
<p>邻居请求和邻居通告消息用于设备到设备的消息传递，例如地址解析（类似于 IPv4 的 ARP）。设备包括主机计算机和路由器。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_12_1.png">

<blockquote>
<p>路由器请求和路由器通告消息用于设备和路由器之间的消息传递。通常，路由器发现用于<strong>动态地址分配（DHCP,Dynamic Host Configuration Protocol）</strong>和无状态地址自动配置 <strong>（SLAAC，Stateless address auto configuration）</strong>。</p>
</blockquote>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_12_2.png">

<p>注意: 第五个 ICMPv6 ND 消息是一个重定向消息，用于更好的下一跳选择。这不在本课程的讨论范围之内。</p>
<blockquote>
<p>IPv6 ND 是在 IETF RFC 4861 中定义的。</p>
</blockquote>
<hr>
<h3 id="IPv6-邻居发现-地址解析"><a href="#IPv6-邻居发现-地址解析" class="headerlink" title="IPv6 邻居发现 - 地址解析"></a>IPv6 邻居发现 - 地址解析</h3><p>与 IPv4 的 ARP 非常相似，IPv6 设备使用 IPv6 ND 来确定一个已知 IPv6 地址的设备的 MAC 地址。</p>
<blockquote>
<p>ICMPv6 邻居请求和邻居通告消息用于MAC地址解析。这类似于ARP用于IPv4的ARP请求和ARP应答。例如，假设 PC1 想要ping PC2的Ipv6地址2001:db8:acad::11。为了确定已知IPv6地址的MAC地址，PC1发送一个ICMPv6邻居请求消息，如图所示。</p>
</blockquote>
<p>该图显示了 PC1 和 PC2 连接到网络 2001:db8:acad:1::/64 上的同一交换机。PC1 的 IPv6 地址是2001:db8:acad:1::10，PC2 的 IPv6 地址是 2001:db8:acad:1::11。</p>
<ul>
<li><p>PC1 正在发送一条 ICMPv6 邻居请求消息，显示为：嘿，谁有2001:db8:acad:1::11，把你的 MAC 地址发给我？</p>
</li>
<li><p>PC2 正在回应一条 ICMPv6 邻居通告消息，显示为：嘿，2001:db8:acad:1::10，我是 2001:db8:acad:1::11，我的 MAC 地址是 f8-94-c3-e4-c5-0A。</p>
</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/7_13.png">

<blockquote>
<p>ICMPv6 邻居请求消息使用特定的以太网和 IPv6 组播地址发送。这允许接收设备的以太网卡确定邻居请求消息是否属于它自己，而不必将它发送到操作系统进行处理。</p>
</blockquote>
<p>PC2 使用包含其 MAC 地址的 ICMPv6 邻居通告消息来应答请求。</p>
<h3 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a>总结</h3><ul>
<li>MAC和IP</li>
</ul>
<blockquote>
<p>第2层物理地址(即，以太网MAC地址)用于通过封装 IP 数据包将数据链路层帧从同一网络中一个网卡发送到另一个网卡。如果目的 IP 地址处于本地网络中，则目的 MAC 地址是目的设备的 MAC 地址。当目的 IP 地址(IPv4或IPv6)处于远程网络中时，则目的 MAC 地址为主机的默认网关的地址(即路由器接口)。沿着路径中的每个链路，IP数据包都被封装在一个帧中。这个帧由该链路的数据链路层技术指定，如以太网。如果下一跳设备为最终目的地，则目的 MAC 地址将是该设备的以太网网卡的 MAC 地址。数据流中 IP 数据包的 IP 地址如何与通往目的地路径中每条链路上的 MAC 地址相关联？对于IPv4数据包，这可以通过ARP 过程来完成。对于IPv6数据包，这个过程是ICMPv6 ND。</p>
</blockquote>
<ul>
<li>ARP</li>
</ul>
<blockquote>
<p>以太网网络上的每个IP设备都有一个唯一的以太网MAC地址。当设备发送以太网帧时，它包含这两个地址：目的 MAC 地址和源 MAC 地址。当已知一个本地设备的IPv4地址时，使用ARP来确定该设备的目的MAC地址。ARP提供了两个基本功能：将IPv4地址解析为MAC地址和维护IPv4到MAC地址的映射表。ARP 请求使用以下报头信息封装在以太网帧中：源和目的 MAC 地址和类型。LAN 上只有一台设备的 IPv4 地址与 ARP 请求中的目的 IPv4 地址相匹配。所有其他设备将不应答。ARP应答包含与请求相同的报头字段。只有原始发送 ARP 请求的设备会收到单播 ARP 应答。收到该 ARP 应答后，设备会将 IPv4 地址及相应的 MAC 地址添加到自身的 ARP 表中。当目的 IPv4 地址与源 IPv4 地址位于不同网络时，源设备需要将帧发送到其默认网关。这是本地路由器的接口。对于每台设备，ARP 缓存定时器将会删除在指定时间内未使用的 ARP 条目。也可以使用命令来手动删除 ARP 表中的部分或全部条目。作为广播帧，本地网络上的每台设备都会收到并处理 ARP 请求，这可能导致网络变慢。威胁发起者可以使用 ARP 欺骗来执行 ARP 毒化攻击。</p>
</blockquote>
<ul>
<li>邻居发现</li>
</ul>
<blockquote>
<p>IPv6不使用ARP，它使用ND协议来解析MAC地址。ND使用ICMPv6为IPv6提供地址解析、路由器发现和重定向服务。ICMPv6 ND 使用五种 ICMPv6 消息来执行这些服务：邻居请求、邻居通告、路由器请求、路由器通告和重定向。与IPv4的ARP非常相似，IPv6设备使用IPv6 ND将设备的MAC地址解析为已知的IPv6地址。</p>
</blockquote>
<hr>
<h2 id="CISCO路由器基本配置"><a href="#CISCO路由器基本配置" class="headerlink" title="CISCO路由器基本配置"></a>CISCO路由器基本配置</h2><h3 id="基本路由器配置步骤"><a href="#基本路由器配置步骤" class="headerlink" title="基本路由器配置步骤"></a>基本路由器配置步骤</h3><p>在路由器上配置初始设置时，应完成以下任务。</p>
<ul>
<li>配置设备名称。</li>
</ul>
<pre><code class="CISCO">Router(config)# hostname hostname
</code></pre>
<ul>
<li>保护特权模式。</li>
</ul>
<pre><code class="CISCO">Router(config)# enable secret password
</code></pre>
<ul>
<li>保护用户模式</li>
</ul>
<pre><code class="CISCO">Router(config)# line console 0
Router(config-line)# password password
Router(config-line)# login
</code></pre>
<ul>
<li>保护远程 Telnet / SSH 访问</li>
</ul>
<pre><code class="CISCO">Router(config-line)# line vty 0 4
Router(config-line)# password password
Router(config-line)# login
Router(config-line)# transport input &#123;ssh | telnet&#125;
</code></pre>
<ul>
<li>保护配置文件中的所有密码。</li>
</ul>
<pre><code class="CISCO">Router(config-line)# exit
Router(config)# service password-encryption
</code></pre>
<ul>
<li>提供法律通知。</li>
</ul>
<pre><code class="CISCO">Router(config)# banner motd delimiter message delimiter
</code></pre>
<ul>
<li>保存配置。</li>
</ul>
<pre><code class="CISCO">Router(config)# end
Router# copy running-config startup-config
</code></pre>
<h3 id="路由器基本配置示例"><a href="#路由器基本配置示例" class="headerlink" title="路由器基本配置示例"></a>路由器基本配置示例</h3><p>在此示例中，拓扑图中的路由器 R1 将使用初始设置进行配置。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/8_1.png">

<p>要配置 R1 的设备名称，请使用以下命令。</p>
<pre><code class="CISCO">Router&gt; enable 
Router# configure terminal 
Enter configuration commands, one per line.
End with CNTL/Z.
Router(config)# hostname R1 
R1(config)#
</code></pre>
<p>注意: 注意路由器提示符现在如何显示路由器主机名。</p>
<p>所有路由器访问都应得到保护。特权 EXEC 模式为用户提供对设备及其配置的完全访问权限。因此，它是要去保护的最重要的模式。</p>
<p>以下命令保护特权 EXEC 模式和用户 EXEC 模式，启用 Telnet 和 SSH 远程访问，并加密所有明文（即用户 EXEC 和 VTY 线路）密码。</p>
<pre><code class="CISCO">R1(config)# enable secret class 
R1(config)#
R1(config)# line console 0 
R1(config-line)# password cisco 
R1(config-line)# login 
R1(config-line)# exit 
R1(config)#
R1(config)# line vty 0 4 
R1(config-line)# password cisco 
R1(config-line)# login 
R1(config-line)# transport input ssh telnet 
R1(config-line)# exit 
R1(config)#
R1(config)# service password-encryption 
R1(config)#
</code></pre>
<p>法律通知警告用户只能由允许用户访问该设备。法律通知配置如下。</p>
<pre><code class="CISCO">R1(config)# banner motd #
Enter TEXT message. End with a new line and the #
*********************************************** 
WARNING: Unauthorized access is prohibited!
***********************************************
#
R1(config)#
</code></pre>
<p>如果前面的命令已配置，路由器意外断电，则所有已配置的命令都将丢失。因此，在实施变更时保存配置非常重要。以下命令将配置保存到 NVRAM。</p>
<pre><code class="CISCO">R1# copy running-config startup-config
Destination filename [startup-config]? 
Building configuration...
[OK]
R1#
</code></pre>
<hr>
<h3 id="配置路由器接口"><a href="#配置路由器接口" class="headerlink" title="配置路由器接口"></a>配置路由器接口</h3><p>此时，您的路由器已经有了基本配置。下一步将配置它们的接口。这是因为在配置接口之前，终端设备无法访问路由器。思科路由器上有许多不同类型的接口。例如，思科 ISR 4321 路由器配备了两个千兆以太网接口：</p>
<ul>
<li><p><strong>GigabitEthernet 0/0/0 (G0/0/0)</strong></p>
</li>
<li><p><strong>GigabitEthernet 0/0/1 (G0/0/1)</strong></p>
</li>
</ul>
<p>配置路由器接口的任务与交换机上管理 SVI 非常相似。具体来说，它包括发出以下命令：</p>
<pre><code class="CISCO">Router(config)# interface type-and-number
Router(config-if)# description description-text
Router(config-if)# ip address ipv4-address subnet-mask
Router(config-if)# ipv6 address ipv6-address/prefix-length
Router(config-if)# no shutdown
</code></pre>
<p>注意: 当路由器接口启用时，应显示确认已启用链接的信息。</p>
<p>虽然不需要 description 命令来启用接口，但使用它是一个很好的习惯。通过提供有关所连接的网络类型的信息，可以帮助解决生产网络上的故障。例如，如果接口连接到ISP或服务供应商，则使用description命令输入“第三方连接和联系信息”将会有帮助。</p>
<p>注意: 说明文字最长不能超过 240 个字符。</p>
<p>使用no shutdown 命令可激活接口，类似于在接口上启动电源。接口还必须连接到另一台设备（交换机或路由器），才能使物理层处于活动状态。</p>
<p>注意: 在没有以太网交换机的路由器间连接，必须配置和启用两个互连接口。</p>
<hr>
<h3 id="配置路由器接口示例"><a href="#配置路由器接口示例" class="headerlink" title="配置路由器接口示例"></a>配置路由器接口示例</h3><p>在此示例中，将启用拓扑图中的 R1 直连接口。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/8_3.png">

<p>要在 R1 上配置接口，请使用以下命令。</p>
<pre><code class="CISCO">R1&gt; enable
R1# configure terminal
Enter configuration commands, one per line.
End with CNTL/Z.
R1(config)# interface gigabitEthernet 0/0/0
R1(config-if)# description Link to LAN
R1(config-if)# ip address 192.168.10.1 255.255.255.0
R1(config-if)# ipv6 address 2001:db8:acad:10::1/64
R1(config-if)# no shutdown
R1(config-if)# exit
R1(config)#
*Aug  1 01:43:53.435: %LINK-3-UPDOWN: Interface GigabitEthernet0/0/0, changed state to down
*Aug  1 01:43:56.447: %LINK-3-UPDOWN: Interface GigabitEthernet0/0/0, changed state to up
*Aug  1 01:43:57.447: %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0/0, changed state to up
R1(config)#
R1(config)#
R1(config)# interface gigabitEthernet 0/0/1
R1(config-if)# description Link to R2
R1(config-if)# ip address 209.165.200.225 255.255.255.252
R1(config-if)# ipv6 address 2001:db8:feed:224::1/64
R1(config-if)# no shutdown
R1(config-if)# exit
R1(config)#
*Aug  1 01:46:29.170: %LINK-3-UPDOWN: Interface GigabitEthernet0/0/1, changed state to down
*Aug  1 01:46:32.171: %LINK-3-UPDOWN: Interface GigabitEthernet0/0/1, changed state to up
*Aug  1 01:46:33.171: %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0/1, changed state to up
R1(config)#
</code></pre>
<p>注意: 注意那些通知我们G0/0/0 和 G0/0/1已启用了的信息。</p>
<hr>
<h3 id="检验接口配置"><a href="#检验接口配置" class="headerlink" title="检验接口配置"></a>检验接口配置</h3><p>有多条命令可用于检验接口配置。其中最有用的是 show ip interface brief 和 show ipv6 interface brief 命令，如示例所示。</p>
<pre><code class="CISCO">R1#  show ip interface brief
Interface IP-Address OK? Method Status Protocol 
GigabitEthernet0/0/0 192.168.10.1 YES manual up up 
GigabitEthernet0/0/1 209.165.200.225 YES manual up up 
Vlan1 unassigned YES unset administratively down down 
R1#  show ipv6 interface brief
GigabitEthernet0/0/0 [up/up]
FE80::201:C9FF:FE89:4501
2001:DB8:ACAD:10::1
GigabitEthernet0/0/1 [up/up]
FE80::201:C9FF:FE89:4502
2001:DB8:FEED:224::1
Vlan1 [administratively down/down]
unassigned 
R1#
</code></pre>
<hr>
<h3 id="配置验证命令"><a href="#配置验证命令" class="headerlink" title="配置验证命令"></a>配置验证命令</h3><p>此表总结了用于验证接口配置的更常用 show 命令。</p>
<table>
<thead>
<tr>
<th align="left">命令</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>show ip interface brief</strong> / <strong>show ipv6 interface brief</strong></td>
<td align="left">所有接口的输出显示,它们的IP地址和 当前的状态已配置和连接的接口的 状态和协议均会显示“up”; 显示任何其他内容都可能表示配置或 布线出现了问题。</td>
</tr>
<tr>
<td align="left"><strong>show ip route</strong> / <strong>show ipv6 route</strong></td>
<td align="left">显示存储在 RAM 中的 IP 路由表的内容。</td>
</tr>
<tr>
<td align="left"><strong>show interfaces</strong></td>
<td align="left">显示设备上所有接口的统计信息。然而,这个命令将只显示 IPv4 编址信息。</td>
</tr>
<tr>
<td align="left"><strong>show ip interface</strong></td>
<td align="left">显示路由器上所有接口的 IPv4 统计信息。</td>
</tr>
<tr>
<td align="left"><strong>show ipv6 interface</strong></td>
<td align="left">显示路由器上所有接口的 IPv6 统计信息。</td>
</tr>
</tbody></table>
<hr>
<h3 id="配置默认网关-主机的默认网关"><a href="#配置默认网关-主机的默认网关" class="headerlink" title="配置默认网关 - 主机的默认网关"></a>配置默认网关 - 主机的默认网关</h3><p>如果您的本地网络只有一个路由器，它就将是网关路由器，并且必须使用此信息配置网络上的所有主机和交换机。如果您的本地网络有多个路由器，则必须选择其中一个作为默认网关路由器。本主题介绍如何在主机和交换机上配置默认网关。</p>
<p>对于通过网络通信的终端设备，必须配置正确的 IP 地址信息，包括默认网关地址。当主机要将数据包发送到另一个网络设备时，才会使用默认网关。默认网关地址通常是连接主机本地网络的路由器接口地址。主机设备的 IP 地址和路由器接口地址必须位于同一网络。</p>
<p>例如，假设 IPv4 网络拓扑由一个路由器连接两个不同的 LAN 组成。G0/0/0 连接到网络 192.168.10.0，G0/0/1 连接到网络 192.168.11.0。每台主机设备均配置有相应的默认网关地址。</p>
<p>在此示例中，如果 PC1 向 PC2 发送数据包，则不使用默认网关。相反，PC1 将 PC2 的 IP 地址指定给数据包，然后通过交换机将该数据包直接转发给 PC2。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/8_3_1.png">

<p>如果 PC1 向 PC3 发送数据包，该怎么办？PC1 将 PC3 的 IPv4 地址指定给数据包，但会将数据包转发到其默认网关，即 R1 的 G0/0/0 接口。路由器接受数据包，访问其路由表，以确定G0/0/1是基于目标地址的适当出口接口。然后 R1 将数据包转发出相应的接口以达到 PC3。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/8_3_2.png">

<p>IPv6 网络上也会发生相同的过程，尽管拓扑中未显示此过程。设备将使用本地路由器的 IPv6 地址作为其默认网关。</p>
<hr>
<h3 id="配置默认网关-交换机的默认网关"><a href="#配置默认网关-交换机的默认网关" class="headerlink" title="配置默认网关 - 交换机的默认网关"></a>配置默认网关 - 交换机的默认网关</h3><p>连接客户端计算机的交换机通常是第 2 层设备。因此，第 2 层交换机不需要使用 IP 地址就能正常工作。但是，可以在交换机上配置 IP 配置，以便管理员能够远程访问交换机。</p>
<p>要通过本地 IP 网络连接和管理交换机，必须配置交换机虚拟接口 (SVI)。SVI 配置了本地局域网上的 IPv4 地址和子网掩码。要从远端网络管理交换机，必须给交换机配置一个默认网关。</p>
<p>在会通过本地网络之外的方式通信的所有设备上，一般都会配置默认网关地址。</p>
<p>要为交换机配置默认网关，请使用ip default-gateway ip-address 全局配置命令。配置的 IP 地址是连接到交换机的本地路由器接口的 IP 地址。</p>
<p>图中显示了管理员正在建立到另一个网络上的交换机 S1 的远程连接。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/8_4.png">

<p>在此示例中，管理员主机将使用其默认网关将数据包发送到 R1 的 G0/0/1 接口。R1 会将数据包从其 G0/0/0 接口转发到 S1。由于数据包源 IPv4 地址来自另一个网络，因此 S1 需要默认网关才能将数据包转发到 R1 的 G0/0/0 接口。因此，S1必须配置默认网关才能够应答并建立与管理主机的 SSH 连接。</p>
<p>注意: 来自与交换机相连的主机计算机的数据包必须在主机计算机操作系统上配置默认网关地址。</p>
<p>也可以使用 SVI 上的 IPv6 地址配置工作组交换机。但是，交换机不需要手动配置默认网关的 IPv6 地址。交换机将自动接收来自路由器的 ICMPv6 路由器公告消息的默认网关。</p>
<hr>
<h3 id="总结-4"><a href="#总结-4" class="headerlink" title="总结"></a>总结</h3><ul>
<li>配置初始路由器设置</li>
</ul>
<blockquote>
<p>在路由器上配置初始设置时，应完成以下任务。</p>
</blockquote>
<ol>
<li>配置设备名称。</li>
<li>保护特权模式。</li>
<li>保护用户模式。</li>
<li>保护远程 Telnet / SSH 访问。</li>
<li>保护配置文件中的所有密码。</li>
<li>提供法律通知。</li>
<li>保存配置。</li>
</ol>
<ul>
<li>配置接口</li>
</ul>
<blockquote>
<p>要使路由器可访问，必须配置路由器接口。思科 ISR 4321 路由器配备了两个千兆以太网接口：千兆以太网 0/0/0（G0/0/0）和千兆以太网 0/0/1（G0/0/1）。配置路由器接口的任务与交换机上管理 SVI 非常相似。使用 no shutdown 命令会激活界面。接口还必须连接到另一台设备（交换机或路由器），才能使物理层处于活动状态。有多条命令可用于检验接口配置，包括了show ip interface brief和show ipv6 interface brief，show ip route和show ipv6 route，以及show interfaces、show ip interface和show ipv6 interface.。</p>
</blockquote>
<ul>
<li>配置默认网关</li>
</ul>
<blockquote>
<p>对于通过网络通信的终端设备，必须配置正确的 IP 地址信息，包括默认网关地址。默认网关地址通常是连接主机本地网络的路由器接口地址。主机设备的 IP 地址和路由器接口地址必须位于同一网络。要通过本地 IP 网络连接和管理交换机，必须配置交换机虚拟接口 (SVI)。SVI 配置了本地局域网上的 IPv4 地址和子网掩码。要从远端网络管理交换机，必须给交换机配置一个默认网关。要为交换机配置默认网关，请使用ip default-gateway ip-addressIP地址全局配置命令。使用连接到交换机的本地路由器接口的IPv4地址。</p>
</blockquote>
<hr>
<h2 id="IPv4编址"><a href="#IPv4编址" class="headerlink" title="IPv4编址"></a><a href="https://phoenixnest.github.io/School-Computer-Network-Technology-IPv4/">IPv4编址</a></h2><hr>
<h2 id="IPv6编址"><a href="#IPv6编址" class="headerlink" title="IPv6编址"></a><a href="https://phoenixnest.github.io/School-Computer-Network-Technology-IPv6/">IPv6编址</a></h2><hr>
<h2 id="ICMP-消息"><a href="#ICMP-消息" class="headerlink" title="ICMP 消息"></a>ICMP 消息</h2><h3 id="主机可接通性"><a href="#主机可接通性" class="headerlink" title="主机可接通性"></a>主机可接通性</h3><p>ICMP Echo消息可用于测试 IP 网络上主机的可达性。本地主机向一台主机发送 ICMP Echo请求。如果主机可用，目的主机会回应以Echo应答。<code>使用 ICMP Echo消息是ping实用程序的基础</code>。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_1_1.png" alt="H1 向 H2 发送 Echo 请求，询问 H2 是否可达"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_1_2.png" alt="Echo 请求消息转发"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_1_3.png" alt="H2 接收到 H1 发送的 Echo 请求，并发送 Echo 应答消息"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_1_4.png" alt="Echo 应答消息转发"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_1_5.png" alt="H1 收到 H2 的 Echo 应答"></p>
<hr>
<h3 id="目的地或服务不可达"><a href="#目的地或服务不可达" class="headerlink" title="目的地或服务不可达"></a>目的地或服务不可达</h3><p>当主机或网关收到无法传送的数据包时，它会使用 ICMP 目的地不可达消息通知源主机，目的地或服务无法到达。消息包括指示数据包为何无法传送的代码。</p>
<blockquote>
<p>ICMPv4 的目的地不可达代码示例有：</p>
</blockquote>
<ul>
<li><p><strong>0</strong> - <strong>网络</strong>不可达。</p>
</li>
<li><p><strong>1</strong> - <strong>主机</strong>不可达。</p>
</li>
<li><p><strong>2</strong> - <strong>协议</strong>不可达。</p>
</li>
<li><p><strong>3</strong> - <strong>端口</strong>不可达。</p>
</li>
</ul>
<blockquote>
<p>ICMPv6 的目的地不可达代码示例有：</p>
</blockquote>
<ul>
<li><p><strong>0</strong> - 没有通往目标的路由。</p>
</li>
<li><p><strong>1</strong> - 管理上禁止与目的地通信（例如防火墙）。</p>
</li>
<li><p><strong>2</strong> - 超出源地址的范围。</p>
</li>
<li><p><strong>3</strong> - 地址无法访问。</p>
</li>
<li><p><strong>4</strong> - 端口不可达。</p>
</li>
</ul>
<p>注意: ICMPv6 的目的地不可达消息代码与此类似，但稍有不同。</p>
<hr>
<h3 id="超时"><a href="#超时" class="headerlink" title="超时"></a>超时</h3><blockquote>
<p>路由器使用 <strong>ICMPv4</strong> 超时消息表明，因为数据包的生存时间（TTL，Time To Live）字段递减到 0 而不能转发该数据包。<strong>如果路由器接收数据包并且将 IPv4 数据包的 TTL 字段的值递减为零，则它会丢弃数据包并向源主机发送超时消息</strong>。</p>
</blockquote>
<blockquote>
<p>如果路由器因数据包过期而无法转发 IPv6 数据包，<strong>ICMPv6</strong> 也会发送超时消息。<strong>ICMPv6使用IPv6跳数限制字段来确定数据包是否已过期，而不是IPv4 TTL字段</strong>。</p>
</blockquote>
<p>注意: <code>traceroute 跟踪路由工具使用超时消息</code>。</p>
<hr>
<h3 id="ICMPv6-消息"><a href="#ICMPv6-消息" class="headerlink" title="ICMPv6 消息"></a>ICMPv6 消息</h3><p>在 ICMPv6 中发现的信息和错误消息非常类似于 ICMPv4 的控制和错误消息。但是，ICMPv6 拥有 ICMPv4 中所没有的新特性和功能提升。ICMPv6 消息封装在 IPv6 中。</p>
<p>ICMPv6 在邻居发现协议（ND 或 NDP）中包括四个新协议。</p>
<p>IPv6 路由器和 IPv6 设备之间的消息传递，包括动态地址分配如下所示：</p>
<ul>
<li><p><strong>路由器请求 (RS) 消息</strong></p>
</li>
<li><p><strong>路由器通告 (RA) 消息</strong></p>
</li>
</ul>
<p>IPv6 设备之间的消息传递，包括重复的地址检测和地址解析如下所示：</p>
<ul>
<li><p><strong>邻居请求 (NS) 消息</strong></p>
</li>
<li><p><strong>邻居通告 (NA) 消息</strong></p>
</li>
</ul>
<p>注意: ICMPv6 ND 还包括重定向消息，与 ICMPv4 中使用的重定向消息功能相似。</p>
<hr>
<p><strong>RA 消息</strong></p>
<blockquote>
<p>启用IPv6的路由器每200秒发送RA消息，向启用IPv6的主机提供编址信息。RA 消息中可以包含主机的编址信息，例如前缀、前缀长度、DNS 地址和域名。使用 SLAAC 的主机会将其默认网关设置为发送 RA 的路由器的本地链路地址。</p>
</blockquote>
<p>R1 向 FF02 发送 RA 路由器广告消息：1 将达到 PC1 的全节点组播地址。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_4_1.png">

<hr>
<p><strong>RS 消息</strong></p>
<blockquote>
<p>启用IPv6 的路由器还会发送 RA 消息以响应 RS 消息。在图中，PC1 发送 RS 消息以确定如何动态接收其 IPv6 地址信息。</p>
</blockquote>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_4_2.png">

<hr>
<p><strong>NS 消息</strong></p>
<p>当设备分配有全局IPv6单播或本地链路单播地址时，则建议对地址执行 重复检测（DAD） 来确保IPv6地址的唯一性。</p>
<blockquote>
<p>如图所示，要检查地址的唯一性，设备将发送 NS 信息，其中使用自身 IPv6 地址作为目标 IPv6 地址。</p>
</blockquote>
<p>如果网络中的其他设备具有该地址，则会使用 NA 消息进行响应。此 NA 消息通知发送方设备地址已在使用。如果回应的 NA 消息未在固定的一段时间返回，则单播地址是唯一的，可以使用。</p>
<p>注意: DAD 不是必需的，但是 RFC 4861 建议对单播地址执行 DAD。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_4_3.png">

<hr>
<p><strong>NA 消息</strong></p>
<p>当 LAN 上的设备知道目的 IPv6 单播地址，但不知道其以太网 MAC 地址时，会使用地址解析。</p>
<blockquote>
<p>要确定目的 MAC 地址，设备会将 NS 消息发送到请求节点地址。该消息包括已知（目标）IPv6 地址。具有目标 IPv6 地址的设备会使用包含其以太网 MAC 地址的 NA 消息进行回应。</p>
</blockquote>
<p>在图中，R1向2001:db8:acad:1::10发送一条NS消息，询问它的MAC地址。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_4_4.png">

<hr>
<h3 id="Ping-测试连接性"><a href="#Ping-测试连接性" class="headerlink" title="Ping 测试连接性"></a>Ping 测试连接性</h3><p>Ping 是一种测试程序，它使用 ICMP Echo请求和Echo应答消息来测试主机之间的连接。</p>
<p>为了测试与网络上的另一台主机的连接，可使用 ping 命令将回应请求发送给该主机地址。若指定地址处的主机收到回应请求，便会使用Echo应答进行响应。每收到一个Echo应答，ping都会提供发出请求与收到应答的时间反馈。这可以作为网络性能的度量。</p>
<p>Ping 对响应规定了超时值。如果在超时前没有收到应答，ping 会提供一条消息，表示未收到响应。这可能表示存在问题，但是，还可能表示在网络上启用了阻止 ping 消息的安全功能。如果在发送ICMP Echo请求之前需要执行地址解析(ARP或ND)，那么第一次ping通常会超时。</p>
<p>所有请求发送完毕后，ping实用程序会提供摘要，包括成功率和到达目的地的平均往返时间。</p>
<p>使用ping进行的连通性测试的类型包括:</p>
<ul>
<li><p><strong>Ping 本地环回</strong></p>
</li>
<li><p><strong>向默认网关发出 ping 命令</strong></p>
</li>
<li><p><strong>Ping 远程主机</strong></p>
</li>
</ul>
<hr>
<h3 id="对环回执行-ping-命令"><a href="#对环回执行-ping-命令" class="headerlink" title="对环回执行 ping 命令"></a>对环回执行 ping 命令</h3><p>Ping可用于测试本地主机上IPv4或IPv6的内部配置。要执行此测试，对于 IPv4，我们ping本地环回地址 127.0.0.1，对于 IPv6，则是 ::1。</p>
<p>从 127.0.0.1 接收的 IPv4 响应或从 ::1 接收的 IPv6 响应，表示主机上的 IP 安装正确。此响应来自网络层。但是，此响应并不代表地址、掩码或网关配置正确。它也不能说明有关网络协议栈下层的任何状态。它只测试 IP 网络层的 IP 连接。如果收到错误消息，则表示该主机上的 TCP/IP 无法正常运行。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_6.png">

<hr>
<h3 id="向默认网关发出-ping-命令"><a href="#向默认网关发出-ping-命令" class="headerlink" title="向默认网关发出 ping 命令"></a>向默认网关发出 ping 命令</h3><p>您也可以使用ping 测试主机在本地网络中通信的能力。这通常是通过 ping 主机网关 IP 地址完成的。成功 ping通网关表示主机和充当网关的路由器接口在本地网络中均运行正常。</p>
<p>对于此测试，最常用的是网关地址，因为路由器在一般情况下始终都能正常运行。如果网关地址不响应，可以将ping发送到本地网络上已知能够正常运行的另一台主机的 IP 地址。</p>
<p>如果网关或另一台主机做出响应，则说明本地主机可以通过本地网络成功通信。如果网关不响应但其另一台主机响应，可能说明充当网关的路由器接口存在问题。</p>
<p>一种可能性是在主机上配置了错误的网关地址。另一种可能原因是路由器接口完全正常，但对其采取了阻止其处理或响应 ping 请求的安全限制。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_7.png">

<hr>
<h3 id="Ping-远程主机"><a href="#Ping-远程主机" class="headerlink" title="Ping 远程主机"></a>Ping 远程主机</h3><blockquote>
<p>Ping 也可用于测试本地主机跨互联网通信的能力。本地主机可以 ping 远程网络中运行正常的 IPv4 主机。路由器使用其 IP 路由表转发数据包。</p>
<blockquote>
<p>如果 ping 成功，则说明网际网络大部分运行正常。在互联网络上成功 ping通即确认本地网络上的通信正常，充当网关的路由器运行正常，且可能位于本地网络和远程主机网络之间路径上的所有其他路由器运行正常。</p>
</blockquote>
</blockquote>
<p>此外，还可以验证远程主机的功能。如果远程主机无法在其本地网络外通信，则它不会响应。</p>
<p>注意:<code>许多网络管理员限制或禁止 ICMP 消息进入企业网络；因此，没有收到ping响应可能是由于安全限制</code>。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_8.gif">

<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_8_1.png" alt="本地主机向另一远程主机发送 ping 请求"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_8_2.png" alt="交换机检查 IPv4 数据包，转发远程请求数据包"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_8_3.png" alt="远程路由器检查 IPv4 数据包，转发远程请求数据包"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_8_4.png" alt="远程交换机检查 IPv4 数据包，转发远程请求数据包"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_8_5.png" alt="远程主机接收 ping 请求，并做出应答"></p>
<blockquote>
<p>应答顺序与请求顺序一致，但方向相反。例：顺着网线来打你</p>
</blockquote>
<hr>
<h3 id="Traceroute-测试路径"><a href="#Traceroute-测试路径" class="headerlink" title="Traceroute - 测试路径"></a>Traceroute - 测试路径</h3><p>Ping 用于测试两台主机之间的连接，但是不提供关于主机之间设备的详细信息。</p>
<blockquote>
<p>Traceroute tracert实用程序可以生成通信路径上成功到达的设备列表。此列表可以提供重要的验证和故障排除信息。如果数据到达目的地，则 Trace 就会列出主机之间的路径中每台路由器上的接口。如果数据在沿途的某一跳上失败，则回应 Trace 的最后一个路由器的地址可以提供指示，说明发现问题或有安全限制的地方。</p>
</blockquote>
<ul>
<li>往返时间</li>
</ul>
<blockquote>
<p>Traceroute 可提供沿路径每一跳的往返时间并指示是否有某一跳未响应。往返时间是数据包到达远程主机以及从该主机返回响应所花费的时间。星号 (*) 用于表示丢失的或无应答的数据包。</p>
<blockquote>
<p>此信息可用于在路径中定位有问题的路由器，或表示路由器配置为不应答。如果显示器显示特定的某一跳响应时间长或数据丢失，这表示该路由器的资源或其连接可能压力过大。</p>
</blockquote>
</blockquote>
<ul>
<li>IPv4 TTL 和 IPv6 跳数限制</li>
</ul>
<blockquote>
<p>Traceroute 使用第 3 层报头中的 IPv4 TTL 字段功能和 IPv6 跳数限制字段功能以及 ICMP 超时消息。</p>
</blockquote>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_9.gif">

<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_9_1.png" alt="本地主机向另一远程主机发送 traceroute 请求"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_9_2.png" alt="交换机检查数据包，转发 traceroute 数据包"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_9_3.png" alt="远程路由器检查 traceroute 数据包，但 ICMP 处理超时"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_9_4.png" alt="远程路由器检查 traceroute 数据包，返回超时信息"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_9_5.png" alt="交换机转发超时数据包，终端打印信息，并结束一次数据包生命"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/11_9_5.png" alt="当数据包成功传输到远端时，远端设备将响应 ICMP Echo 并做出应答，返回本地设备"></p>
<blockquote>
<p>从 Traceroute 发送的第一个消息序列的 TTL 字段值为 1。这会导致此 TTL 使 IPv4 数据包在第一台路由器处超时。该路由器使用 ICMPv4 超时消息作为响应。现在，<code>Traceroute 知道了第一跳的地址</code>。</p>
</blockquote>
<blockquote>
<p>随后，Traceroute 逐渐增加每个消息系列的 TTL 字段值（2、3、4…）。这可为 Trace 提供数据包在该路径沿途再次超时所经过的每一跳的地址。TTL 字段的值将不断增加，直至到达目的主机或增至预定义的最大值。</p>
</blockquote>
<blockquote>
<p>到达最终目的主机后，该主机将不再以 ICMP 超时消息做出应答，而会以 ICMP 端口无法到达消息或 ICMP Echo应答消息做出应答。</p>
</blockquote>
<hr>
<h3 id="总结-5"><a href="#总结-5" class="headerlink" title="总结"></a>总结</h3><ul>
<li>ICMP消息</li>
</ul>
<blockquote>
<p>TCP/IP 套件在与其他 IP 设备通信时提供错误消息和信息性消息。这些消息使用 ICMP 发送。这些消息的目的是提供有关在一定条件下处理IP数据包的相关问题的反馈。ICMP消息对于ICMPv4和ICMPv6来说都是通用的，包括主机连通性、目的地或服务不可达以及超时。ICMP Echo消息测试 IP 网络上主机的可达性。本地主机向一台主机发送 ICMP Echo请求。如果主机可用，目的主机会回应以Echo应答。这是 ping 实用程序的基础。当主机或网关收到无法传送的数据包时，它会使用 ICMP 目的地不可达消息通知源主机。消息包括指示数据包为何无法传送的代码。路由器使用 ICMPv4 超时消息表明，因为数据包的生存时间 (TTL) 字段递减到零而不能转发该数据包。如果路由器接收数据包并且将TTL 字段的值递减为零，则它会丢弃数据包并向源主机发送超时消息。ICMPv6 还会在这种情况下发送超时。ICMPv6使用IPv6跳数限制字段来确定数据包是否已过期。traceroute工具使用超时消息。IPv6 路由器和 IPv6 设备之间的消息（包括动态地址分配）包括 RS 和 RA。IPv6 设备之间的消息包括重定向（类似于 IPv4）、NS 和 NA。</p>
</blockquote>
<ul>
<li>Ping和Traceroute测试</li>
</ul>
<blockquote>
<p>Ping 使用 ICMP Echo请求和Echo应答消息来测试主机之间的连接。为了测试与网络上的另一台主机的连接，可使用 ping 命令将Echo请求发送给该主机地址。若指定地址处的主机收到回应请求，便会使用Echo应答进行响应。每收到一个Echo应答，ping 都会提供发出请求与收到应答的时间反馈。所有请求发送完毕后，ping 实用程序会提供摘要，包括成功率和到达目的地的平均往返时间。Ping可用于测试本地主机上IPv4或IPv6的内部配置。Ping 本地环回地址 127.0.0.1，对于 IPv6，则是 ::1。用 ping 命令通过 ping 主机默认网关的 IP 地址来测试主机在本地网络上进行通信的能力。成功 ping通网关表示主机和充当网关的路由器接口在本地网络中均运行正常。Ping 也可用于测试本地主机跨网际网络通信的能力。本地主机可以ping 远程网络中运行正常的 IPv4 主机。Traceroute (tracert) 可以生成通信路径上成功到达的跳数列表。此列表提供了验证和故障排除信息。如果数据到达目的地，则 Trace 就会列出主机之间的路径中每台路由器上的接口。如果数据在沿途的某一跳上失败，则回应 Trace 的最后一个路由器的地址可以提供指示，说明发现问题或有安全限制的地方。往返时间是数据包到达远程主机以及从该主机返回响应所花费的时间。Traceroute 使用第 3 层报头中的 IPv4 TTL 字段功能和 IPv6 跳数限制字段功能以及 ICMP 超时消息。</p>
</blockquote>
<hr>
<h2 id="传输层（第-4-层）"><a href="#传输层（第-4-层）" class="headerlink" title="传输层（第 4 层）"></a><a href="https://phoenixnest.github.io/School-Computer-Network-Technology-4-Transport-Layer/">传输层（第 4 层）</a></h2><hr>
<h2 id="会话层（第-5-层）"><a href="#会话层（第-5-层）" class="headerlink" title="会话层（第 5 层）"></a>会话层（第 5 层）</h2><blockquote>
<p>顾名思义，会话层的功能就是创建并维护源应用程序和目的应用程序之间的对话。会话层用于处理信息交换，发起对话并使其处于活动状态，并在对话中断或长时间处于空闲状态时重启会话。</p>
</blockquote>
<hr>
<h2 id="表示层（第-6-层）"><a href="#表示层（第-6-层）" class="headerlink" title="表示层（第 6 层）"></a>表示层（第 6 层）</h2><p>表示层具有三个主要功能：</p>
<ul>
<li><p><strong>将来自源设备的数据格式化或表示成兼容形式，以便目的设备接收。</strong></p>
</li>
<li><p><strong>采用可被目的设备解压缩的方式对数据进行压缩。</strong></p>
</li>
<li><p><strong>加密要传输的数据并在收到数据时解密数据。</strong></p>
</li>
</ul>
<p>如图所示，表示层为应用层格式化数据并制定文件格式标准。常见的视频标准包括Matroska视频(MKV)、活动图像专家组 (MPEG)和QuickTime视频(MOV)。常见图形图像格式为图形交换格式 (GIF)、联合图像专家组 (JPG) 和便携式网络图像 (PNG) 格式。</p>
<img src="https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Notes/Computer%20Network%20Technology/14.png">

<hr>
<h2 id="应用层（第-7-层）"><a href="#应用层（第-7-层）" class="headerlink" title="应用层（第 7 层）"></a><a href="https://phoenixnest.github.io/School-Computer-Network-Technology-7-Application-Layer/">应用层（第 7 层）</a></h2><hr>
<h2 id="网络安全基础"><a href="#网络安全基础" class="headerlink" title="网络安全基础"></a><a href="https://phoenixnest.github.io/School-Computer-Network-Technology-Cyber-Security/">网络安全基础</a></h2><hr>
<h2 id="Donate-☕️"><a href="#Donate-☕️" class="headerlink" title="Donate ☕️"></a>Donate ☕️</h2><p>如果你喜欢我的博文，可以通过下面的方式支持我，你的支持是我最大的动力 😘</p>
<p>转载时请注明出处 ©️PhoenixNest</p>
<table>
<thead>
<tr>
<th align="center">Donate 😇</th>
<th align="center">Qr code</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Wechat</td>
<td align="center"><img src="/img/wechat.png" alt="Wechat"></td>
</tr>
<tr>
<td align="center">Ali Pay</td>
<td align="center"><img src="/img/alipay.png" alt="Ali Pay"></td>
</tr>
</tbody></table>

            <!--[if lt IE 9]>
            <script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                   data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='https://cdn.jsdelivr.net/gh/PhoenixNest/ImageBed@master/Music/StarCraft Terran Band - Blood and Glory.mp3'></li>
                        
                    
                </ul>
            
            
            
            
                <div id="vcomments"></div>
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="/img/favicon.png" height=300 width=300></img>
                    <p>PhoenixNest</p>
                    <span>用实力让情怀落地</span>
                    
                </div>
                <ul>
                    <li><a href="/">25 <p>文章</p></a></li>
                    <li><a href="/categories">14 <p>分类</p></a></li>
                    <li><a href="/tags">22 <p>标签</p></a></li>
                </ul>
            </div>
            
                
                
                    <div class="box sticky animated fadeInRight faster">
                        <div id="toc" class="subbox">
                            <h4>目录</h4>
                            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">引言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BD%93%E4%BB%8A%E7%BD%91%E7%BB%9C"><span class="toc-number">2.</span> <span class="toc-text">当今网络</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%BD%B1%E5%93%8D%E7%9D%80%E6%88%91%E4%BB%AC%E7%9A%84%E7%94%9F%E6%B4%BB"><span class="toc-number">2.1.</span> <span class="toc-text">网络影响着我们的生活</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%BB%84%E4%BB%B6"><span class="toc-number">2.2.</span> <span class="toc-text">网络组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F%E5%92%8C%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91"><span class="toc-number">2.3.</span> <span class="toc-text">网络表示方式和网络拓扑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.4.</span> <span class="toc-text">常见网络类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Internet-%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.5.</span> <span class="toc-text">Internet 连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E7%BD%91%E7%BB%9C"><span class="toc-number">2.6.</span> <span class="toc-text">可靠网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%B6%8B%E5%8A%BF"><span class="toc-number">2.7.</span> <span class="toc-text">网络趋势</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8"><span class="toc-number">2.8.</span> <span class="toc-text">网络安全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">2.9.</span> <span class="toc-text">安全解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">2.10.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E5%92%8C%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">协议和模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%84%E5%88%99"><span class="toc-number">3.1.</span> <span class="toc-text">规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.</span> <span class="toc-text">协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E5%8A%9F%E8%83%BD"><span class="toc-number">3.3.</span> <span class="toc-text">协议功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E7%B0%87"><span class="toc-number">3.4.</span> <span class="toc-text">协议簇</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-IP-%E5%8D%8F%E8%AE%AE%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.5.</span> <span class="toc-text">TCP&#x2F;IP 协议示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-IP-%E5%8D%8F%E8%AE%AE%E7%B0%87"><span class="toc-number">3.6.</span> <span class="toc-text">TCP&#x2F;IP 协议簇</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">3.7.</span> <span class="toc-text">应用层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">3.8.</span> <span class="toc-text">传输层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E5%B1%82"><span class="toc-number">3.9.</span> <span class="toc-text">互联网层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%85%A5%E5%B1%82"><span class="toc-number">3.10.</span> <span class="toc-text">网络接入层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E6%94%BE%E6%A0%87%E5%87%86"><span class="toc-number">3.11.</span> <span class="toc-text">开放标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E6%A0%87%E5%87%86%E7%BB%84%E7%BB%87"><span class="toc-number">3.12.</span> <span class="toc-text">互联网标准组织</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E5%92%8C%E9%80%9A%E4%BF%A1%E6%A0%87%E5%87%86%E7%BB%84%E7%BB%87"><span class="toc-number">3.13.</span> <span class="toc-text">电子和通信标准组织</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.14.</span> <span class="toc-text">参考模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OSI-%E6%A8%A1%E5%9E%8B%E4%B8%8E-TCP-IP-%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">3.15.</span> <span class="toc-text">OSI 模型与 TCP&#x2F;IP 模型的比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%B0%81%E8%A3%85"><span class="toc-number">3.16.</span> <span class="toc-text">数据封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE"><span class="toc-number">3.17.</span> <span class="toc-text">数据访问</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%88%E7%AC%AC3%E5%B1%82%EF%BC%89%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80"><span class="toc-number">3.18.</span> <span class="toc-text">网络层（第3层）逻辑地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E4%B8%80%E7%BD%91%E7%BB%9C%EF%BC%88%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%89%E4%B8%AD%E7%9A%84%E8%AE%BE%E5%A4%87"><span class="toc-number">3.19.</span> <span class="toc-text">同一网络（局域网）中的设备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%88%E7%AC%AC2%E5%B1%82%EF%BC%89%E5%9C%B0%E5%9D%80%E7%9A%84%E4%BD%9C%E7%94%A8%EF%BC%9A%E7%9B%B8%E5%90%8C%E7%9A%84-IP-%E7%BD%91%E7%BB%9C%EF%BC%88%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%89"><span class="toc-number">3.20.</span> <span class="toc-text">数据链路层（第2层）地址的作用：相同的 IP 网络（局域网）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E5%9C%B0%E5%9D%80%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">3.21.</span> <span class="toc-text">网络层地址的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%9C%B0%E5%9D%80%E7%9A%84%E4%BD%9C%E7%94%A8%EF%BC%9A%E4%B8%8D%E5%90%8C%E7%9A%84IP%E7%BD%91%E7%BB%9C"><span class="toc-number">3.22.</span> <span class="toc-text">数据链路层地址的作用：不同的IP网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%88%E7%AC%AC2%E5%B1%82%EF%BC%89%E5%9C%B0%E5%9D%80"><span class="toc-number">3.23.</span> <span class="toc-text">数据链路层（第2层）地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">3.24.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%EF%BC%88%E7%AC%AC-1-%E5%B1%82%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">物理层（第 1 层）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%88%E7%AC%AC-2-%E5%B1%82%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">数据链路层（第 2 层）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2"><span class="toc-number">6.</span> <span class="toc-text">以太网交换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B0%81%E8%A3%85"><span class="toc-number">6.1.</span> <span class="toc-text">以太网封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%AD%90%E5%B1%82"><span class="toc-number">6.2.</span> <span class="toc-text">数据链路子层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MAC-%E5%AD%90%E5%B1%82"><span class="toc-number">6.3.</span> <span class="toc-text">MAC 子层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7%E5%AD%97%E6%AE%B5"><span class="toc-number">6.4.</span> <span class="toc-text">以太网帧字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MAC-%E5%9C%B0%E5%9D%80%E5%92%8C%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6"><span class="toc-number">6.5.</span> <span class="toc-text">MAC 地址和十六进制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91-MAC-%E5%9C%B0%E5%9D%80"><span class="toc-number">6.6.</span> <span class="toc-text">以太网 MAC 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%A7%E5%A4%84%E7%90%86"><span class="toc-number">6.7.</span> <span class="toc-text">帧处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E6%92%AD-MAC-%E5%9C%B0%E5%9D%80"><span class="toc-number">6.8.</span> <span class="toc-text">单播 MAC 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD-MAC-%E5%9C%B0%E5%9D%80"><span class="toc-number">6.9.</span> <span class="toc-text">广播 MAC 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E6%92%AD-MAC-%E5%9C%B0%E5%9D%80"><span class="toc-number">6.10.</span> <span class="toc-text">组播 MAC 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MAC-%E5%9C%B0%E5%9D%80%E8%A1%A8-%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">6.11.</span> <span class="toc-text">MAC 地址表 - 交换机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%AD%A6%E4%B9%A0%E5%92%8C%E8%BD%AC%E5%8F%91"><span class="toc-number">6.12.</span> <span class="toc-text">交换机学习和转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E5%B8%A7"><span class="toc-number">6.13.</span> <span class="toc-text">过滤帧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E8%BF%9E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%B8%8A%E7%9A%84-MAC-%E5%9C%B0%E5%9D%80%E8%A1%A8"><span class="toc-number">6.14.</span> <span class="toc-text">相连交换机上的 MAC 地址表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%B8%A7%E5%8F%91%E9%80%81%E5%88%B0%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3"><span class="toc-number">6.15.</span> <span class="toc-text">将帧发送到默认网关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%9D%E7%A7%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%B8%8A%E7%9A%84%E5%B8%A7%E8%BD%AC%E5%8F%91%E6%96%B9%E6%B3%95"><span class="toc-number">6.16.</span> <span class="toc-text">思科交换机上的帧转发方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E9%80%9A%E4%BA%A4%E6%8D%A2"><span class="toc-number">6.17.</span> <span class="toc-text">直通交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%B8%8A%E7%9A%84%E5%86%85%E5%AD%98%E7%BC%93%E5%86%B2"><span class="toc-number">6.18.</span> <span class="toc-text">交换机上的内存缓冲</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8C%E5%B7%A5%E5%92%8C%E9%80%9F%E7%8E%87%E8%AE%BE%E7%BD%AE"><span class="toc-number">6.19.</span> <span class="toc-text">双工和速率设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Auto-MDIX"><span class="toc-number">6.20.</span> <span class="toc-text">Auto-MDIX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">6.21.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%88%E7%AC%AC-3-%E5%B1%82%EF%BC%89"><span class="toc-number">7.</span> <span class="toc-text">网络层（第 3 层）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90"><span class="toc-number">8.</span> <span class="toc-text">地址解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E4%B8%80%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E7%9B%AE%E7%9A%84%E5%9C%B0"><span class="toc-number">8.1.</span> <span class="toc-text">同一网络中的目的地</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E7%9B%AE%E7%9A%84%E5%9C%B0"><span class="toc-number">8.2.</span> <span class="toc-text">远程网络中的目的地</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP%E6%A6%82%E8%BF%B0"><span class="toc-number">8.3.</span> <span class="toc-text">ARP概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP-%E5%8A%9F%E8%83%BD"><span class="toc-number">8.4.</span> <span class="toc-text">ARP 功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP-%E8%AF%B7%E6%B1%82"><span class="toc-number">8.5.</span> <span class="toc-text">ARP 请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP-%E6%93%8D%E4%BD%9C-ARP-%E5%BA%94%E7%AD%94"><span class="toc-number">8.6.</span> <span class="toc-text">ARP 操作 - ARP 应答</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP-%E5%9C%A8%E8%BF%9C%E7%A8%8B%E9%80%9A%E4%BF%A1%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">8.7.</span> <span class="toc-text">ARP 在远程通信中的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E-ARP-%E8%A1%A8%E4%B8%AD%E5%88%A0%E9%99%A4%E6%9D%A1%E7%9B%AE"><span class="toc-number">8.8.</span> <span class="toc-text">从 ARP 表中删除条目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E4%B8%8A%E7%9A%84-ARP-%E8%A1%A8"><span class="toc-number">8.9.</span> <span class="toc-text">网络设备上的 ARP 表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP-%E9%97%AE%E9%A2%98-ARP%E5%B9%BF%E6%92%AD%E5%92%8CARP-%E6%AC%BA%E9%AA%97"><span class="toc-number">8.10.</span> <span class="toc-text">ARP 问题 - ARP广播和ARP 欺骗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IPv6-%E9%82%BB%E5%B1%85%E5%8F%91%E7%8E%B0"><span class="toc-number">8.11.</span> <span class="toc-text">IPv6 邻居发现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IPv6-%E9%82%BB%E5%B1%85%E5%8F%91%E7%8E%B0%E6%B6%88%E6%81%AF"><span class="toc-number">8.12.</span> <span class="toc-text">IPv6 邻居发现消息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IPv6-%E9%82%BB%E5%B1%85%E5%8F%91%E7%8E%B0-%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90"><span class="toc-number">8.13.</span> <span class="toc-text">IPv6 邻居发现 - 地址解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-3"><span class="toc-number">8.14.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CISCO%E8%B7%AF%E7%94%B1%E5%99%A8%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">9.</span> <span class="toc-text">CISCO路由器基本配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%B7%AF%E7%94%B1%E5%99%A8%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4"><span class="toc-number">9.1.</span> <span class="toc-text">基本路由器配置步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="toc-number">9.2.</span> <span class="toc-text">路由器基本配置示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E5%99%A8%E6%8E%A5%E5%8F%A3"><span class="toc-number">9.3.</span> <span class="toc-text">配置路由器接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E5%99%A8%E6%8E%A5%E5%8F%A3%E7%A4%BA%E4%BE%8B"><span class="toc-number">9.4.</span> <span class="toc-text">配置路由器接口示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E9%AA%8C%E6%8E%A5%E5%8F%A3%E9%85%8D%E7%BD%AE"><span class="toc-number">9.5.</span> <span class="toc-text">检验接口配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%AA%8C%E8%AF%81%E5%91%BD%E4%BB%A4"><span class="toc-number">9.6.</span> <span class="toc-text">配置验证命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3-%E4%B8%BB%E6%9C%BA%E7%9A%84%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3"><span class="toc-number">9.7.</span> <span class="toc-text">配置默认网关 - 主机的默认网关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3"><span class="toc-number">9.8.</span> <span class="toc-text">配置默认网关 - 交换机的默认网关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-4"><span class="toc-number">9.9.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IPv4%E7%BC%96%E5%9D%80"><span class="toc-number">10.</span> <span class="toc-text">IPv4编址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IPv6%E7%BC%96%E5%9D%80"><span class="toc-number">11.</span> <span class="toc-text">IPv6编址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ICMP-%E6%B6%88%E6%81%AF"><span class="toc-number">12.</span> <span class="toc-text">ICMP 消息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E5%8F%AF%E6%8E%A5%E9%80%9A%E6%80%A7"><span class="toc-number">12.1.</span> <span class="toc-text">主机可接通性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E7%9A%84%E5%9C%B0%E6%88%96%E6%9C%8D%E5%8A%A1%E4%B8%8D%E5%8F%AF%E8%BE%BE"><span class="toc-number">12.2.</span> <span class="toc-text">目的地或服务不可达</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B6%85%E6%97%B6"><span class="toc-number">12.3.</span> <span class="toc-text">超时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ICMPv6-%E6%B6%88%E6%81%AF"><span class="toc-number">12.4.</span> <span class="toc-text">ICMPv6 消息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ping-%E6%B5%8B%E8%AF%95%E8%BF%9E%E6%8E%A5%E6%80%A7"><span class="toc-number">12.5.</span> <span class="toc-text">Ping 测试连接性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E7%8E%AF%E5%9B%9E%E6%89%A7%E8%A1%8C-ping-%E5%91%BD%E4%BB%A4"><span class="toc-number">12.6.</span> <span class="toc-text">对环回执行 ping 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3%E5%8F%91%E5%87%BA-ping-%E5%91%BD%E4%BB%A4"><span class="toc-number">12.7.</span> <span class="toc-text">向默认网关发出 ping 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ping-%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA"><span class="toc-number">12.8.</span> <span class="toc-text">Ping 远程主机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Traceroute-%E6%B5%8B%E8%AF%95%E8%B7%AF%E5%BE%84"><span class="toc-number">12.9.</span> <span class="toc-text">Traceroute - 测试路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-5"><span class="toc-number">12.10.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%EF%BC%88%E7%AC%AC-4-%E5%B1%82%EF%BC%89"><span class="toc-number">13.</span> <span class="toc-text">传输层（第 4 层）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E5%B1%82%EF%BC%88%E7%AC%AC-5-%E5%B1%82%EF%BC%89"><span class="toc-number">14.</span> <span class="toc-text">会话层（第 5 层）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E7%A4%BA%E5%B1%82%EF%BC%88%E7%AC%AC-6-%E5%B1%82%EF%BC%89"><span class="toc-number">15.</span> <span class="toc-text">表示层（第 6 层）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82%EF%BC%88%E7%AC%AC-7-%E5%B1%82%EF%BC%89"><span class="toc-number">16.</span> <span class="toc-text">应用层（第 7 层）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80"><span class="toc-number">17.</span> <span class="toc-text">网络安全基础</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Donate-%E2%98%95%EF%B8%8F"><span class="toc-number">18.</span> <span class="toc-text">Donate ☕️</span></a></li></ol>
                        </div>
                    </div>
                
            
        </div>
    </div>
</div>

    </div>
</div>
<div id="back-to-top" class="animated fadeIn faster">
    <div class="flow"></div>
    <span class="percentage animated fadeIn faster">0%</span>
    <span class="iconfont icon-top02 animated fadeIn faster"></span>
</div>
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2021
        <span class="gradient-text">
            PhoenixNest
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
    </p>
</footer>

    <script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <script>
        MathJax.Hub.Config({
            "HTML-CSS": {
                preferredFont: "TeX",
                availableFonts: ["STIX", "TeX"],
                linebreaks: {
                    automatic: true
                },
                EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
            },
            tex2jax: {
                inlineMath: [
                    ["$", "$"],
                    ["\\(", "\\)"]
                ],
                processEscapes: true,
                ignoreClass: "tex2jax_ignore|dno",
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
            },
            TeX: {
                noUndefined: {
                    attributes: {
                        mathcolor: "red",
                        mathbackground: "#FFEEEE",
                        mathsize: "90%"
                    }
                },
                Macros: {
                    href: "{}"
                }
            },
            messageStyle: "none"
        });
    </script>
    <script>
        function initialMathJax() {
            MathJax.Hub.Queue(function () {
                var all = MathJax.Hub.getAllJax(),
                    i;
                // console.log(all);
                for (i = 0; i < all.length; i += 1) {
                    console.log(all[i].SourceElement().parentNode)
                    all[i].SourceElement().parentNode.className += ' has-jax';
                }
            });
        }

        function reprocessMathJax() {
            if (typeof MathJax !== 'undefined') {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            }
        }
    </script>




<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>


<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>


<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>


<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>

  
<script src="/js/busuanzi.min.js"></script>

<script>
    $(document).ready(function () {
        if ($('span[id^="busuanzi_"]').length) {
            initialBusuanzi();
        }
    });
</script>
 
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">


<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
  

<script>
    function initialTyped() {
        var typedTextEl = $('.typed-text');
        if (typedTextEl && typedTextEl.length > 0) {
            var typed = new Typed('.typed-text', {
                strings: ['Let the feelings with the strength landing.', '用实力让情怀落地'],
                typeSpeed: 90,
                loop: true,
                loopCount: Infinity,
                backSpeed: 20,
            });
        }
    }

    if ($('.article-header') && $('.article-header').length) {
        $(document).ready(function () {
            initialTyped();
        });
    }
</script>

 
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
    var valine = new Valine();

    function initValine(path) {
        if (!path) path = window.location.pathname;
        let language = 'zh-CN';
        if (!language) {
            language = 'en';
        } else {
            language = language.toLowerCase();
        }
        valine.init({
            el: '#vcomments',
            appId: 'HDzkYOSz3NGcQuXbWMLin1mS-gzGzoHsz',
            appKey: 'pJ9JxbsY5D5aEmhxtCSNBlCT',
            notify: '',
            verify: '',
            avatar: '',
            placeholder: '温酒会知音.',
            visitor: 'true',
            path: path,
            lang: language,
        });
    }

    $(document).ready(function () {
        initValine();
    });
</script>



 <!-- 例：百度统计 --> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?your_code"; var s = document.getElementsByTagName("script")[0];  s.parentNode.insertBefore(hm, s); })(); </script> 

</html>
