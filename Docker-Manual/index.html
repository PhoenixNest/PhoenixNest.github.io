
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Docker - PhoenixNest&#39;s Blog</title>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate"/>
    
        <meta name="keywords" content="PhoenixNest,PhoenixNest&#39;s Blog,">
    
    
        <meta name="description" content="PhoenixNest&#39;s Blog • 用实力让情怀落地,引言
本篇整理了我学习Docker时的一些笔记。部署环境：Windows 10 Professional Workstation


Docker 是 PaaS 提供商 dotCloud 开源的一个,">
    
    
        <meta name="author" content="PhoenixNest">
    
    
        <link rel="alternative" href="atom.xml" title="PhoenixNest&#39;s Blog" type="application/atom+xml">
    
    
        <link rel="icon" href="/img/favicon.png">
    
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">

    
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">

    
<link rel="stylesheet" href="/css/obsidian.css">

    
<link rel="stylesheet" href="/css/ball-atom.min.css">

    
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="loading">
<div class="loader">
    <div class="la-ball-atom la-2x">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>
<span id="config-title" style="display:none">PhoenixNest&#39;s Blog</span>
<div id="loader"></div>
<div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/favicon.png" alt="" data-url="https://phoenixnest.github.io">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">Docker</h3>
        <div class="social">
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
                animation-delay: 600ms;
                animation-duration: 1.2s;
                background-image:
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(https://cdn.jsdelivr.net/gh/PhoenixNest/Blog-Repository@master/Notes/Docker/docker.jpg) ">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                    <a href="/categories/Cloud Serving"><b>「
                        </b>CLOUD SERVING<b> 」</b></a>
                
                三月 17, 2021
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/Docker-Manual/" title="Docker" class="">Docker</a>
            </h3>
            
                <p class="post-count animated fadeInDown">
                    
                        <span>
                    <b class="iconfont icon-text2"></b> <i>文章字数</i>
                    32k
                </span>
                    
                    
                        <span>
                    <b class="iconfont icon-timer__s"></b> <i>阅读约需</i>
                    57 mins.
                </span>
                    
                    
                        <span id="/Docker-Manual/" class="leancloud_visitors"
                              data-flag-title="Docker">
                    <b class="iconfont icon-read"></b> <i>阅读次数</i>
                    <span class="leancloud-visitors-count">0</span>
                </span>
                    
                    
                </p>
            
            
                <ul class="animated fadeInDown post-tags-list" itemprop="keywords"><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s">Beyond The World</span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><blockquote>
<p>本篇整理了我学习<code>Docker</code>时的一些笔记。<br>部署环境：Windows 10 Professional Workstation</p>
</blockquote>
<blockquote>
<p>Docker 是 PaaS 提供商 dotCloud 开源的一个基于 LXC 的高级容器引擎，源代码托管在 Github 上, 基于go语言并遵从Apache2.0协议开源。</p>
<p>Docker自2013年以来非常火热，无论是从 github 上的代码活跃度，还是Redhat在RHEL6.5中集成对Docker的支持, 就连 Google 的 Compute Engine 也支持 docker 在其之上运行。</p>
<ul>
<li><strong>环境管理复杂</strong> - 从各种OS到各种中间件到各种app, 一款产品能够成功作为开发者需要关心的东西太多，且难于管理，这个问题几乎在所有现代IT相关行业都需要面对。</li>
<li><strong>云计算时代的到来</strong> - AWS的成功, 引导开发者将应用转移到 cloud 上, 解决了硬件管理的问题，然而中间件相关的问题依然存在 (所以openstack HEAT和 AWS cloudformation 都着力解决这个问题)。开发者思路变化提供了可能性。</li>
<li><strong>虚拟化手段的变化</strong> - cloud 时代采用标配硬件来降低成本，采用虚拟化手段来满足用户按需使用的需求以及保证可用性和隔离性。然而无论是KVM还是Xen在 docker 看来,都在浪费资源，因为用户需要的是高效运行环境而非OS, GuestOS既浪费资源又难于管理, 更加轻量级的LXC更加灵活和快速。</li>
<li><strong>LXC的移动性</strong> - LXC在 linux 2.6 的 kernel 里就已经存在了，但是其设计之初并非为云计算考虑的，缺少标准化的描述手段和容器的可迁移性，决定其构建出的环境难于迁移和标准化管理(相对于KVM之类image和snapshot的概念)。docker 就在这个问题上做出实质性的革新。这是docker最独特的地方。</li>
</ul>
<p>面对上述几个问题，docker设想是交付运行环境如同海运，OS如同一个货轮，每一个在OS基础上的软件都如同一个集装箱，用户可以通过标准化手段自由组装运行环境，同时集装箱的内容可以由用户自定义，也可以由专业人员制造。这样，交付一个软件，就是一系列标准化组件的集合的交付，如同乐高积木，用户只需要选择合适的积木组合，并且在最顶端署上自己的名字( 最后一个标准化组件是用户的app )。这也就是基于docker的PaaS产品的原型。</p>
</blockquote>
<hr>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><h3 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h3><ul>
<li><p><a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://docs.docker.com/">Docker • Docs</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://docs.docker.com/get-docker/">Install Docker</a></p>
</li>
</ul>
<hr>
<h3 id="Docker-vs-VM"><a href="#Docker-vs-VM" class="headerlink" title="Docker vs VM"></a>Docker vs VM</h3><ul>
<li><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/48174633">Docker容器与虚拟机有什么区别？</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40576301/article/details/94482901">关于Docker与vm虚拟机的比较及优缺点</a></p>
</li>
</ul>
<blockquote>
<p><strong>优点</strong></p>
</blockquote>
<ul>
<li><p><strong>配置快</strong> - 提供独立的开发环境，便于开发， 由于 Docker 可以在各种各样的环境中使用，而基础架构不要求与应用程序的环境相关联，因此不存在兼容性问题。</p>
</li>
<li><p><strong>提高工作效率</strong> - 这是一种类似于集装箱的概念，在开发之初就将项目放到一个类似于集装箱的独立环境进行开发，到部署的时候只是部署集装箱环境，而集装箱环境已经被所有的系统指定了统一标准，不存在兼容问题，所以可以提高工作效率。</p>
</li>
<li><p><strong>应用隔离</strong> - Docker 提供用于在隔离环境中运行应用程序的容器。每个容器都是独立，并允许执行任何类型的应用程序，并且不存在入侵和病毒感染的问题，甚至可以使用沙箱进行病毒隔离。</p>
</li>
<li><p><strong>云集</strong> - 它是 Docker 容器的集群和调度工具。 Swarm 使用 Docker API作为其前端，这有助于我们使用各种工具来控制它。 它还可以将 Docker 主机集群控制为一个虚拟主机。 这是一个用于启用可插拔后端的自组织引擎组。</p>
</li>
<li><p><strong>路由网</strong> - 它能够将可用节点上已发布端口的传入请求路由到活动容器，实现连接。</p>
</li>
<li><p><strong>服务</strong> - 服务是允许指定集群内的容器状态的任务列表。 每个任务表示一个应该运行的容器的一个实例，并且 Swarm 在节点之间调度它们。</p>
</li>
<li><p><strong>安全管理</strong> - 安全性和管理应当是一个高优先级的考虑因素;企业用户不应再把它们当作应用程序迁移至容器的最后一步。反之，企业必须从一开始就做好安全性和管理的规划，把它们的功能纳入应用程序的开发过程中，并在应用程序运行过程中积极主动地关注这些方面。</p>
</li>
</ul>
<blockquote>
<p><strong>局限</strong></p>
</blockquote>
<ul>
<li><p>Docker 是基于 Linux64 bit的，<strong>无法</strong>在 32bit 的 Linux/Windows/unix环境下使用。</p>
</li>
<li><p>LXC 是基于 cgroup等 linux kernel 功能的，因此container的 guest 系统<strong>只能</strong>是 linux base 的。</p>
</li>
<li><p>隔离性相比KVM之类的虚拟化方案还是<strong>有些欠缺</strong>，所有 container 公用一部分的运行库。</p>
</li>
<li><p><strong>网络管理相对简单</strong>，主要是基于 namespace 隔离，cgroup 的 cpu 和 cpuset 提供的cpu功能相比 KVM 的等虚拟化方案相比难以度量（所以 Dotcloud 主要是按内存收费）。</p>
</li>
<li><p>Docker 对 disk 的<strong>管理比较有</strong>限，container 随着用户进程的停止而销毁，container 中的 log 等<strong>用户数据不便收集</strong>。</p>
</li>
</ul>
<hr>
<h3 id="Welcome-To-Docker"><a href="#Welcome-To-Docker" class="headerlink" title="Welcome To Docker"></a>Welcome To Docker</h3><pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker run hello-world

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
</code></pre>
<hr>
<h2 id="Docker-帮助命令"><a href="#Docker-帮助命令" class="headerlink" title="Docker 帮助命令"></a>Docker 帮助命令</h2><h3 id="docker-version"><a href="#docker-version" class="headerlink" title="docker version"></a>docker version</h3><blockquote>
<p>查看 Docker 版本信息。</p>
</blockquote>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker version
Client: Docker Engine - Community
 Cloud integration: 1.0.9
 Version:           20.10.5
 API version:       1.41
 Go version:        go1.13.15
 Git commit:        55c4c88
 Built:             Tue Mar  2 20:14:53 2021
 OS/Arch:           windows/amd64
 Context:           default
 Experimental:      true

Server: Docker Engine - Community
 Engine:
  Version:          20.10.5
  API version:      1.41 (minimum version 1.12)
  Go version:       go1.13.15
  Git commit:       363e9a8
  Built:            Tue Mar  2 20:15:47 2021
  OS/Arch:          linux/amd64
  Experimental:     false
......
</code></pre>
<hr>
<h3 id="docker-info"><a href="#docker-info" class="headerlink" title="docker info"></a>docker info</h3><blockquote>
<p>查看 Docker 信息。</p>
</blockquote>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker info
Client:
 Context:    default
 Debug Mode: false
 Plugins:
  app: Docker App (Docker Inc., v0.9.1-beta3)
  buildx: Build with BuildKit (Docker Inc., v0.5.1-docker)
  scan: Docker Scan (Docker Inc., v0.5.0)

Server:
 Containers: 2
  Running: 0
  Paused: 0
  Stopped: 2
 Images: 2
 Server Version: 20.10.5
 Storage Driver: overlay2
  Backing Filesystem: extfs
  Supports d_type: true
  Native Overlay Diff: true
 Logging Driver: json-file
 Cgroup Driver: cgroupfs
 Cgroup Version: 1
 Plugins:
  Volume: local
  Network: bridge host ipvlan macvlan null overlay
  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
 Swarm: inactive
 Runtimes: io.containerd.runc.v2 io.containerd.runtime.v1.linux runc
 Default Runtime: runc
 Init Binary: docker-init
 containerd version: 269548fa27e0089a8b8278fc4fc781d7f65a939b
 runc version: ff819c7e9184c13b7c2607fe6c30ae19403a7aff
 init version: de40ad0
 Security Options:
  seccomp
   Profile: default
 Kernel Version: 5.4.72-microsoft-standard-WSL2
 Operating System: Docker Desktop
 OSType: linux
 Architecture: x86_64
 CPUs: 6
 Total Memory: 12.44GiB
 Name: docker-desktop
 ID: LJH4:2VZK:AH4N:WRBD:A27I:KKRD:IWQP:C4ML:D753:TVQD:53ES:YECZ
 Docker Root Dir: /var/lib/docker
 Debug Mode: false
 Registry: https://index.docker.io/v1/
 Labels:
 Experimental: false
 Insecure Registries:
  127.0.0.0/8
 Registry Mirrors:
  https://w3z80w3y.mirror.aliyuncs.com/
  https://hub-mirror.c.163.com/
 Live Restore Enabled: false

WARNING: No blkio throttle.read_bps_device support
WARNING: No blkio throttle.write_bps_device support
WARNING: No blkio throttle.read_iops_device support
WARNING: No blkio throttle.write_iops_device support
</code></pre>
<hr>
<h3 id="docker-xx-–help"><a href="#docker-xx-–help" class="headerlink" title="docker xx –help"></a>docker xx –help</h3><blockquote>
<p>查看 Docker 命令的帮助文档。</p>
</blockquote>
<p>例如：<code>docker images --help</code></p>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker images --help

Usage:  docker images [OPTIONS] [REPOSITORY[:TAG]]

List images

Options:
  -a, --all             Show all images (default hides intermediate images)
      --digests         Show digests
  -f, --filter filter   Filter output based on conditions provided
      --format string   Pretty-print images using a Go template
      --no-trunc        Don&#39;t truncate output
  -q, --quiet           Only show image IDs
</code></pre>
<hr>
<h2 id="Docker-镜像命令"><a href="#Docker-镜像命令" class="headerlink" title="Docker 镜像命令"></a>Docker 镜像命令</h2><h3 id="docker-images"><a href="#docker-images" class="headerlink" title="docker images"></a>docker images</h3><blockquote>
<p>查看本机所有 Docker 镜像。</p>
</blockquote>
<ul>
<li>-a, –all 列出所有镜像</li>
<li>-q, –quite 只显示镜像id</li>
</ul>
<blockquote>
<p>-aq可在后续 <strong>删除镜像命令</strong> 时配合使用</p>
</blockquote>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker images
REPOSITORY               TAG       IMAGE ID       CREATED         SIZE
docker/getting-started   latest    021a1b85e641   3 months ago    27.6MB
hello-world              latest    bf756fb1ae65   14 months ago   13.3kB
</code></pre>
<hr>
<h3 id="docker-search-镜像关键词"><a href="#docker-search-镜像关键词" class="headerlink" title="docker search 镜像关键词"></a>docker search 镜像关键词</h3><blockquote>
<p>搜索 Docker 镜像。</p>
</blockquote>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker search ubuntu
NAME                                                      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
ubuntu                                                    Ubuntu is a Debian-based Linux operating sys…   11944     [OK]
dorowu/ubuntu-desktop-lxde-vnc                            Docker image to provide HTML5 VNC interface …   504                  [OK]
......
</code></pre>
<hr>
<h3 id="docker-pull-镜像名-tag"><a href="#docker-pull-镜像名-tag" class="headerlink" title="docker pull 镜像名[:tag]"></a>docker pull 镜像名[:tag]</h3><p><a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker 镜像库</a></p>
<blockquote>
<p>拉取 Docker 镜像。</p>
</blockquote>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker pull mysql:latest
latest: Pulling from library/mysql # 如果不指定 tag，则默认 latest
a076a628af6f: Pull complete # 分层下载，联合文件系统
f6c208f3f991: Pull complete
88a9455a9165: Pull complete
406c9b8427c6: Pull complete
7c88599c0b25: Pull complete
25b5c6debdaf: Pull complete
43a5816f1617: Pull complete
1a8c919e89bf: Pull complete
9f3cf4bd1a07: Pull complete
80539cea118d: Pull complete
201b3cad54ce: Pull complete
944ba37e1c06: Pull complete
Digest: sha256:feada149cb8ff54eade1336da7c1d080c4a1c7ed82b5e320efb5beebed85ae8c # 签名
Status: Downloaded newer image for mysql:latest
docker.io/library/mysql:latest # 真实地址
</code></pre>
<hr>
<h3 id="docker-rmi-镜像"><a href="#docker-rmi-镜像" class="headerlink" title="docker rmi 镜像"></a>docker rmi 镜像</h3><blockquote>
<p>删除 Docker 镜像。</p>
</blockquote>
<pre><code class="bash">docker rmi -f 容器id # 删除指定镜像
docker rmi -f 容器id 容器id ... # 删除多个镜像
docker rmi -f $(docker images -aq) # 删除所有镜像
</code></pre>
<hr>
<h2 id="Docker-容器命令"><a href="#Docker-容器命令" class="headerlink" title="Docker 容器命令"></a>Docker 容器命令</h2><h3 id="docker-run-可选参数-image"><a href="#docker-run-可选参数-image" class="headerlink" title="docker run [可选参数] image"></a>docker run [可选参数] image</h3><blockquote>
<p>通过指定镜像，生成指定容器。</p>
</blockquote>
<p>搭配 -it 与终端路径可对应进入指定 Linux 容器。</p>
<table>
<thead>
<tr>
<th align="center"><strong>常用可选参数</strong></th>
<th align="center"><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">–name=”Name”</td>
<td align="center">容器名</td>
</tr>
<tr>
<td align="center">-d</td>
<td align="center">后台方式运行</td>
</tr>
<tr>
<td align="center">-it</td>
<td align="center">使用交互方式运行，进入容器查看内容</td>
</tr>
<tr>
<td align="center">-p ip:主机端口:容器端口</td>
<td align="center">指定容器端口</td>
</tr>
<tr>
<td align="center">-p 主机端口:容器端口（常用）</td>
<td align="center">指定容器端口</td>
</tr>
<tr>
<td align="center">-p 容器端口</td>
<td align="center">指定容器端口</td>
</tr>
<tr>
<td align="center">-P</td>
<td align="center">指定随机端口</td>
</tr>
</tbody></table>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker run -it ubuntu /bin/bash
root@33339890e94c:/# ls
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@33339890e94c:/# cat /etc/os-release
NAME=&quot;Ubuntu&quot;
VERSION=&quot;20.04.2 LTS (Focal Fossa)&quot;
ID=ubuntu
ID_LIKE=debian
PRETTY_NAME=&quot;Ubuntu 20.04.2 LTS&quot;
VERSION_ID=&quot;20.04&quot;
HOME_URL=&quot;https://www.ubuntu.com/&quot;
SUPPORT_URL=&quot;https://help.ubuntu.com/&quot;
BUG_REPORT_URL=&quot;https://bugs.launchpad.net/ubuntu/&quot;
PRIVACY_POLICY_URL=&quot;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy&quot;
VERSION_CODENAME=focal
UBUNTU_CODENAME=focal
root@33339890e94c:/#
</code></pre>
<hr>
<h3 id="exit"><a href="#exit" class="headerlink" title="exit"></a>exit</h3><blockquote>
<p>退出<code>且停止容器</code></p>
</blockquote>
<pre><code class="bash">root@33339890e94c:/# exit
exit
PS C:\Users\P7XXTM1-G&gt;
</code></pre>
<blockquote>
<p>若要退出容器，但<code>不想停止容器</code>，则通过<code>快捷键 Ctrl + P + Q</code> 即可。</p>
</blockquote>
<pre><code class="bash">root@cd9e271f0792:/#
PS C:\Users\P7XXTM1-G&gt; docker ps
CONTAINER ID   IMAGE     COMMAND       CREATED         STATUS         PORTS     NAMES
cd9e271f0792   ubuntu    &quot;/bin/bash&quot;   7 seconds ago   Up 6 seconds             serene_hopper
PS C:\Users\P7XXTM1-G&gt;
</code></pre>
<hr>
<h3 id="docker-ps"><a href="#docker-ps" class="headerlink" title="docker ps"></a>docker ps</h3><blockquote>
<p>查看运行的容器。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center"><strong>常用可选参数</strong></th>
<th align="center"><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">-a</td>
<td align="center">列出当前正在运行的容器与历史运行容器</td>
</tr>
<tr>
<td align="center">-n=?</td>
<td align="center">显示最近运行的容器，”?” 可指定输出条目，如：-n=1，则输出最近一条记录</td>
</tr>
<tr>
<td align="center">-q</td>
<td align="center">只显示容器编号</td>
</tr>
</tbody></table>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
PS C:\Users\P7XXTM1-G&gt; docker ps -a
CONTAINER ID   IMAGE     COMMAND       CREATED         STATUS                          PORTS     NAMES
33339890e94c   ubuntu    &quot;/bin/bash&quot;   5 minutes ago   Exited (0) About a minute ago             inspiring_zhukovsky
PS C:\Users\P7XXTM1-G&gt;
</code></pre>
<hr>
<h3 id="docker-rm-容器id"><a href="#docker-rm-容器id" class="headerlink" title="docker rm 容器id"></a>docker rm 容器id</h3><blockquote>
<p>删除容器</p>
</blockquote>
<pre><code class="bash">docker rm 容器id # 删除指定容器，不能删除正在运行的容器，如果要强制删除则需要通过 rm -f 执行
docker rm -f $(docker ps -aq) # 删除所有容器
docker ps -aq|xargs docker rm # 删除所有容器（管道锁）
</code></pre>
<hr>
<h3 id="容器的-启动-重启-停止-强制停止-命令"><a href="#容器的-启动-重启-停止-强制停止-命令" class="headerlink" title="容器的 启动/重启/停止/强制停止 命令"></a>容器的 启动/重启/停止/强制停止 命令</h3><pre><code class="bash">docker start 容器id # 启动容器
docker restart 容器id # 重启容器
docker stop 容器id # 停止当前正在运行的容器
docker kill 容器id # 强制停止当前正在运行的容器
</code></pre>
<hr>
<h2 id="Docker-其他常用命令"><a href="#Docker-其他常用命令" class="headerlink" title="Docker 其他常用命令"></a>Docker 其他常用命令</h2><h3 id="docker-run-d-镜像名"><a href="#docker-run-d-镜像名" class="headerlink" title="docker run -d 镜像名"></a>docker run -d 镜像名</h3><blockquote>
<p>以后台启动方式启动容器。</p>
</blockquote>
<p>此时若后台启动的容器中<code>没有前台应用</code>，则 Docker 会停止该后台容器，则使用 docker ps 命令将不会后台运行容器。</p>
<p>若需要容器在后台保持运行，则必须有一个前台进程。</p>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker run -d ubuntu
e0f36dc3a166a6dd9c612d26b17e845a8a3a0a2c071f47b8fd9f8cf9ee78082a
</code></pre>
<hr>
<h3 id="docker-logs"><a href="#docker-logs" class="headerlink" title="docker logs"></a>docker logs</h3><blockquote>
<p>查看容器日志。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center"><strong>常用可选参数</strong></th>
<th align="center"><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">-f</td>
<td align="center">打印日志</td>
</tr>
<tr>
<td align="center">-t</td>
<td align="center">以时间戳字符串输出</td>
</tr>
<tr>
<td align="center">–tail</td>
<td align="center">输出日志条数</td>
</tr>
</tbody></table>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker run -d ubuntu /bin/sh -c &quot;while true;do echo hello-from-ubunut;sleep 1;done&quot;
2f090441e6e80fcf526e664973e968fbf8b33d1228ea4a91d38a02d4661edc3a
PS C:\Users\P7XXTM1-G&gt; docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS     NAMES
2f090441e6e8   ubuntu    &quot;/bin/sh -c &#39;while t…&quot;   4 seconds ago   Up 2 seconds             gallant_elgamal
PS C:\Users\P7XXTM1-G&gt; docker logs -f -t --tail 10 2f090441e6e8
2021-03-18T05:13:02.218287300Z hello-from-ubunut
2021-03-18T05:13:03.219282500Z hello-from-ubunut
2021-03-18T05:13:04.220377900Z hello-from-ubunut
2021-03-18T05:13:05.221435600Z hello-from-ubunut
2021-03-18T05:13:06.223104800Z hello-from-ubunut
2021-03-18T05:13:07.223687300Z hello-from-ubunut
2021-03-18T05:13:08.224903600Z hello-from-ubunut
2021-03-18T05:13:09.225778500Z hello-from-ubunut
2021-03-18T05:13:10.226692700Z hello-from-ubunut
2021-03-18T05:13:11.227667300Z hello-from-ubunut
2021-03-18T05:13:12.228729200Z hello-from-ubunut
2021-03-18T05:13:13.229784400Z hello-from-ubunut
2021-03-18T05:13:14.230961900Z hello-from-ubunut
2021-03-18T05:13:15.232517700Z hello-from-ubunut
2021-03-18T05:13:16.233134900Z hello-from-ubunut
2021-03-18T05:13:17.234228900Z hello-from-ubunut
2021-03-18T05:13:18.235945200Z hello-from-ubunut
2021-03-18T05:13:19.236571400Z hello-from-ubunut
2021-03-18T05:13:20.238078900Z hello-from-ubunut
PS C:\Users\P7XXTM1-G&gt;
</code></pre>
<hr>
<h3 id="docker-stats"><a href="#docker-stats" class="headerlink" title="docker stats"></a>docker stats</h3><blockquote>
<p>查看 Docker 资源占用情况。</p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker stats
CONTAINER ID   NAME              CPU %     MEM USAGE / LIMIT     MEM %     NET I/O        BLOCK I/O   PIDS
f3a8f8e37903   dreamy_tesla      0.00%     6.809MiB / 12.44GiB   0.05%     516B / 0B      0B / 0B     1
c08739536043   quirky_roentgen   0.00%     2.285MiB / 12.44GiB   0.02%     656B / 0B      0B / 0B     1
9e8cb66f4144   Elasticsearch     0.21%     2.224GiB / 12.44GiB   17.87%    1.8kB / 867B   0B / 0B     48
</code></pre>
<hr>
<h3 id="docker-top-容器id"><a href="#docker-top-容器id" class="headerlink" title="docker top 容器id"></a>docker top 容器id</h3><blockquote>
<p>查看容器中的的进程信息。</p>
</blockquote>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker run -d ubuntu /bin/sh -c &quot;while true;do echo hello-from-ubunut;sleep 1;done&quot;
a7e9449469b287e1cfc7c2768fa66c19113135421659568ca4da14b9ac9bcdd3
PS C:\Users\P7XXTM1-G&gt; docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS     NAMES
a7e9449469b2   ubuntu    &quot;/bin/sh -c &#39;while t…&quot;   8 seconds ago   Up 7 seconds             great_chaum
PS C:\Users\P7XXTM1-G&gt; docker top a7e9449469b2
UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD
root                1720                1699                0                   05:59               ?                   00:00:00            /bin/sh -c while true;do echo hello-from-ubunut;sleep 1;done
root                1777                1720                0                   06:00               ?                   00:00:00            sleep 1
PS C:\Users\P7XXTM1-G&gt;
</code></pre>
<hr>
<h3 id="docker-inspect-容器id"><a href="#docker-inspect-容器id" class="headerlink" title="docker inspect 容器id"></a>docker inspect 容器id</h3><blockquote>
<p>查看容器信息。</p>
</blockquote>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker run -d ubuntu
1147368a1740a8a9367f550447faa808bbf8fe3eb43a3fb5d890f88153ee2e80
PS C:\Users\P7XXTM1-G&gt; docker ps -a
CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS                      PORTS     NAMES
1147368a1740   ubuntu    &quot;/bin/bash&quot;   18 seconds ago   Exited (0) 17 seconds ago             naughty_engelbart
PS C:\Users\P7XXTM1-G&gt; docker inspect 1147368a1740
[
    &#123;
        &quot;Id&quot;: &quot;1147368a1740a8a9367f550447faa808bbf8fe3eb43a3fb5d890f88153ee2e80&quot;,
        &quot;Created&quot;: &quot;2021-03-18T06:04:28.0414634Z&quot;,
        &quot;Path&quot;: &quot;/bin/bash&quot;,
        &quot;Args&quot;: [],
        &quot;State&quot;: &#123;
            &quot;Status&quot;: &quot;exited&quot;,
            &quot;Running&quot;: false,
            &quot;Paused&quot;: false,
            &quot;Restarting&quot;: false,
            &quot;OOMKilled&quot;: false,
            &quot;Dead&quot;: false,
            &quot;Pid&quot;: 0,
            &quot;ExitCode&quot;: 0,
            &quot;Error&quot;: &quot;&quot;,
            &quot;StartedAt&quot;: &quot;2021-03-18T06:04:28.2739845Z&quot;,
            &quot;FinishedAt&quot;: &quot;2021-03-18T06:04:28.2748083Z&quot;
        &#125;,
        &quot;Image&quot;: &quot;sha256:4dd97cefde62cf2d6bcfd8f2c0300a24fbcddbe0ebcd577cc8b420c29106869a&quot;,
        &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/1147368a1740a8a9367f550447faa808bbf8fe3eb43a3fb5d890f88153ee2e80/resolv.conf&quot;,
        &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/1147368a1740a8a9367f550447faa808bbf8fe3eb43a3fb5d890f88153ee2e80/hostname&quot;,
        &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/1147368a1740a8a9367f550447faa808bbf8fe3eb43a3fb5d890f88153ee2e80/hosts&quot;,
        &quot;LogPath&quot;: &quot;/var/lib/docker/containers/1147368a1740a8a9367f550447faa808bbf8fe3eb43a3fb5d890f88153ee2e80/1147368a1740a8a9367f550447faa808bbf8fe3eb43a3fb5d890f88153ee2e80-json.log&quot;,
        &quot;Name&quot;: &quot;/naughty_engelbart&quot;,
        &quot;RestartCount&quot;: 0,
        &quot;Driver&quot;: &quot;overlay2&quot;,
        &quot;Platform&quot;: &quot;linux&quot;,
        &quot;MountLabel&quot;: &quot;&quot;,
        &quot;ProcessLabel&quot;: &quot;&quot;,
        &quot;AppArmorProfile&quot;: &quot;&quot;,
        &quot;ExecIDs&quot;: null,

        ......
    &#125;
]
</code></pre>
<hr>
<h3 id="docker-exec-it-容器id-终端地址"><a href="#docker-exec-it-容器id-终端地址" class="headerlink" title="docker exec -it 容器id 终端地址"></a>docker exec -it 容器id 终端地址</h3><blockquote>
<p>进入当前正在运行的容器，<code>开启新终端</code>。</p>
</blockquote>
<p>常用的终端地址：</p>
<ul>
<li>/bin/bash（常用）</li>
<li>/bin/sh</li>
</ul>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker ps
CONTAINER ID   IMAGE     COMMAND       CREATED         STATUS         PORTS     NAMES
4172c4f6f390   ubuntu    &quot;/bin/bash&quot;   7 seconds ago   Up 5 seconds             eloquent_bohr
PS C:\Users\P7XXTM1-G&gt; docker exec -it 4172c4f6f390 /bin/bash
root@4172c4f6f390:/# ps -ef
UID        PID  PPID  C STIME TTY          TIME CMD
root         1     0  0 06:11 pts/0    00:00:00 /bin/bash
root        10     0  0 06:12 pts/1    00:00:00 /bin/bash
root        19    10  0 06:12 pts/1    00:00:00 ps -ef
root@4172c4f6f390:/#
</code></pre>
<hr>
<h3 id="docker-attach-容器id"><a href="#docker-attach-容器id" class="headerlink" title="docker attach 容器id"></a>docker attach 容器id</h3><blockquote>
<p>进入当前正在运行的容器，但<code>不会开启新终端</code>，会继续以前终端的操作</p>
</blockquote>
<pre><code class="bash">PS C:\Users\P7XXTM1-G&gt; docker ps
CONTAINER ID   IMAGE     COMMAND       CREATED              STATUS              PORTS     NAMES
4172c4f6f390   ubuntu    &quot;/bin/bash&quot;   About a minute ago   Up About a minute             eloquent_bohr
PS C:\Users\P7XXTM1-G&gt; docker attach 4172c4f6f390
正在运行的终端指令......
</code></pre>
<hr>
<h3 id="docker-cp-容器id-容器目录-本地目录"><a href="#docker-cp-容器id-容器目录-本地目录" class="headerlink" title="docker cp 容器id:/容器目录 本地目录"></a>docker cp 容器id:/容器目录 本地目录</h3><blockquote>
<p>从容器（无论容器是否运行）中将文件拷贝到外部。</p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker run -it ubuntu /bin/bash
root@0619c363583e:/# ls
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@0619c363583e:/# cd home/
root@0619c363583e:/home# ls

# 在容器中新建一个测试用的 test.file
root@0619c363583e:/home# touch test.file
root@0619c363583e:/home# ls
test.file
root@0619c363583e:/home# exit
exit

# 查看容器id
ubuntu@DESKTOP-5IG459O:~$ docker ps -a
CONTAINER ID   IMAGE     COMMAND           CREATED          STATUS                     PORTS     NAMES
0619c363583e   ubuntu    &quot;/bin/bash&quot;       25 seconds ago   Exited (0) 3 seconds ago             optimistic_cartwright

# 将容器中的文件拷贝到本地（由于我未将 Docker 加入用户组，故在使用 Docker 的部分命令时需使用 sudo 权限）
ubuntu@DESKTOP-5IG459O:~$ sudo docker cp 0619c363583e:/home/test.file /home

# 查看 Docker 容器中的文件是否已拷贝到本地目录下
ubuntu@DESKTOP-5IG459O:~$ ls
ubuntu@DESKTOP-5IG459O:~$ cd /home/
ubuntu@DESKTOP-5IG459O:/home$ ls
test.file  ubuntu
ubuntu@DESKTOP-5IG459O:/home$
</code></pre>
<hr>
<h3 id="docker-commit"><a href="#docker-commit" class="headerlink" title="docker commit"></a>docker commit</h3><blockquote>
<p>生成本地 Docker 自定义镜像。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center"><strong>常用可选参数</strong></th>
<th align="center"><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">-a</td>
<td align="center">提交镜像作者</td>
</tr>
<tr>
<td align="center">-m</td>
<td align="center">提交镜像信息</td>
</tr>
</tbody></table>
<blockquote>
<p>这里我们制作一个带有 Vim 编辑器的 Ubuntu 镜像（ubuntu-vim），并通过 docker commit 命令制作一个本地镜像。</p>
</blockquote>
<blockquote>
<p>当我们尝试对 Ubuntu 镜像添加软件或对一些系统配置进行修改时，我们就生成了一个属于自己的自定义镜像，通过使用自定义镜像，我们可以对日常工作时的项目进行客制化修改，并可以省去大部分需要因为配置开发环境与部署环境的高度重合的工作，<code>只需要对自定义镜像进行二次修改，即可满足需求再次上线。</code></p>
</blockquote>
<pre><code class="bash">docker commit -a &quot;Peter Chen&quot; -m &quot;Add Vim&quot; c79bc37440d2 ubuntu-vim
sha256:8e9d1c74cd2404d7c006c5f7074b1f00b61f8c10a22044ab5b24da68c34a67ae
ubuntu@DESKTOP-5IG459O:~$ docker images
REPOSITORY               TAG       IMAGE ID       CREATED         SIZE
ubuntu-vim               latest    8e9d1c74cd24   4 seconds ago   168MB
ubuntu                   latest    4dd97cefde62   2 weeks ago     72.9MB
mysql                    latest    c8562eaf9d81   2 months ago    546MB
redis                    latest    621ceef7494a   2 months ago    104MB
tomcat                   latest    040bdb29ab37   2 months ago    649MB
nginx                    latest    f6d0b4767a6c   2 months ago    133MB
portainer/portainer-ce   latest    980323c8eb3f   2 months ago    196MB
centos                   latest    300e315adb2f   3 months ago    209MB
kibana                   latest    a674d23325b0   2 years ago     388MB
elasticsearch            latest    5acf0e8da90b   2 years ago     486MB
ubuntu@DESKTOP-5IG459O:~$
</code></pre>
<hr>
<h2 id="Docker-命令简单应用"><a href="#Docker-命令简单应用" class="headerlink" title="Docker 命令简单应用"></a>Docker 命令简单应用</h2><h3 id="部署-Nginx"><a href="#部署-Nginx" class="headerlink" title="部署 Nginx"></a>部署 Nginx</h3><blockquote>
<p><code>WSL2</code> 下通过 Docker 命令部署 <code>Nginx</code>，通过端口映射到主机上的 <code>80</code> 端口，并通过 <code>curl</code> 命令对该端口内容进行查看。<br><strong>Nginx 默认端口：80</strong></p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker run -d --name Nginx -p 80:80 nginx
ae4f49240c2af6e20faa786a8fc144b78aacb6c7625ff11cf7ea39e67193ac22
ubuntu@DESKTOP-5IG459O:~$ docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                  NAMES
ae4f49240c2a   nginx     &quot;/docker-entrypoint.…&quot;   5 seconds ago   Up 3 seconds   0.0.0.0:80-&gt;80/tcp   Nginx
ubuntu@DESKTOP-5IG459O:~$ curl localhost:80
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
    body &#123;
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    &#125;
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;p&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a href=&quot;http://nginx.org/&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a href=&quot;http://nginx.com/&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<hr>
<h3 id="部署-Tomcat"><a href="#部署-Tomcat" class="headerlink" title="部署 Tomcat"></a>部署 Tomcat</h3><blockquote>
<p><code>WSL2</code> 下通过 Docker 命令部署 <code>Tomcat</code>，通过端口映射到主机上的 <code>8080</code> 端口，并通过 <code>curl</code> 命令对该端口内容进行查看。<br><strong>Tomcat 默认端口：8080</strong></p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker run -d --name Tomcat -p 8080:8080 tomcat
1d5186fd99fae677916b5ddb7012a3277881bfefd8ee7da762b264b3aca05ddd
ubuntu@DESKTOP-5IG459O:~$ docker ps -a
CONTAINER ID   IMAGE     COMMAND             CREATED         STATUS         PORTS                    NAMES
1d5186fd99fa   tomcat    &quot;catalina.sh run&quot;   4 seconds ago   Up 4 seconds   0.0.0.0:8080-&gt;8080/tcp   Tomcat
ubuntu@DESKTOP-5IG459O:~$ curl localhost:8080
&lt;!doctype html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;title&gt;HTTP Status 404 – Not Found&lt;/title&gt;&lt;style type=&quot;text/css&quot;&gt;body &#123;font-family:Tahoma,Arial,sans-serif;&#125; h1, h2, h3, b &#123;color:white;background-color:#525D76;&#125; h1 &#123;font-size:22px;&#125; h2 &#123;font-size:16px;&#125; h3 &#123;font-size:14px;&#125; p &#123;font-size:12px;&#125; a &#123;color:black;&#125; .line &#123;height:1px;background-color:#525D76;border:none;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;HTTP Status 404 – Not Found&lt;/h1&gt;&lt;hr class=&quot;line&quot; /&gt;&lt;p&gt;&lt;b&gt;Type&lt;/b&gt; Status Report&lt;/p&gt;&lt;p&gt;&lt;b&gt;Description&lt;/b&gt; The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.&lt;/p&gt;&lt;hr class=&quot;line&quot; /&gt;&lt;h3&gt;Apache Tomcat/9.0.41&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;
ubuntu@DESKTOP-5IG459O:~$
</code></pre>
<blockquote>
<p>在这里我们会感受到 Docker 镜像的最小化体验，即我们通过 curl 命令直接访问是会报 404的，这是因为 Docker 的镜像通常只包含最小运行环境，会省去大量无用的资源。</p>
<p>在进入容器后，我们会发现 Tomcat 中的 webapps 文件夹目录下并无任何东西。</p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker exec -it Tomcat /bin/bash
root@1d5186fd99fa:/usr/local/tomcat# whereis tomcat
tomcat: /usr/local/tomcat
root@1d5186fd99fa:/usr/local/tomcat# cd /usr/local/tomcat/
root@1d5186fd99fa:/usr/local/tomcat# ls
BUILDING.txt     LICENSE  README.md      RUNNING.txt  conf  logs            temp     webapps.dist
CONTRIBUTING.md  NOTICE   RELEASE-NOTES  bin          lib   native-jni-lib  webapps  work
root@1d5186fd99fa:/usr/local/tomcat# cd webapps
root@1d5186fd99fa:/usr/local/tomcat/webapps# ls
root@1d5186fd99fa:/usr/local/tomcat/webapps#
</code></pre>
<blockquote>
<p>通过翻阅资料，我们可以知道：Tomcat 镜像会将原有 webapps 文件夹下的文件删除，如需要恢复则可通过将 webapps.dist 文件夹下的文件拷贝到 webapps 文件夹解决。</p>
</blockquote>
<pre><code class="bash">root@1d5186fd99fa:/usr/local/tomcat# cp -r webapps.dist/* webapps
root@1d5186fd99fa:/usr/local/tomcat# cd webapps
root@1d5186fd99fa:/usr/local/tomcat/webapps# ls
ROOT  docs  examples  host-manager  manager
root@1d5186fd99fa:/usr/local/tomcat/webapps#
ubuntu@DESKTOP-5IG459O:~$ curl localhost:8080



&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot; /&gt;
        &lt;title&gt;Apache Tomcat/9.0.41&lt;/title&gt;
        &lt;link href=&quot;favicon.ico&quot; rel=&quot;icon&quot; type=&quot;image/x-icon&quot; /&gt;
        &lt;link href=&quot;tomcat.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;div id=&quot;wrapper&quot;&gt;
            &lt;div id=&quot;navigation&quot; class=&quot;curved container&quot;&gt;
                &lt;span id=&quot;nav-home&quot;&gt;&lt;a href=&quot;https://tomcat.apache.org/&quot;&gt;Home&lt;/a&gt;&lt;/span&gt;
                &lt;span id=&quot;nav-hosts&quot;&gt;&lt;a href=&quot;/docs/&quot;&gt;Documentation&lt;/a&gt;&lt;/span&gt;
                &lt;span id=&quot;nav-config&quot;&gt;&lt;a href=&quot;/docs/config/&quot;&gt;Configuration&lt;/a&gt;&lt;/span&gt;
                &lt;span id=&quot;nav-examples&quot;&gt;&lt;a href=&quot;/examples/&quot;&gt;Examples&lt;/a&gt;&lt;/span&gt;
                &lt;span id=&quot;nav-wiki&quot;&gt;&lt;a href=&quot;https://wiki.apache.org/tomcat/FrontPage&quot;&gt;Wiki&lt;/a&gt;&lt;/span&gt;
                &lt;span id=&quot;nav-lists&quot;&gt;&lt;a href=&quot;https://tomcat.apache.org/lists.html&quot;&gt;Mailing Lists&lt;/a&gt;&lt;/span&gt;
                &lt;span id=&quot;nav-help&quot;&gt;&lt;a href=&quot;https://tomcat.apache.org/findhelp.html&quot;&gt;Find Help&lt;/a&gt;&lt;/span&gt;
                &lt;br class=&quot;separator&quot; /&gt;
            &lt;/div&gt;
            &lt;div id=&quot;asf-box&quot;&gt;
                &lt;h1&gt;Apache Tomcat/9.0.41&lt;/h1&gt;
            &lt;/div&gt;

            ......
    &lt;/body&gt;

&lt;/html&gt;
</code></pre>
<hr>
<h3 id="部署-Elasticsearch"><a href="#部署-Elasticsearch" class="headerlink" title="部署 Elasticsearch"></a>部署 Elasticsearch</h3><blockquote>
<p><code>WSL2</code> 下通过 Docker 命令部署 <code>Elasticsearch</code>，通过端口映射到主机上的 <code>9200</code> 端口，并通过 <code>curl</code> 命令对该端口内容进行查看。<br><strong>Elasticsearch 默认端口：9200</strong></p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker run -d --name Elasticsearch -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:latest
9e8cb66f41446d40ec2ce3dd8bd1aab7189e9c37daf5233795e25926bece5587
ubuntu@DESKTOP-5IG459O:~$ docker ps
CONTAINER ID   IMAGE                  COMMAND                  CREATED         STATUS         PORTS                                            NAMES
9e8cb66f4144   elasticsearch:latest   &quot;/docker-entrypoint.…&quot;   4 seconds ago   Up 2 seconds   0.0.0.0:9200-&gt;9200/tcp, 0.0.0.0:9300-&gt;9300/tcp   Elasticsearch
ubuntu@DESKTOP-5IG459O:~$ curl localhost:9200
&#123;
  &quot;name&quot; : &quot;03-Xaze&quot;,
  &quot;cluster_name&quot; : &quot;elasticsearch&quot;,
  &quot;cluster_uuid&quot; : &quot;afbJDcPlTJuv2-FI0n7rIA&quot;,
  &quot;version&quot; : &#123;
    &quot;number&quot; : &quot;5.6.12&quot;,
    &quot;build_hash&quot; : &quot;cfe3d9f&quot;,
    &quot;build_date&quot; : &quot;2018-09-10T20:12:43.732Z&quot;,
    &quot;build_snapshot&quot; : false,
    &quot;lucene_version&quot; : &quot;6.6.1&quot;
  &#125;,
  &quot;tagline&quot; : &quot;You Know, for Search&quot;
&#125;
ubuntu@DESKTOP-5IG459O:~$ docker status
docker: &#39;status&#39; is not a docker command.
See &#39;docker --help&#39;
</code></pre>
<blockquote>
<p>ES 默认会占用大量内存，若想通过修改配置的方式对 ES 进行配置，可追加 -e [参数]，对其进行环境配置。<br>此处我们将 ES 的内存限制为最小内存 64m，最大内存 1024m。</p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker run -d --name Elasticsearch -p 9200:9200 -p 9300:9300 -e &quot;-Xms=64m -Xmx=1024m&quot; elasticsearch:latest
021abaaf2148248188c8add919576895dc9d61bca8834601d4947058616ce1ec
ubuntu@DESKTOP-5IG459O:~$ docker stats
CONTAINER ID   NAME            CPU %     MEM USAGE / LIMIT    MEM %     NET I/O     BLOCK I/O   PIDS
021abaaf2148   Elasticsearch   0.17%     2.22GiB / 12.44GiB   17.84%    696B / 0B   0B / 0B     43
</code></pre>
<hr>
<h2 id="可视化管理工具"><a href="#可视化管理工具" class="headerlink" title="可视化管理工具"></a>可视化管理工具</h2><h3 id="Portiner"><a href="#Portiner" class="headerlink" title="Portiner"></a>Portiner</h3><blockquote>
<p>官方地址：<a target="_blank" rel="noopener" href="https://www.portainer.io/">Portiner</a><br><strong>Portiner 默认端口：9000</strong></p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker run -d -p 9000:9000 --name=Portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce
a60bf182bf76b2ce5971cb47da02c6be15d4132b37364bf63987e98079195d30
ubuntu@DESKTOP-5IG459O:~$ docker ps
CONTAINER ID   IMAGE                    COMMAND        CREATED         STATUS         PORTS                              NAMES
a60bf182bf76   portainer/portainer-ce   &quot;/portainer&quot;   2 seconds ago   Up 2 seconds   8000/tcp, 0.0.0.0:9000-&gt;9000/tcp   Portainer
ubuntu@DESKTOP-5IG459O:~$
</code></pre>
<hr>
<blockquote>
<p>Portainer 显示效果</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/Blog-Repository@master/Notes/Docker/docker_portainer_login.png" alt="Portainer 登录页"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/Blog-Repository@master/Notes/Docker/docker_portainer_manage.png" alt="Portainer 管理配置页"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/Blog-Repository@master/Notes/Docker/docker_portainer_home.png" alt="Portainer 主页"></p>
<hr>
<h2 id="容器数据卷"><a href="#容器数据卷" class="headerlink" title="容器数据卷"></a>容器数据卷</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><blockquote>
<p>当我们想要通过 Docker 进行数据持久化存储的时候，若我们将数据全部存放于 Docker 容器中，则当我们删除容器时，容器中的数据也就被我们一并删除，也就是通俗意义上讲的“删库跑路”。<br>现实中为了防止此类事情发生，通常可以通过容器数据卷技术，将容器中的目录挂载到外部目录（这个外部目录通常是当前计算机上的物理地址）。</p>
<blockquote>
<p>即：双向绑定，容器的持久化和同步操作，即使 Docker 中各个容器间互相隔离，但容器间也是可以数据共享的。</p>
</blockquote>
</blockquote>
<hr>
<h3 id="docker-run-it-v-主机目录-容器内目录"><a href="#docker-run-it-v-主机目录-容器内目录" class="headerlink" title="docker run -it -v 主机目录:容器内目录"></a>docker run -it -v 主机目录:容器内目录</h3><p>在这里我们尝试将本地 Ubuntu WSL2 虚拟机上的目录挂载到 Docker 中新建的 Ubuntu 容器上。</p>
<blockquote>
<p>本地挂载目录：/home/test，若本地无此目录，则 Docker 会帮助创建。<br>容器挂载目录：/home</p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker run -it -v /home/test:/home ubuntu /bin/bash
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/Blog-Repository@master/Notes/Docker/docker_data_share.png" alt="挂载后容器与外部的数据共享"></p>
<blockquote>
<p>通过 docker inspect，我们可以检查容器挂载信息。</p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker ps
CONTAINER ID   IMAGE     COMMAND       CREATED         STATUS         PORTS     NAMES
562e4b3c9d92   ubuntu    &quot;/bin/bash&quot;   6 minutes ago   Up 6 minutes             nervous_darwin
ubuntu@DESKTOP-5IG459O:~$ docker inspect 562e4b3c9d92
[
    &#123;
        &quot;Id&quot;: &quot;562e4b3c9d92cc41642ccaf6e4883ec328a9df205b0ea2d6c00e54fab253e42e&quot;,
        &quot;Created&quot;: &quot;2021-03-23T01:33:55.8844317Z&quot;,
        &quot;Path&quot;: &quot;/bin/bash&quot;,
        &quot;Args&quot;: [],
        &quot;State&quot;: &#123;
            &quot;Status&quot;: &quot;running&quot;,
            &quot;Running&quot;: true,
            &quot;Paused&quot;: false,
            &quot;Restarting&quot;: false,
            &quot;OOMKilled&quot;: false,
            &quot;Dead&quot;: false,
            &quot;Pid&quot;: 1277,
            &quot;ExitCode&quot;: 0,
            &quot;Error&quot;: &quot;&quot;,
            &quot;StartedAt&quot;: &quot;2021-03-23T01:33:56.1845627Z&quot;,
            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;
        &#125;,

        ......
        
        &quot;Mounts&quot;: [
            &#123;
                &quot;Type&quot;: &quot;bind&quot;,
                &quot;Source&quot;: &quot;/home/test&quot;, # 容器内的挂载目录
                &quot;Destination&quot;: &quot;/home&quot;, # 容器外的挂载目录
                &quot;Mode&quot;: &quot;&quot;,
                &quot;RW&quot;: true,
                &quot;Propagation&quot;: &quot;rprivate&quot;
            &#125;
        ],

        ......
    &#125;
]
ubuntu@DESKTOP-5IG459O:~$
</code></pre>
<hr>
<h3 id="测试-MySQL-数据"><a href="#测试-MySQL-数据" class="headerlink" title="测试 MySQL 数据"></a>测试 MySQL 数据</h3><blockquote>
<p>这里我们测试将容器中的 MySQL 配置文件挂载到外部，并将数据目录也挂载到外部，防止因为误删容器而导致的数据丢失。</p>
</blockquote>
<p>建立一个通过 3306 端口映射到本地，配置文件与数据文件目录挂载到本地，MySQL root 账户密码为 root，容器名为 testMySQL 的 MySQL 容器。</p>
<blockquote>
<p>本地挂载配置文件目录：/home/mysql/conf<br>容器配置文件目录：/etc/mysql/conf.d</p>
</blockquote>
<blockquote>
<p>本地挂载数据目录：/home/mysql/data<br>容器数据目录：/var/lib/mysql</p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker run -d -p 3306:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root --name testMySQL mysql:latest

ubuntu@DESKTOP-5IG459O:~$ cd /home/
ubuntu@DESKTOP-5IG459O:/home$ ls
mysql  ubuntu
ubuntu@DESKTOP-5IG459O:/home$ cd mysql/
ubuntu@DESKTOP-5IG459O:/home/mysql$ ls
conf  data
ubuntu@DESKTOP-5IG459O:/home/mysql$ cd data/
ubuntu@DESKTOP-5IG459O:/home/mysql/data$ ls
&#39;#ib_16384_0.dblwr&#39;   auto.cnf        binlog.index   client-cert.pem   ib_logfile0   ibtmp1      performance_schema   server-cert.pem   undo_001
&#39;#ib_16384_1.dblwr&#39;   binlog.000001   ca-key.pem     client-key.pem    ib_logfile1   mysql       private_key.pem      server-key.pem    undo_002
&#39;#innodb_temp&#39;        binlog.000002   ca.pem         ib_buffer_pool    ibdata1       mysql.ibd   public_key.pem       sys

# 这里我们通过 DataGrip，对映射出来的本地 3306 进行控制，并添加一个 test 表。
ubuntu@DESKTOP-5IG459O:/home/mysql/data$ ls
&#39;#ib_16384_0.dblwr&#39;   auto.cnf        binlog.index   client-cert.pem   ib_logfile0   ibtmp1      performance_schema   server-cert.pem   test
&#39;#ib_16384_1.dblwr&#39;   binlog.000001   ca-key.pem     client-key.pem    ib_logfile1   mysql       private_key.pem      server-key.pem    undo_001
&#39;#innodb_temp&#39;        binlog.000002   ca.pem         ib_buffer_pool    ibdata1       mysql.ibd   public_key.pem       sys               undo_002
ubuntu@DESKTOP-5IG459O:/home/mysql/data$ docker run -d -it /bin/bash mysql
</code></pre>
<blockquote>
<p>假设我们删除容器，挂载目录中的数据文件也不会丢失。</p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:/home/mysql$ docker stop testMySQL
ubuntu@DESKTOP-5IG459O:/home/mysql$ docker rm testMySQL
testMySQL
ubuntu@DESKTOP-5IG459O:/home/mysql$ cd data/
ubuntu@DESKTOP-5IG459O:/home/mysql/data$ ls
&#39;#ib_16384_0.dblwr&#39;   auto.cnf        binlog.index   client-cert.pem   ib_logfile0   mysql                private_key.pem   server-key.pem   undo_002
&#39;#ib_16384_1.dblwr&#39;   binlog.000001   ca-key.pem     client-key.pem    ib_logfile1   mysql.ibd            public_key.pem    sys
&#39;#innodb_temp&#39;        binlog.000002   ca.pem         ib_buffer_pool    ibdata1       performance_schema   server-cert.pem   undo_001
ubuntu@DESKTOP-5IG459O:/home/mysql/data$
</code></pre>
<hr>
<blockquote>
<p>PS：这里有一个<code>暂时未解决</code>的问题，即 Docker 的容器数据卷挂载会将本地目录覆盖容器内目录，即会隐藏容器内的文件。</p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker exec -it testMySQL /bin/bash
root@a0a84f3635e0:/# whereis mysql
mysql: /usr/bin/mysql /usr/lib/mysql /etc/mysql
root@a0a84f3635e0:/# cd /etc/mysql/
root@a0a84f3635e0:/etc/mysql# ls
conf.d  my.cnf  my.cnf.fallback
root@a0a84f3635e0:/etc/mysql# cd conf.d/
root@a0a84f3635e0:/etc/mysql/conf.d# ls
root@a0a84f3635e0:/etc/mysql/conf.d#
</code></pre>
<hr>
<h3 id="匿名挂载"><a href="#匿名挂载" class="headerlink" title="匿名挂载"></a>匿名挂载</h3><blockquote>
<p>当我们尝试创建 Docker 容器卷时，若不指定容器卷的卷名直接挂载外部目录，就是匿名挂载。</p>
</blockquote>
<p>这里我们生成一个测试用的 Nginx 容器，并通过<code>匿名挂载方式</code>，挂载 Nginx 的配置文件目录。</p>
<pre><code class="bash"> docker run -d -P --name AnonymousMountNginx -v /etc/nginx nginx
1cbff8ab5b4c295384d1d0a508a6d828997cca6e992c5416fbc9c9668367c957
ubuntu@DESKTOP-5IG459O:~$ docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                   NAMES
1cbff8ab5b4c   nginx     &quot;/docker-entrypoint.…&quot;   2 seconds ago   Up 2 seconds   0.0.0.0:49153-&gt;80/tcp   AnonymousMountNginx
</code></pre>
<blockquote>
<p>docker volume … 命令是 Docker 的容器卷管理命令。</p>
</blockquote>
<pre><code class="bash"># 通过 docker volume ls 命令可查看当前 Docker 中的容器卷
# 未指定名字的就是匿名挂载卷（这里是43145ccdd2df15993af6a2077e044a8089e003b5a4e564be8dad03162aa8816b）
ubuntu@DESKTOP-5IG459O:~$ docker volume ls
DRIVER    VOLUME NAME
local     43145ccdd2df15993af6a2077e044a8089e003b5a4e564be8dad03162aa8816b

# 通过 docker volume inspect [容器卷名]
docker volume inspect 43145ccdd2df15993af6a2077e044a8089e003b5a4e564be8dad03162aa8816b
[
    &#123;
        &quot;CreatedAt&quot;: &quot;2021-03-23T06:39:05Z&quot;,
        &quot;Driver&quot;: &quot;local&quot;,
        &quot;Labels&quot;: null,
        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/43145ccdd2df15993af6a2077e044a8089e003b5a4e564be8dad03162aa8816b/_data&quot;,
        &quot;Name&quot;: &quot;43145ccdd2df15993af6a2077e044a8089e003b5a4e564be8dad03162aa8816b&quot;,
        &quot;Options&quot;: null,
        &quot;Scope&quot;: &quot;local&quot;
    &#125;
]
ubuntu@DESKTOP-5IG459O:~$
</code></pre>
<blockquote>
<p>Windows10 WSL2 Ubuntu20.04中的镜像位置：<br>\wsl$\docker-desktop-data\version-pack-data\community\docker\volumes</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/Blog-Repository@master/Notes/Docker/docker_volumes_folder_for_windows.png" alt="Windows 中的 Docker 容器数据卷位置"></p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/Blog-Repository@master/Notes/Docker/docker_volumes_test.png" alt="通过 docker volume inspect 命令提供的目录，如果你的操作系统是 Linux，则可以直接访问挂载的命令目录，由于我的机器是 Windows，挂载目录较其他系统不一样"></p>
<hr>
<h3 id="具名挂载"><a href="#具名挂载" class="headerlink" title="具名挂载"></a>具名挂载</h3><p>这里我们生成一个测试用的 Nginx 容器，并通过<code>具名挂载方式</code>，挂载 Nginx 的配置文件目录。</p>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:/mnt/c/Users/P7XXTM1-G$ docker run -d -P --name NamedMountNginx -v named-nginx-volume:/etc/nginx nginx
fa91bb3dd49f476874d99a1e1199ecf24dd309d4240535611156b6dc5f5ab10a
ubuntu@DESKTOP-5IG459O:/mnt/c/Users/P7XXTM1-G$ docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                   NAMES
fa91bb3dd49f   nginx     &quot;/docker-entrypoint.…&quot;   5 seconds ago   Up 4 seconds   0.0.0.0:49153-&gt;80/tcp   NamedMountNginx
ubuntu@DESKTOP-5IG459O:/mnt/c/Users/P7XXTM1-G$ docker volume ls
DRIVER    VOLUME NAME
local     43145ccdd2df15993af6a2077e044a8089e003b5a4e564be8dad03162aa8816b
local     named-nginx-volume
ubuntu@DESKTOP-5IG459O:/mnt/c/Users/P7XXTM1-G$ docker volume inspect named-nginx-volume
[
    &#123;
        &quot;CreatedAt&quot;: &quot;2021-03-25T02:31:48Z&quot;,
        &quot;Driver&quot;: &quot;local&quot;,
        &quot;Labels&quot;: null,
        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/named-nginx-volume/_data&quot;,
        &quot;Name&quot;: &quot;named-nginx-volume&quot;,
        &quot;Options&quot;: null,
        &quot;Scope&quot;: &quot;local&quot;
    &#125;
]
ubuntu@DESKTOP-5IG459O:/mnt/c/Users/P7XXTM1-G$
</code></pre>
<hr>
<h3 id="区分"><a href="#区分" class="headerlink" title="区分"></a>区分</h3><blockquote>
<p><strong>匿名挂载</strong><br>-v 容器内路径</p>
</blockquote>
<blockquote>
<p><strong>具名挂载</strong><br>-v 卷名：容器内路径</p>
</blockquote>
<blockquote>
<p><strong>指定路径挂载（普通挂载，也是匿名挂载）</strong><br>-v /宿主机路径：容器内路径</p>
</blockquote>
<hr>
<h3 id="读写权限"><a href="#读写权限" class="headerlink" title="读写权限"></a>读写权限</h3><blockquote>
<p>通过 -v 容器内路径：ro 或 rw 改变读写权限</p>
</blockquote>
<ul>
<li>ro read-only # 只读</li>
<li>rw read-and-write # 可读写</li>
</ul>
<pre><code class="bash"># ro
docker run -d -P --name NamedMountNginx -v named-nginx-volume:/etc/nginx:ro nginx

# rw
docker run -d -P --name NamedMountNginx -v named-nginx-volume:/etc/nginx:rw nginx
</code></pre>
<hr>
<h2 id="Docker-File"><a href="#Docker-File" class="headerlink" title="Docker File"></a>Docker File</h2><p>即用来构建 Docker 镜像的构建文件。</p>
<h3 id="编写脚本"><a href="#编写脚本" class="headerlink" title="编写脚本"></a>编写脚本</h3><p>创建 Docker File。</p>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ mkdir Test-Docker-File
ubuntu@DESKTOP-5IG459O:~$ ls
Test-Docker-File
ubuntu@DESKTOP-5IG459O:~$ cd Test-Docker-File/
ubuntu@DESKTOP-5IG459O:~/Test-Docker-File$ vim docker-file
</code></pre>
<blockquote>
<p>docker-file 文件中的内容<br>通过编辑该文件，对 Docker 镜像进行客制化。</p>
</blockquote>
<pre><code class="bash">FROM ubuntu

VOLUME [&quot;volume1&quot;, &quot;volume2&quot;]

CMD echo &quot;---BUILD END---&quot;

CMD /bin/bash
</code></pre>
<hr>
<h3 id="docker-build"><a href="#docker-build" class="headerlink" title="docker build"></a>docker build</h3><pre><code class="bash">ubuntu@DESKTOP-5IG459O:~/Test-Docker-File$ docker build -f /home/ubuntu/Test-Docker-File/docker-file -t custom/ubuntu .
[+] Building 0.2s (5/5) FINISHED
 =&gt; [internal] load build definition from docker-file                                                                                              0.0s
 =&gt; =&gt; transferring dockerfile: 123B                                                                                                               0.0s
 =&gt; [internal] load .dockerignore                                                                                                                  0.0s
 =&gt; =&gt; transferring context: 2B                                                                                                                    0.0s
 =&gt; [internal] load metadata for docker.io/library/ubuntu:latest                                                                                   0.0s
 =&gt; [1/1] FROM docker.io/library/ubuntu                                                                                                            0.1s
 =&gt; exporting to image                                                                                                                             0.0s
 =&gt; =&gt; exporting layers                                                                                                                            0.0s
 =&gt; =&gt; writing image sha256:5212c89e92e63e84857aa6cb946d18b0e161adfb9a606ff1762e174d299aac57                                                       0.0s
 =&gt; =&gt; naming to docker.io/custom/ubuntu                                                                                                           0.0s
ubuntu@DESKTOP-5IG459O:~/Test-Docker-File$
</code></pre>
<blockquote>
<p>查看构建完成后的镜像</p>
</blockquote>
<pre><code class="bash">ubuntu@DESKTOP-5IG459O:~/Test-Docker-File$ docker image ls
REPOSITORY               TAG       IMAGE ID       CREATED        SIZE
ubuntu                   latest    4dd97cefde62   3 weeks ago    72.9MB
custom/ubuntu            latest    5212c89e92e6   3 weeks ago    72.9MB
</code></pre>
<hr>
<h3 id="检查生成的镜像"><a href="#检查生成的镜像" class="headerlink" title="检查生成的镜像"></a>检查生成的镜像</h3><pre><code class="bash">ubuntu@DESKTOP-5IG459O:~/Test-Docker-File$ docker run -it custom/ubuntu /bin/bash
root@3e8bb3cc0c7a:/# ls -l
total 56
lrwxrwxrwx   1 root root    7 Feb 17 01:04 bin -&gt; usr/bin
drwxr-xr-x   2 root root 4096 Apr 15  2020 boot

...

# 这里是我们在之前脚本中挂载的容器数据卷
drwxr-xr-x   2 root root 4096 Mar 29 13:55 volume1
drwxr-xr-x   2 root root 4096 Mar 29 13:55 volume2
root@3e8bb3cc0c7a:/#
</code></pre>
<blockquote>
<p>我们在 volume1 文件夹中创建一个测试文件 testFile。<br>通过 docker inspect 命令，检查<code>用客制化镜像所生成的容器</code>。<br>通过检查 Windows 中的 Docker Volume文件夹，验证我们创建的容器的正确性。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/Blog-Repository@master/Notes/Docker/docker_file_custom_ubuntu_test.png" alt="检查挂载容器数据卷中的文件"></p>
<hr>
<h2 id="数据卷容器（待完善）"><a href="#数据卷容器（待完善）" class="headerlink" title="数据卷容器（待完善）"></a>数据卷容器（待完善）</h2><p>当容器与容器之间需要同步数据的时候，一般使用数据卷容器进行挂载。</p>
<p>使用场景示例：多个 MySQL 同步数据。</p>
<p>类似 Windows 中的共享文件夹</p>
<p>步骤：</p>
<blockquote>
<ol>
<li>创建父容器</li>
<li>通过 –volumes-from 命令，将子容器挂载到父容器</li>
</ol>
</blockquote>
<hr>
<h3 id="创建父容器"><a href="#创建父容器" class="headerlink" title="创建父容器"></a>创建父容器</h3><pre><code class="bash">ubuntu@DESKTOP-5IG459O:~$ docker image ls
REPOSITORY               TAG       IMAGE ID       CREATED        SIZE
custom/ubuntu            latest    715329a7458b   5 weeks ago    72.9MB
ubuntu                   latest    4dd97cefde62   5 weeks ago    72.9MB

# 运行我们刚才创建的自定义容器，并运行，可以看到 VOLUME01 与 VOLUME02 为自定义容器中默认挂载的两个容器。
ubuntu@DESKTOP-5IG459O:~$ docker run -it --name Docker-Host custom/ubuntu
root@0d03cf71815e:/# ls -l
total 56
drwxr-xr-x   2 root root 4096 Apr 12 08:41 VOLUME01
drwxr-xr-x   2 root root 4096 Apr 12 08:41 VOLUME02
lrwxrwxrwx   1 root root    7 Feb 17 01:04 bin -&gt; usr/bin
drwxr-xr-x   2 root root 4096 Apr 15  2020 boot
...
root@0d03cf71815e:/#
</code></pre>
<hr>
<h3 id="创建子容器"><a href="#创建子容器" class="headerlink" title="创建子容器"></a>创建子容器</h3><blockquote>
<p>–volumes-from</p>
</blockquote>
<pre><code class="bash"># 查看正在运行中的父容器。
ubuntu@DESKTOP-5IG459O:~$ docker ps
CONTAINER ID   IMAGE           COMMAND                  CREATED         STATUS         PORTS     NAMES
0d03cf71815e   custom/ubuntu   &quot;/bin/sh -c /bin/bash&quot;   2 minutes ago   Up 2 minutes             Docker-Host

# 通过 --volumes-from 命令，指定子容器所要继承的父容器。
ubuntu@DESKTOP-5IG459O:~$ docker run -it --name Docker-Child01 --volumes-from Docker-Host custom/ubuntu

# 运行子容器，可以看到挂载到父容器的 VOLUME01 与 VOLUME02 卷。
root@2864c4f3b8ba:/# ls -l
total 56
drwxr-xr-x   2 root root 4096 Apr 12 08:41 VOLUME01
drwxr-xr-x   2 root root 4096 Apr 12 08:41 VOLUME02
lrwxrwxrwx   1 root root    7 Feb 17 01:04 bin -&gt; usr/bin
drwxr-xr-x   2 root root 4096 Apr 15  2020 boot
...
root@2864c4f3b8ba:/#
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/Blog-Repository@master/Notes/Docker/docker-host-child-file-sharing.png" alt="当我们在父容器 Docker-Host 中创建文件时，子容器 Docker-Child01 会同步文件"></p>
<hr>
<p>创建多个子容器，当我们在子容器中进行文件的修改，父容器也会同步。</p>
<p><img src="https://cdn.jsdelivr.net/gh/PhoenixNest/Blog-Repository@master/Notes/Docker/docker-host-child-sharing-file-from-child02.png" alt="子容器 Docker-Child02 创建文件，父容器 Docker-Host 同步文件"></p>
<hr>
<p>PS：</p>
<blockquote>
<p>只要有一个容器尚在，容器中的文件都不会被删除。</p>
</blockquote>
<blockquote>
<p>容器创建时使用的镜像已挂载了两个卷（VOLUME01 与 VOLUME02），所以是肯定有两个目录的，跟数据卷容器没关系。</p>
</blockquote>
<blockquote>
<p>–volumes-from 不是同步所有目录，而是同步挂载点，这就是同步 Docker-Child01 与 Docker-Child02，但在其他目录是不会同步的。</p>
</blockquote>
<hr>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><p><a target="_blank" rel="noopener" href="https://yeasy.gitbook.io/docker_practice/">Docker —— 从入门到实践</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1og4y1q7M4?from=search&seid=9603368310329855182">狂神说 – Docker 最新超详细版教程通俗易懂</a></p>
</li>
</ul>

            <!--[if lt IE 9]>
            <script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                   data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='https://cdn.jsdelivr.net/gh/PhoenixNest/Blog-Repository@master/Music/StarCraft%20Terran%20Band%20-%20Blood%20and%20Glory.mp3'></li>
                        
                    
                </ul>
            
            
            
            
                <hr>
                <div id="vcomments"></div>
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="/img/portrait.png" height=300 width=300 />
                    <p>PhoenixNest</p>
                    <span>用实力让情怀落地</span>
                    
                </div>
                <ul>
                    <li><a href="/">43 <p>文章</p></a></li>
                    <li><a href="/categories">18 <p>分类</p></a></li>
                    <li><a href="/tags">35 <p>标签</p></a></li>
                </ul>
            </div>
            
                
                
                    <div class="box sticky animated fadeInRight faster">
                        <div id="toc" class="subbox">
                            <h4>目录</h4>
                            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">引言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hello-World"><span class="toc-number">2.</span> <span class="toc-text">Hello World</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3"><span class="toc-number">2.1.</span> <span class="toc-text">官方文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-vs-VM"><span class="toc-number">2.2.</span> <span class="toc-text">Docker vs VM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Welcome-To-Docker"><span class="toc-number">2.3.</span> <span class="toc-text">Welcome To Docker</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4"><span class="toc-number">3.</span> <span class="toc-text">Docker 帮助命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-version"><span class="toc-number">3.1.</span> <span class="toc-text">docker version</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-info"><span class="toc-number">3.2.</span> <span class="toc-text">docker info</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-xx-%E2%80%93help"><span class="toc-number">3.3.</span> <span class="toc-text">docker xx –help</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4"><span class="toc-number">4.</span> <span class="toc-text">Docker 镜像命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-images"><span class="toc-number">4.1.</span> <span class="toc-text">docker images</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-search-%E9%95%9C%E5%83%8F%E5%85%B3%E9%94%AE%E8%AF%8D"><span class="toc-number">4.2.</span> <span class="toc-text">docker search 镜像关键词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-pull-%E9%95%9C%E5%83%8F%E5%90%8D-tag"><span class="toc-number">4.3.</span> <span class="toc-text">docker pull 镜像名[:tag]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-rmi-%E9%95%9C%E5%83%8F"><span class="toc-number">4.4.</span> <span class="toc-text">docker rmi 镜像</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">5.</span> <span class="toc-text">Docker 容器命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-run-%E5%8F%AF%E9%80%89%E5%8F%82%E6%95%B0-image"><span class="toc-number">5.1.</span> <span class="toc-text">docker run [可选参数] image</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exit"><span class="toc-number">5.2.</span> <span class="toc-text">exit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-ps"><span class="toc-number">5.3.</span> <span class="toc-text">docker ps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-rm-%E5%AE%B9%E5%99%A8id"><span class="toc-number">5.4.</span> <span class="toc-text">docker rm 容器id</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E7%9A%84-%E5%90%AF%E5%8A%A8-%E9%87%8D%E5%90%AF-%E5%81%9C%E6%AD%A2-%E5%BC%BA%E5%88%B6%E5%81%9C%E6%AD%A2-%E5%91%BD%E4%BB%A4"><span class="toc-number">5.5.</span> <span class="toc-text">容器的 启动&#x2F;重启&#x2F;停止&#x2F;强制停止 命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-%E5%85%B6%E4%BB%96%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">6.</span> <span class="toc-text">Docker 其他常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-run-d-%E9%95%9C%E5%83%8F%E5%90%8D"><span class="toc-number">6.1.</span> <span class="toc-text">docker run -d 镜像名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-logs"><span class="toc-number">6.2.</span> <span class="toc-text">docker logs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-stats"><span class="toc-number">6.3.</span> <span class="toc-text">docker stats</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-top-%E5%AE%B9%E5%99%A8id"><span class="toc-number">6.4.</span> <span class="toc-text">docker top 容器id</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-inspect-%E5%AE%B9%E5%99%A8id"><span class="toc-number">6.5.</span> <span class="toc-text">docker inspect 容器id</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-exec-it-%E5%AE%B9%E5%99%A8id-%E7%BB%88%E7%AB%AF%E5%9C%B0%E5%9D%80"><span class="toc-number">6.6.</span> <span class="toc-text">docker exec -it 容器id 终端地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-attach-%E5%AE%B9%E5%99%A8id"><span class="toc-number">6.7.</span> <span class="toc-text">docker attach 容器id</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-cp-%E5%AE%B9%E5%99%A8id-%E5%AE%B9%E5%99%A8%E7%9B%AE%E5%BD%95-%E6%9C%AC%E5%9C%B0%E7%9B%AE%E5%BD%95"><span class="toc-number">6.8.</span> <span class="toc-text">docker cp 容器id:&#x2F;容器目录 本地目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-commit"><span class="toc-number">6.9.</span> <span class="toc-text">docker commit</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-%E5%91%BD%E4%BB%A4%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8"><span class="toc-number">7.</span> <span class="toc-text">Docker 命令简单应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2-Nginx"><span class="toc-number">7.1.</span> <span class="toc-text">部署 Nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2-Tomcat"><span class="toc-number">7.2.</span> <span class="toc-text">部署 Tomcat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2-Elasticsearch"><span class="toc-number">7.3.</span> <span class="toc-text">部署 Elasticsearch</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">8.</span> <span class="toc-text">可视化管理工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Portiner"><span class="toc-number">8.1.</span> <span class="toc-text">Portiner</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-number">9.</span> <span class="toc-text">容器数据卷</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-number">9.1.</span> <span class="toc-text">原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-run-it-v-%E4%B8%BB%E6%9C%BA%E7%9B%AE%E5%BD%95-%E5%AE%B9%E5%99%A8%E5%86%85%E7%9B%AE%E5%BD%95"><span class="toc-number">9.2.</span> <span class="toc-text">docker run -it -v 主机目录:容器内目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95-MySQL-%E6%95%B0%E6%8D%AE"><span class="toc-number">9.3.</span> <span class="toc-text">测试 MySQL 数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E6%8C%82%E8%BD%BD"><span class="toc-number">9.4.</span> <span class="toc-text">匿名挂载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E5%90%8D%E6%8C%82%E8%BD%BD"><span class="toc-number">9.5.</span> <span class="toc-text">具名挂载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%BA%E5%88%86"><span class="toc-number">9.6.</span> <span class="toc-text">区分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%86%99%E6%9D%83%E9%99%90"><span class="toc-number">9.7.</span> <span class="toc-text">读写权限</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-File"><span class="toc-number">10.</span> <span class="toc-text">Docker File</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC"><span class="toc-number">10.1.</span> <span class="toc-text">编写脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker-build"><span class="toc-number">10.2.</span> <span class="toc-text">docker build</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E7%94%9F%E6%88%90%E7%9A%84%E9%95%9C%E5%83%8F"><span class="toc-number">10.3.</span> <span class="toc-text">检查生成的镜像</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%AE%B9%E5%99%A8%EF%BC%88%E5%BE%85%E5%AE%8C%E5%96%84%EF%BC%89"><span class="toc-number">11.</span> <span class="toc-text">数据卷容器（待完善）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%88%B6%E5%AE%B9%E5%99%A8"><span class="toc-number">11.1.</span> <span class="toc-text">创建父容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%90%E5%AE%B9%E5%99%A8"><span class="toc-number">11.2.</span> <span class="toc-text">创建子容器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">12.</span> <span class="toc-text">参考资料</span></a></li></ol>
                        </div>
                    </div>
                
            
        </div>
    </div>
</div>

    </div>
</div>
<div id="back-to-top" class="animated fadeIn faster">
    <div class="flow"></div>
    <span class="percentage animated fadeIn faster">0%</span>
    <span class="iconfont icon-top02 animated fadeIn faster"></span>
</div>
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2024
        <span class="gradient-text">
            PhoenixNest
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
    </p>
</footer>

    <script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <script>
        MathJax.Hub.Config({
            "HTML-CSS": {
                preferredFont: "TeX",
                availableFonts: ["STIX", "TeX"],
                linebreaks: {
                    automatic: true
                },
                EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
            },
            tex2jax: {
                inlineMath: [
                    ["$", "$"],
                    ["\\(", "\\)"]
                ],
                processEscapes: true,
                ignoreClass: "tex2jax_ignore|dno",
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
            },
            TeX: {
                noUndefined: {
                    attributes: {
                        mathcolor: "red",
                        mathbackground: "#FFEEEE",
                        mathsize: "90%"
                    }
                },
                Macros: {
                    href: "{}"
                }
            },
            messageStyle: "none"
        });
    </script>
    <script>
        function initialMathJax() {
            MathJax.Hub.Queue(function () {
                var all = MathJax.Hub.getAllJax(),
                    i;
                // console.log(all);
                for (i = 0; i < all.length; i += 1) {
                    console.log(all[i].SourceElement().parentNode)
                    all[i].SourceElement().parentNode.className += ' has-jax';
                }
            });
        }

        function reprocessMathJax() {
            if (typeof MathJax !== 'undefined') {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            }
        }
    </script>




<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>


<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>


<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>


<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>

  
<script src="/js/busuanzi.min.js"></script>

<script>
    $(document).ready(function () {
        if ($('span[id^="busuanzi_"]').length) {
            initialBusuanzi();
        }
    });
</script>
 
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">


<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
  

<script>
    function initialTyped() {
        var typedTextEl = $('.typed-text');
        if (typedTextEl && typedTextEl.length > 0) {
            var typed = new Typed('.typed-text', {
                strings: ['Beyond The World', '用实力让情怀落地'],
                typeSpeed: 90,
                loop: true,
                loopCount: Infinity,
                backSpeed: 20,
            });
        }
    }

    if ($('.article-header') && $('.article-header').length) {
        $(document).ready(function () {
            initialTyped();
        });
    }
</script>

 
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
    var valine = new Valine();

    function initValine(path) {
        if (!path) path = window.location.pathname;
        let language = 'zh-CN';
        if (!language) {
            language = 'en';
        } else {
            language = language.toLowerCase();
        }
        valine.init({
            el: '#vcomments',
            appId: 'HDzkYOSz3NGcQuXbWMLin1mS-gzGzoHsz',
            appKey: 'pJ9JxbsY5D5aEmhxtCSNBlCT',
            notify: '',
            verify: '',
            avatar: '',
            placeholder: '温酒会知音 😉',
            visitor: 'true',
            path: path,
            lang: language,
        });
    }

    $(document).ready(function () {
        initValine();
    });
</script>



 <!-- 例：百度统计 --> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?your_code"; var s = document.getElementsByTagName("script")[0];  s.parentNode.insertBefore(hm, s); })(); </script> 

</html>
